var app=function(){"use strict";function n(){}function t(n){return n()}function e(){return Object.create(null)}function r(n){n.forEach(t)}function o(n){return"function"==typeof n}function i(n,t){return n!=n?t==t:n!==t||n&&"object"==typeof n||"function"==typeof n}function a(n){return null==n?"":n}function s(n,t){n.appendChild(t)}function u(n,t,e){n.insertBefore(t,e||null)}function c(n){n.parentNode.removeChild(n)}function l(n,t){for(let e=0;e<n.length;e+=1)n[e]&&n[e].d(t)}function f(n){return document.createElement(n)}function d(n){return document.createTextNode(n)}function h(){return d(" ")}function m(n,t,e,r){return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}function _(n,t,e){null==e?n.removeAttribute(t):n.getAttribute(t)!==e&&n.setAttribute(t,e)}function g(n,t){t=""+t,n.data!==t&&(n.data=t)}function p(n,t,e,r){n.style.setProperty(t,e,r?"important":"")}function y(n,t){for(let e=0;e<n.options.length;e+=1){const r=n.options[e];if(r.__value===t)return void(r.selected=!0)}}function v(n){const t=n.querySelector(":checked")||n.options[0];return t&&t.__value}function w(n,t,e){n.classList[e?"add":"remove"](t)}let E;function b(n){E=n}function k(){if(!E)throw new Error("Function called outside component initialization");return E}const M=[],x=[],S=[],D=[],T=Promise.resolve();let A=!1;function C(n){S.push(n)}function N(n){D.push(n)}let O=!1;const j=new Set;function F(){if(!O){O=!0;do{for(let n=0;n<M.length;n+=1){const t=M[n];b(t),z(t.$$)}for(M.length=0;x.length;)x.pop()();for(let n=0;n<S.length;n+=1){const t=S[n];j.has(t)||(j.add(t),t())}S.length=0}while(M.length);for(;D.length;)D.pop()();A=!1,O=!1,j.clear()}}function z(n){if(null!==n.fragment){n.update(),r(n.before_update);const t=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,t),n.after_update.forEach(C)}}const P=new Set;let I;function L(){I={r:0,c:[],p:I}}function $(){I.r||r(I.c),I=I.p}function B(n,t){n&&n.i&&(P.delete(n),n.i(t))}function R(n,t,e,r){if(n&&n.o){if(P.has(n))return;P.add(n),I.c.push(()=>{P.delete(n),r&&(e&&n.d(1),r())}),n.o(t)}}function Y(n,t){const e=t.token={};function r(n,r,o,i){if(t.token!==e)return;t.resolved=i;let a=t.ctx;void 0!==o&&(a=a.slice(),a[o]=i);const s=n&&(t.current=n)(a);let u=!1;t.block&&(t.blocks?t.blocks.forEach((n,e)=>{e!==r&&n&&(L(),R(n,1,1,()=>{t.blocks[e]=null}),$())}):t.block.d(1),s.c(),B(s,1),s.m(t.mount(),t.anchor),u=!0),t.block=s,t.blocks&&(t.blocks[r]=s),u&&F()}if(function(n){return n&&"object"==typeof n&&"function"==typeof n.then}(n)){const e=k();if(n.then(n=>{b(e),r(t.then,1,t.value,n),b(null)},n=>{b(e),r(t.catch,2,t.error,n),b(null)}),t.current!==t.pending)return r(t.pending,0),!0}else{if(t.current!==t.then)return r(t.then,1,t.value,n),!0;t.resolved=n}}function U(n,t,e){const r=n.$$.props[t];void 0!==r&&(n.$$.bound[r]=e,e(n.$$.ctx[r]))}function H(n){n&&n.c()}function q(n,e,i){const{fragment:a,on_mount:s,on_destroy:u,after_update:c}=n.$$;a&&a.m(e,i),C(()=>{const e=s.map(t).filter(o);u?u.push(...e):r(e),n.$$.on_mount=[]}),c.forEach(C)}function V(n,t){const e=n.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function J(n,t){-1===n.$$.dirty[0]&&(M.push(n),A||(A=!0,T.then(F)),n.$$.dirty.fill(0)),n.$$.dirty[t/31|0]|=1<<t%31}function X(t,o,i,a,s,u,l=[-1]){const f=E;b(t);const d=o.props||{},h=t.$$={fragment:null,ctx:null,props:u,update:n,not_equal:s,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:e(),dirty:l};let m=!1;if(h.ctx=i?i(t,d,(n,e,...r)=>{const o=r.length?r[0]:e;return h.ctx&&s(h.ctx[n],h.ctx[n]=o)&&(h.bound[n]&&h.bound[n](o),m&&J(t,n)),e}):[],h.update(),m=!0,r(h.before_update),h.fragment=!!a&&a(h.ctx),o.target){if(o.hydrate){const n=function(n){return Array.from(n.childNodes)}(o.target);h.fragment&&h.fragment.l(n),n.forEach(c)}else h.fragment&&h.fragment.c();o.intro&&B(t.$$.fragment),q(t,o.target,o.anchor),F()}b(f)}class W{$destroy(){V(this,1),this.$destroy=n}$on(n,t){const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(t),()=>{const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}$set(){}}function G(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}var K,Z;1===(K=G).length&&(Z=K,K=function(n,t){return G(Z(n),t)});function Q(n){return null===n?NaN:+n}function nn(n,t){var e,r=n.length,o=r,i=-1,a=0;if(null==t)for(;++i<r;)isNaN(e=Q(n[i]))?--o:a+=e;else for(;++i<r;)isNaN(e=Q(t(n[i],i,n)))?--o:a+=e;if(o)return a/o}var tn={value:function(){}};function en(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new rn(r)}function rn(n){this._=n}function on(n,t){return n.trim().split(/^|\s+/).map((function(n){var e="",r=n.indexOf(".");if(r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:e}}))}function an(n,t){for(var e,r=0,o=n.length;r<o;++r)if((e=n[r]).name===t)return e.value}function sn(n,t,e){for(var r=0,o=n.length;r<o;++r)if(n[r].name===t){n[r]=tn,n=n.slice(0,r).concat(n.slice(r+1));break}return null!=e&&n.push({name:t,value:e}),n}rn.prototype=en.prototype={constructor:rn,on:function(n,t){var e,r=this._,o=on(n+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++i<a;)if(e=(n=o[i]).type)r[e]=sn(r[e],n.name,t);else if(null==t)for(e in r)r[e]=sn(r[e],n.name,null);return this}for(;++i<a;)if((e=(n=o[i]).type)&&(e=an(r[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new rn(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(i=0,e=(r=this._[n]).length;i<e;++i)r[i].value.apply(t,o)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],o=0,i=r.length;o<i;++o)r[o].value.apply(t,e)}};en("start","end","cancel","interrupt");function un(){}function cn(n,t){var e=new un;if(n instanceof un)n.each((function(n,t){e.set(t,n)}));else if(Array.isArray(n)){var r,o=-1,i=n.length;if(null==t)for(;++o<i;)e.set(o,n[o]);else for(;++o<i;)e.set(t(r=n[o],o,n),r)}else if(n)for(var a in n)e.set(a,n[a]);return e}function ln(){}un.prototype=cn.prototype={constructor:un,has:function(n){return"$"+n in this},get:function(n){return this["$"+n]},set:function(n,t){return this["$"+n]=t,this},remove:function(n){var t="$"+n;return t in this&&delete this[t]},clear:function(){for(var n in this)"$"===n[0]&&delete this[n]},keys:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(t.slice(1));return n},values:function(){var n=[];for(var t in this)"$"===t[0]&&n.push(this[t]);return n},entries:function(){var n=[];for(var t in this)"$"===t[0]&&n.push({key:t.slice(1),value:this[t]});return n},size:function(){var n=0;for(var t in this)"$"===t[0]&&++n;return n},empty:function(){for(var n in this)if("$"===n[0])return!1;return!0},each:function(n){for(var t in this)"$"===t[0]&&n(this[t],t.slice(1),this)}};var fn=cn.prototype;function dn(n){var t=[];for(var e in n)t.push(e);return t}function hn(n){var t=[];for(var e in n)t.push(n[e]);return t}ln.prototype=function(n,t){var e=new ln;if(n instanceof ln)n.each((function(n){e.add(n)}));else if(n){var r=-1,o=n.length;if(null==t)for(;++r<o;)e.add(n[r]);else for(;++r<o;)e.add(t(n[r],r,n))}return e}.prototype={constructor:ln,has:fn.has,add:function(n){return this["$"+(n+="")]=n,this},remove:fn.remove,clear:fn.clear,values:fn.keys,size:fn.size,empty:fn.empty,each:fn.each};var mn={},_n={};function gn(n){return new Function("d","return {"+n.map((function(n,t){return JSON.stringify(n)+": d["+t+'] || ""'})).join(",")+"}")}function pn(n){var t=Object.create(null),e=[];return n.forEach((function(n){for(var r in n)r in t||e.push(t[r]=r)})),e}function yn(n,t){var e=n+"",r=e.length;return r<t?new Array(t-r+1).join(0)+e:e}function vn(n){var t,e=n.getUTCHours(),r=n.getUTCMinutes(),o=n.getUTCSeconds(),i=n.getUTCMilliseconds();return isNaN(n)?"Invalid Date":((t=n.getUTCFullYear())<0?"-"+yn(-t,6):t>9999?"+"+yn(t,6):yn(t,4))+"-"+yn(n.getUTCMonth()+1,2)+"-"+yn(n.getUTCDate(),2)+(i?"T"+yn(e,2)+":"+yn(r,2)+":"+yn(o,2)+"."+yn(i,3)+"Z":o?"T"+yn(e,2)+":"+yn(r,2)+":"+yn(o,2)+"Z":r||e?"T"+yn(e,2)+":"+yn(r,2)+"Z":"")}var wn=function(n){var t=new RegExp('["'+n+"\n\r]"),e=n.charCodeAt(0);function r(n,t){var r,o=[],i=n.length,a=0,s=0,u=i<=0,c=!1;function l(){if(u)return _n;if(c)return c=!1,mn;var t,r,o=a;if(34===n.charCodeAt(o)){for(;a++<i&&34!==n.charCodeAt(a)||34===n.charCodeAt(++a););return(t=a)>=i?u=!0:10===(r=n.charCodeAt(a++))?c=!0:13===r&&(c=!0,10===n.charCodeAt(a)&&++a),n.slice(o+1,t-1).replace(/""/g,'"')}for(;a<i;){if(10===(r=n.charCodeAt(t=a++)))c=!0;else if(13===r)c=!0,10===n.charCodeAt(a)&&++a;else if(r!==e)continue;return n.slice(o,t)}return u=!0,n.slice(o,i)}for(10===n.charCodeAt(i-1)&&--i,13===n.charCodeAt(i-1)&&--i;(r=l())!==_n;){for(var f=[];r!==mn&&r!==_n;)f.push(r),r=l();t&&null==(f=t(f,s++))||o.push(f)}return o}function o(t,e){return t.map((function(t){return e.map((function(n){return a(t[n])})).join(n)}))}function i(t){return t.map(a).join(n)}function a(n){return null==n?"":n instanceof Date?vn(n):t.test(n+="")?'"'+n.replace(/"/g,'""')+'"':n}return{parse:function(n,t){var e,o,i=r(n,(function(n,r){if(e)return e(n,r-1);o=n,e=t?function(n,t){var e=gn(n);return function(r,o){return t(e(r),o,n)}}(n,t):gn(n)}));return i.columns=o||[],i},parseRows:r,format:function(t,e){return null==e&&(e=pn(t)),[e.map(a).join(n)].concat(o(t,e)).join("\n")},formatBody:function(n,t){return null==t&&(t=pn(n)),o(n,t).join("\n")},formatRows:function(n){return n.map(i).join("\n")},formatRow:i,formatValue:a}}(",").parse;function En(n){if(!n.ok)throw new Error(n.status+" "+n.statusText);return n.text()}function bn(n,t){return fetch(n,t).then(En)}var kn,Mn=(kn=wn,function(n,t,e){return 2===arguments.length&&"function"==typeof t&&(e=t,t=void 0),bn(n,t).then((function(n){return kn(n,e)}))}),xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Sn(n,t){return n(t={exports:{}},t.exports),t.exports}var Dn,Tn=Sn((function(n,t){!function(n){const t=/(\w+)\(([\w\.\/]+)(,([\w\.]+))?\)/;function e(n){let e="",r="data/cars.json";const o={};for(const i of n){const n=i.replace(/\"/g,""),a=i.trim().startsWith(":-"),[s,u,c,l,f]=t.exec(n);"mark"===u?e=c:"data"===u?r=c:"soft"!==u&&(o[c]||(o[c]={}),o[c][u]=f||!a)}const i={};for(const n of Object.keys(o)){const t=o[n];"quantitative"===t.type&&void 0===t.zero&&void 0===t.bin&&(t.zero=!1);const e={...t.log?{type:"log"}:{},...void 0===t.zero?{}:t.zero?{zero:!0}:{zero:!1}};i[t.channel]={type:t.type,...t.aggregate?{aggregate:t.aggregate}:{},...t.field?{field:t.field}:{},...t.stack?{stack:t.stack}:{},...void 0!==t.bin?10==+t.bin?{bin:!0}:{bin:{maxbins:+t.bin}}:{},...Object.keys(e).length?{scale:e}:{}}}return{$schema:"https://vega.github.io/schema/vega-lite/v3.json",data:{url:""+r},mark:e,encoding:i}}const r="% ====== Expressiveness and Well-Formedness Constraints ======\n\n% === Within Encodings ===\n\n% @constraint Primitive type has to support data type.\nhard(enc_type_valid,E,F) :- type(E,quantitative), field(E,F), fieldtype(F,(string;boolean)).\nhard(enc_type_valid,E,F) :- type(E,temporal), field(E,F), not fieldtype(F,datetime).\n\n% @constraint Can only bin quantitative or ordinal.\nhard(bin_q_o,E,T) :- type(E,T), bin(E,_), T != quantitative, T != ordinal.\n\n% @constraint Can only use log with quantitative.\nhard(log_q,E) :- log(E), not type(E,quantitative).\n\n% @constraint Can only use zero with quantitative.\nhard(zero_q,E) :- zero(E), not type(E,quantitative).\n\n% @constraint Cannot use log scale with discrete (which includes binned).\nhard(log_discrete,E) :- log(E), discrete(E).\n\n% @constraint Cannot use log and zero together.\nhard(log_zero,E) :- log(E), zero(E).\n\n% @constraint Cannot use log if the data is negative or zero.\nhard(log_non_positive,E,F) :- log(E), field(E,F), extent(F,MIN,_), MIN <= 0.\n\n% @constraint Cannot bin and aggregate.\nhard(bin_and_aggregate,E) :- bin(E,_), aggregate(E,_).\n\n% @constraint Oridnal only supports min, max, and median.\nhard(aggregate_o_valid,E,A) :- type(E,ordinal), aggregate(E,A), A != min, A != max, A != median.\n\n% @constraint Temporal only supports min and max.\nhard(aggregate_t_valid,E,A) :- type(E,temporal), aggregate(E,A), A != min, A != max.\n\n% @constraint Cannot aggregate nominal.\nhard(aggregate_nominal,E) :- aggregate(E,_), type(E,nominal).\n\n% @constraint Detail cannot be aggregated.\nhard(aggregate_detail,E) :- channel(E,detail), aggregate(E,_).\n\n% @constraint Count has to be quantitative and not use a field.\nhard(count_q_without_field,E) :- aggregate(E,count), field(E,_).\nhard(count_q_without_field,E) :- aggregate(E,count), not type(E,quantitative).\n\n% @constraint Shape requires discrete and not ordered (nominal). Using ordinal would't make a difference in Vega-Lite.\nhard(shape_discrete_non_ordered,E) :- channel(E,shape), not type(E,nominal).\n\n% @constraint Detail requires nominal.\nhard(detail_non_ordered,E) :- channel(E,detail), not type(E,nominal).\n\n% @constraint Size implies order so nominal is misleading.\nhard(size_nominal) :- channel(E,size), type(E,nominal).\n\n% @constraint Do not use size when data is negative as size implies that data is positive.\nhard(size_negative,E) :- channel(E,size), enc_extent(E,MIN,MAX), MIN < 0, MAX > 0.\n\n% === Across encodings and between encodings and marks ===\n\n% @constraint Cannot use single channels twice.\nhard(repeat_channel,C):- single_channel(C), 2 { channel(_,C) }.\n\n% @constraint There has to be at least one encoding. Otherwise, the visualization doesn't show anything.\nhard(no_encodings) :- not encoding(_).\n\n% @constraint Row and column require discrete.\nhard(row_or_column_c) :- channel_continuous(row;column).\n\n% @constraint Don't use row without y. Just using y is simpler.\nhard(row_no_y) :- channel(_,row), not channel(_,y).\n\n% @constraint Don't use column without x. Just using x is simpler.\nhard(column_no_x) :- channel(_,column), not channel(_,x).\n\n% @constraint All encodings (if they have a channel) require field except if we have a count aggregate.\nhard(encoding_no_field_and_not_count,E) :- not field(E,_), not aggregate(E,count), encoding(E).\n\n% @constraint Count should not have a field. Having a field doesn't make a difference.\nhard(count_with_field,E) :- aggregate(E,count), field(E,_).\n\n% @constraint Text mark requires text channel.\nhard(text_mark_without_text_channel) :- mark(text), not channel(_,text).\n\n% @constraint Text channel requires text mark.\nhard(text_channel_without_text_mark) :- channel(_,text), not mark(text).\n\n% @constraint Point, tick, and bar require x or y channel.\nhard(point_tick_bar_without_x_or_y) :- mark(point;tick;bar), not channel(_,x), not channel(_,y).\n\n% @constraint Line and area require x and y channel.\nhard(line_area_without_x_y) :- mark(line;area), not channel(_,(x;y)).\n\n% @constraint Line and area cannot have two discrete.\nhard(line_area_with_discrete) :- mark(line;area), channel_discrete(x), channel_discrete(y).\n\n% @constraint Bar and tick cannot have both x and y continuous.\nhard(bar_tick_continuous_x_y) :- mark(bar;tick), channel_continuous(x), channel_continuous(y).\n\n% @constraint Bar, tick, line, area require some continuous variable on x or y.\nhard(bar_tick_area_line_without_continuous_x_y) :- mark(bar;tick;area;line), not channel_continuous(x), not channel_continuous(y).\n\n% @constraint Bar and area mark requires scale of continuous to start at zero.\nhard(bar_area_without_zero) :- mark(bar;area), channel(E,x), orientation(horizontal), not zero(E).\nhard(bar_area_without_zero) :- mark(bar;area), channel(E,y), orientation(vertical), not zero(E).\n\n% @constraint Shape channel requires point mark.\nhard(shape_without_point) :- channel(_,shape), not mark(point).\n\n% @constraint Size only works with some marks. Vega-Lite can also size lines, and ticks but that would violate best practices.\nhard(size_without_point_text) :- channel(_,size), not mark(point), not mark(text).\n\n% @constraint Detail requires aggregation. Detail adds a field to the group by. Detail could also be used to add information to tooltips. We may remove this later.\nhard(detail_without_agg) :- channel(_,detail), not aggregate(_,_).\n\n% @constraint Do not use log for bar or area mark as they are often misleading. We may remove this rule in the future.\nhard(area_bar_with_log) :- mark(bar;area), log(E), channel(E,(x;y)).\n\n% @constraint Rect mark needs discrete x and y.\nhard(rect_without_d_d) :- mark(rect), not is_d_d.\n\n% @constraint Don't use the same field on x and y.\nhard(same_field_x_and_y) :- { field(E,F) : channel(E,x); field(E,F) : channel(E,y) } >= 2, field(F).\n\n% @constraint Don't use count on x and y.\nhard(count_on_x_and_y):- channel(EX,x), channel(EY,y), aggregate(EX,count), aggregate(EY,count).\n\n% @constraint If we use aggregation, then all continuous fields need to be aggeragted.\nhard(aggregate_not_all_continuous):- aggregate(_,_), continuous(E), not aggregate(E,_).\n\n% @constraint Don't use count twice.\nhard(count_twice) :- { aggregate(_,count) } = 2.\n\n% === Global properties ===\n\n% @constraint Bars and area cannot overlap.\nhard(bar_area_overlap) :- mark(bar;area), overlap.\n\n% @constraint Rects shouldn't overlap. They are used for dioscrete heatmaps.\nhard(rect_overlap) :- mark(rect), overlap.\n\n% == Stacking ==\n\n% @constraint Only use stacking for bar and area.\nhard(stack_without_bar_area) :- stack(_), not mark(bar), not mark(area).\n\n% @constraint Don't stack if aggregation is not summative (summative are count, sum, distinct, valid, missing).\nhard(stack_without_summative_agg,E,A) :- stack(E,_), aggregate(E,A), not summative_aggregate_op(A).\n\n% @constraint Need to stack if we use bar, area with discrete color.\nhard(no_stack_with_bar_area_discrete_color,E) :- mark(bar;area), channel(E,color), discrete(E), not stack(_).\n\n% @constraint Can only use stack if we also use discrete color, or detail.\nhard(stack_without_discrete_color_or_detail) :- stack(_), not channel_discrete(color), not channel(_,detail).\n\n% @constraint If we use stack and detail, we also have to use quantitative color.\nhard(stack_detail_without_q_color) :- stack(_), channel(_,detail), not channel(_,color).\nhard(stack_detail_without_q_color,E) :- stack(_), channel(_,detail), channel(E,color), not aggregate(E,_).\n\n% @constraint Stack can only be on continuous.\nhard(stack_discrete,E) :- stack(E,_), discrete(E).\n\n% @constraint Stack can only be on x or y.\nhard(stack_without_x_y,E) :- stack(E,_), not channel(E,x), not channel(E,y).\n\n% @constraint Cannot use non positional continuous with stack unless it's aggregated.\nhard(stack_with_non_positional_non_agg,E,C) :- stack(_), non_positional(C), channel(E,C), not aggregate(E,_), continuous(E).\n\n% @constraint Vega-Lite currently supports 8 shapes.\nhard(shape_with_cardinality_gt_eight,E,C) :- channel(E,shape), enc_cardinality(E,C), C > 8.\n\n% @constraint At most 20 categorical colors.\nhard(color_with_cardinality_gt_twenty,E,C) :- channel(E,color), discrete(E), enc_cardinality(E,C), C > 20.\n\n% === Type checks ===\n\n% @constraint Check mark.\nhard(invalid_mark,M) :- mark(M), not marktype(M).\n\n% @constraint Check types of encoding properties.\nhard(invalid_channel,C) :- channel(_,C), not channel(C).\nhard(invalid_field,F) :- field(_,F), not field(F).\nhard(invalid_type,T) :- type(_,T), not type(T).\nhard(invalid_agg,A) :- aggregate(_,A), not aggregate_op(A).\nhard(invalid_bin,B) :- bin(_,B), not B >= 0.  % @constraint Bin has to be a natural number.\n\n% @constraint Fieldtype has to be primitive type.\nhard(invalid_fieldtype,T) :- fieldtype(_,T), not primitive_type(T).\n\n% @constraint Task has to be one of the tasks.\nhard(invalid_task,T) :- task(T), not tasks(T).\n\n% @constraint Num_rows has to be larger than 0.\nhard(invalid_num_rows,S) :- num_rows(S), S < 0.\n\n% @constraint Cardinality has to be larger than 0.\nhard(invalid_cardinality,C) :- cardinality(_,C), C < 0.\n\n% @constraint Entropy has to be positive.\nhard(invalid_entropy,E) :- entropy(_,E), E < 0.\n\n% @constraint Extent only allowed for numbers (for now).\nhard(invalid_extent_non_number,F) :- extent(F,_,_), not fieldtype(F,number).\n\n% @constraint Order has to be correct.\nhard(invalid_extent_order,MIN,MAX):- extent(_,MIN,MAX), MIN > MAX.\n\n% @constraint The name of a field cannot be the name of an encoding. This is to prevent errors coming from the shortcuts in define.lp.\nhard(encoding_field_same_name,N) :- encoding(N), field(N).\n\n",o="% After adding a soft constraint to this file, make sure to update 'weights.lp' and run 'process_softs.py'..\n\n% ====== Preferences ======\n\n% @constraint Prefer to use raw (no aggregate).\nsoft(aggregate,E) :- aggregate(E,_).\n\n% @constraint Prefer to not bin.\nsoft(bin,E) :- bin(E,_).\n\n% @constraint Prefer binning with at most 12 buckets.\nsoft(bin_high,E) :- bin(E,B), B > 12.\n\n% @constraint Prefer binning with more than 7 buckets.\nsoft(bin_low,E) :- bin(E,B), B <= 7.\n\n% @constraint Prefer to use fewer encodings.\nsoft(encoding,E) :- encoding(E).\n\n% @constraint Prefer to use fewer encodings with fields (count does not have a field).\nsoft(encoding_field,E) :- encoding(E), field(E,_).\n\n% @constraint Prefer not to use the same field twice.\nsoft(same_field_2,F) :- field(F), { field(_,F) } = 2.\n\n% @constraint Prefer not to use the same field three or more times.\n% @weight {16}\nsoft(same_field_gte3,F) :- field(F), { field(_,F) } >= 3.\n% @end\n\n% @constraint Prefer not to use count more than once.\nsoft(count_twice) :- { aggregate(_,count) } = 2.\n\n% @constraint Shape channel should not have too high cardinality.\nsoft(shape_cardinality,E) :- channel(E,shape), discrete_cardinality(E,C), C > 5.\n\n% @constraint Numbers should not be nominal.\nsoft(number_nominal,E) :- type(E,nominal), field(E,F), fieldtype(F,number).\n\n% @constraint Prefer nominal string fields\nsoft(string_non_nominal,V,E) :- type(V,E,ordinal), field(V,E,F), fieldtype(F,string).\nsoft(string_non_nominal,V,E) :- type(V,E,temporal), field(V,E,F), fieldtype(F,string).\nsoft(string_non_nominal,V,E) :- type(V,E,quantitative), field(V,E,F), fieldtype(F,string).\n\n% @constraint Binned quantitative field should not have too low cardinality.\nsoft(bin_cardinality,E) :- type(E,quantitative), bin(E,_), enc_cardinality(E,C), C < 15.\n\n% @constraint Prefer quantitative for bin.\nsoft(quant_bin,E) :- bin(E,_), not type(E,quantitative).\n\n% @constraint Plots with only nominal, ordinal, binned q, or t with time unit should add either an aggregation (e.g. count) or a quantitative field.\nsoft(only_discrete) :- not continuous(_).\n\n% @constraint Prefer not to use multiple non-positional encoding channels.\nsoft(multiple_non_pos) :- {channel(_,C): non_positional(C)} > 1.\n\n% @constraint Prefer not to use non-positional channels until all positional channels are used.\nsoft(non_positional_pref) :- channel(_,C), non_positional(C), not channel(_,(x;y)).\n\n% @constraint Aggregate plots should not use raw continuous as group by.\nsoft(aggregate_group_by_raw,E) :- aggregate(_,_), continuous(E), not aggregate(E,_).\n\n% @constraint Aggregate should also have a discrete encoding to group by.\nsoft(agg_dim) :- aggregate(_,_), not discrete(_).\n\n% @constraint Prefer not to use plot with both x and y discrete and no aggregate as it leads to occlusion.\nsoft(x_y_raw,E) :- channel(EX,x), discrete(EX), channel(EY,y), discrete(EY), not aggregate(E,_), continuous(E).\n\n% @constraint Prefer not to use log scale.\nsoft(log,E) :- log(E).\n\n% @constraint Prefer to include zero for continuous (binned doesn't need zero).\nsoft(zero,E) :- continuous(E), not zero(E).\n\n% @constraint Prefer zero size (even when binned).\nsoft(zero_size) :- channel(E,size), not zero(E).\n\n% @constraint Prefer zero positional.\nsoft(zero_positional) :- continuous(E), channel(E,(x;y)), not zero(E).\n\n% @constraint Prefer not to use zero when the difference between min and max is larger than distance to 0.\nsoft(zero_skew) :- enc_extent(E,MIN,MAX), EX = MAX - MIN, |MAX| > EX, |MIN| > EX, zero(E).\n\n% @constraint Do not include zero when the range of data includes zero.\nsoft(includes_zero) :- zero(E), extent(E,MIN,MAX), MIN < 0, MAX > 0.\n\n% @constraint Prefer to use only x instead of only y.\nsoft(only_x) :- channel(_,y), not channel(_,x).\n\n% @constraint Chart orientation for bar and tick (with and without bin). Binned fields have short labels if they are quantitative while otherwise labels can be long.\nsoft(orientation_binned) :- bin(E,_), type(E,quantitative), not channel(E,x).\n\n% @constraint Prefer not to use ordinal for fields with high cardinality.\nsoft(high_cardinality_ordinal,E) :- type(E,ordinal), discrete_cardinality(E,C), C > 30.\n\n% @constraint Prefer not to use nominal for fields with high cardinality.\nsoft(high_cardinality_nominal,E) :- type(E,nominal), enc_cardinality(E,C), C > 12.\n\n% @constraint Prefer not to use high cardinality nominal for color.\nsoft(high_cardinality_nominal_color,E) :- type(E,nominal), channel(E,color), enc_cardinality(E,C), C > 10.\n\n% @constraint Avoid high cardinality on x or column as it causes horizontal scrolling.\nsoft(horizontal_scrolling,E) :- channel(E,x), discrete_cardinality(E,C), C > 50.\nsoft(horizontal_scrolling,E) :- channel(E,columm), discrete_cardinality(E,C), C > 5.\n\n% @constraint Prefer to use temporal type with dates.\nsoft(temporal_date,E) :- field(E,F), fieldtype(F,datetime), not type(E,temporal).\n\n% @constraint Prefer quantitative for numbers with high cardinality.\nsoft(quantitative_numbers) :- field(E,F), fieldtype(F,number), cardinality(F,C), C > 20, not bin(E,_), not type(E,quantitative).\n\n% @constraint Overplotting. Prefer not to use x and y for continuous with high cardinality and low entropy without aggregation because the points will overplot.\nsoft(position_entropy,E) :- channel(E,(x;y)), continuous(E), enc_cardinality(E,C), C > 100, enc_entropy(E,EN), EN <= 12, not aggregate(E,_).\n\n% @constraint Prefer not to use size when the cardinality is large on x or y.\nsoft(high_cardinality_size,E) :- continuous(E), channel(_,size), enc_cardinality(E,C), C > 100, channel(E,(x;y)).\n\n% @constraint Prefer not to aggregate for value tasks.\nsoft(value_agg) :- task(value), aggregate(_,_).\n\n% @constraint Prefer not to use row and column for summary tasks as it makes it difficult to compare.\nsoft(facet_summary,E) :- task(summary), channel(E,row).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(x_row) :- channel(_,x), channel(_,row).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(y_row) :- channel(_,y), channel(_,row).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(x_column) :- channel(_,x), channel(_,column).\n\n% @constraint Positional interactions as suggested by Kim et al.\nsoft(y_column) :- channel(_,y), channel(_,column).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(color_entropy_high, E) :- channel(E,color), enc_entropy(E,EN), EN > 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(color_entropy_low, E) :- channel(E,color), enc_entropy(E,EN), EN <= 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(size_entropy_high, E) :- channel(E,size), enc_entropy(E,EN), EN > 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Entropy, primary quantitaty interactions as suggested by Kim et al.\nsoft(size_entropy_low, E) :- channel(E,size), enc_entropy(E,EN), EN <= 12, type(E,quantitative), enc_interesting(E).\n\n% @constraint Prefer not to use continuous on x, discrete on y, and column.\nsoft(c_d_column) :- channel_continuous(x), channel_discrete(y), channel(_,column).\n\n% @constraint Prefer time on x.\nsoft(temporal_y) :- type(E,temporal), not channel(E,x).\n\n% @constraint Prefer not to overlap with DxD.\nsoft(d_d_overlap) :- is_d_d, overlap.\n\n% ====== Rankings ======\n% === Data Types ===\n\n% @constraint Prefer quantitative > ordinal > nominal.\nsoft(type_q,E) :- type(E,quantitative).\n\n% @constraint Prefer quantitative > ordinal > nominal.\nsoft(type_o,E) :- type(E,ordinal).\n\n% @constraint Prefer quantitative > ordinal > nominal.\nsoft(type_n,E) :- type(E,nominal).\n\n% === Mark types ===\n\n% @constraint Continuous by continuous for point mark.\nsoft(c_c_point) :- is_c_c, mark(point).\n\n% @constraint Continuous by continuous for line mark.\nsoft(c_c_line) :- is_c_c, mark(line).\n\n% @constraint Continuous by continuous for area mark.\nsoft(c_c_area) :- is_c_c, mark(area).\n\n% @constraint Continuous by continuous for text mark.\nsoft(c_c_text) :- is_c_c, mark(text).\n\n% @constraint Continuous by continuous for tick mark.\nsoft(c_c_tick) :- is_c_c, mark(tick).\n\n% @constraint Continuous by discrete for point mark.\nsoft(c_d_point) :- is_c_d, not no_overlap, mark(point).\n\n% @constraint Continuous by discrete for bar mark.\nsoft(c_d_bar) :- is_c_d, not no_overlap, mark(bar).\n\n% @constraint Continuous by discrete for line mark.\nsoft(c_d_line) :- is_c_d, not no_overlap, mark(line).\n\n% @constraint Continuous by discrete for area mark.\nsoft(c_d_area) :- is_c_d, not no_overlap, mark(area).\n\n% @constraint Continuous by discrete for text mark.\nsoft(c_d_text) :- is_c_d, not no_overlap, mark(text).\n\n% @constraint Continuous by discrete for tick mark.\nsoft(c_d_tick) :- is_c_d, not no_overlap, mark(tick).\n\n% @constraint Continuous by discrete for point mark with no overlap.\nsoft(c_d_no_overlap_point) :- is_c_d, no_overlap, mark(point).\n\n% @constraint Continuous by discrete for bar mark with no overlap.\nsoft(c_d_no_overlap_bar) :- is_c_d, no_overlap, mark(bar).\n\n% @constraint Continuous by discrete for line mark with no overlap.\nsoft(c_d_no_overlap_line) :- is_c_d, no_overlap, mark(line).\n\n% @constraint Continuous by discrete for area mark with no overlap.\nsoft(c_d_no_overlap_area) :- is_c_d, no_overlap, mark(area).\n\n% @constraint Continuous by discrete for text mark with no overlap.\nsoft(c_d_no_overlap_text) :- is_c_d, no_overlap, mark(text).\n\n% @constraint Continuous by discrete for tick mark with no overlap.\nsoft(c_d_no_overlap_tick) :- is_c_d, no_overlap, mark(tick).\n\n% @constraint Discrete by discrete for point mark.\nsoft(d_d_point) :- is_d_d, mark(point).\n\n% @constraint Discrete by discrete for point mark.\nsoft(d_d_text) :- is_d_d, mark(text).\n\n% @constraint Discrete by discrete for point mark.\nsoft(d_d_rect) :- is_d_d, mark(rect).\n\n% === Channel rankings à la APT ===\n\n% @constraint Continuous on x channel.\nsoft(continuous_x,E) :- channel(E,x), continuous(E).\n\n% @constraint Continuous on y channel.\nsoft(continuous_y,E) :- channel(E,y), continuous(E).\n\n% @constraint Continuous on color channel.\nsoft(continuous_color,E) :- channel(E,color), continuous(E).\n\n% @constraint Continuous on size channel.\nsoft(continuous_size,E) :- channel(E,size), continuous(E).\n\n% @constraint Continuous on text channel.\nsoft(continuous_text,E) :- channel(E,text), continuous(E).\n\n% @constraint Ordered on x channel.\nsoft(ordered_x,E) :- channel(E,x), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on y channel.\nsoft(ordered_y,E) :- channel(E,y), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on color channel.\nsoft(ordered_color,E) :- channel(E,color), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on size channel.\nsoft(ordered_size,E) :- channel(E,size), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on text channel.\nsoft(ordered_text,E) :- channel(E,text), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on row channel.\nsoft(ordered_row,E) :- channel(E,row), discrete(E), not type(E,nominal).\n\n% @constraint Ordered on column channel.\nsoft(ordered_column,E) :- channel(E,column), discrete(E), not type(E,nominal).\n\n% @constraint Nominal on x channel.\nsoft(nominal_x,E) :- channel(E,x), type(E,nominal).\n\n% @constraint Nominal on y channel.\nsoft(nominal_y,E) :- channel(E,y), type(E,nominal).\n\n% @constraint Nominal on color channel.\nsoft(nominal_color,E) :- channel(E,color), type(E,nominal).\n\n% @constraint Nominal on shape channel.\nsoft(nominal_shape,E) :- channel(E,shape), type(E,nominal).\n\n% @constraint Nominal on text channel.\nsoft(nominal_text,E) :- channel(E,text), type(E,nominal).\n\n% @constraint Nominal on row channel.\nsoft(nominal_row,E) :- channel(E,row), type(E,nominal).\n\n% @constraint Nominal on column channel.\nsoft(nominal_column,E) :- channel(E,column), type(E,nominal).\n\n% @constraint Nominal on detail channel.\nsoft(nominal_detail,E) :- channel(E,detail), type(E,nominal).\n\n% @constraint Interesting on x channel.\nsoft(interesting_x,E) :- channel(E,x), enc_interesting(E).\n\n% @constraint Interesting on y channel.\nsoft(interesting_y,E) :- channel(E,y), enc_interesting(E).\n\n% @constraint Interesting on color channel.\nsoft(interesting_color,E) :- channel(E,color), enc_interesting(E).\n\n% @constraint Interesting on size channel.\nsoft(interesting_size,E) :- channel(E,size), enc_interesting(E).\n\n% @constraint Interesting on shape channel.\nsoft(interesting_shape,E) :- channel(E,shape), enc_interesting(E).\n\n% @constraint Interesting on text channel.\nsoft(interesting_text,E) :- channel(E,text), enc_interesting(E).\n\n% @constraint Interesting on row channel.\nsoft(interesting_row,E) :- channel(E,row), enc_interesting(E).\n\n% @constraint Interesting on column channel.\nsoft(interesting_column,E) :- channel(E,column), enc_interesting(E).\n\n% @constraint Interesting on detail channel.\nsoft(interesting_detail,E) :- channel(E,detail), enc_interesting(E).\n\n% === Aggregations ===\n\n% @constraint Count as aggregate op.\nsoft(aggregate_count,E) :- aggregate(E,count).\n\n% @constraint Sum as aggregate op.\nsoft(aggregate_sum,E) :- aggregate(E,sum).\n\n% @constraint Mean as aggregate op.\nsoft(aggregate_mean,E) :- aggregate(E,mean).\n\n% @constraint Median as aggregate op.\nsoft(aggregate_median,E) :- aggregate(E,median).\n\n% @constraint Min as aggregate op.\nsoft(aggregate_min,E) :- aggregate(E,min).\n\n% @constraint Max as aggregate op.\nsoft(aggregate_max,E) :- aggregate(E,max).\n\n% @constraint Standard Deviation as aggregate op.\nsoft(aggregate_stdev,E) :- aggregate(E,stdev).\n\n% === Stack ===\n\n% @constraint Zero base for stack op.\nsoft(stack_zero) :- stack(zero).\n\n% @constraint Normalize between groupbys as stack op.\nsoft(stack_normalize) :- stack(normalize).\n\n% === Task - marktype correlations ===\n\n% @constraint Point mark for value tasks.\nsoft(value_point) :- task(value), mark(point).\n\n% @constraint Bar mark for value tasks.\nsoft(value_bar) :- task(value), mark(bar).\n\n% @constraint Line mark for value tasks.\nsoft(value_line) :- task(value), mark(line).\n\n% @constraint Area mark for value tasks.\nsoft(value_area) :- task(value), mark(area).\n\n% @constraint Text mark for value tasks.\nsoft(value_text) :- task(value), mark(text).\n\n% @constraint Tick mark for value tasks.\nsoft(value_tick) :- task(value), mark(tick).\n% @end\n\n% @constraint Rect mark for value tasks.\nsoft(value_rect) :- task(value), mark(rect).\n\n% @constraint Point mark for summary tasks.\nsoft(summary_point) :- task(summary), mark(point).\n\n% @constraint Bar mark for summary tasks.\nsoft(summary_bar) :- task(summary), mark(bar).\n\n% @constraint Line mark for summary tasks.\nsoft(summary_line) :- task(summary), mark(line).\n\n% @constraint Area mark for summary tasks.\nsoft(summary_area) :- task(summary), mark(area).\n\n% @constraint Text mark for summary tasks.\nsoft(summary_text) :- task(summary), mark(text).\n\n% @constraint Tick mark for summary tasks.\nsoft(summary_tick) :- task(summary), mark(tick).\n\n% @constraint Rect mark for summary tasks.\nsoft(summary_rect) :- task(summary), mark(rect).\n\n% === Task - channel correlations ===\n\n% @constraint Continuous x for value tasks.\nsoft(value_continuous_x,E) :- task(value), channel(E,x), continuous(E), enc_interesting(E).\n\n% @constraint Continuous y for value tasks.\nsoft(value_continuous_y,E) :- task(value), channel(E,y), continuous(E), enc_interesting(E).\n\n% @constraint Continuous color for value tasks.\nsoft(value_continuous_color,E) :- task(value), channel(E,color), continuous(E), enc_interesting(E).\n\n% @constraint Continuous size for value tasks.\nsoft(value_continuous_size,E) :- task(value), channel(E,size), continuous(E), enc_interesting(E).\n\n% @constraint Continuous text for value tasks.\nsoft(value_continuous_text,E) :- task(value), channel(E,text), continuous(E), enc_interesting(E).\n\n% @constraint Discrete x for value tasks.\nsoft(value_discrete_x,E) :- task(value), channel(E,x), discrete(E), enc_interesting(E).\n\n% @constraint Discrete y for value tasks.\nsoft(value_discrete_y,E) :- task(value), channel(E,y), discrete(E), enc_interesting(E).\n\n% @constraint Discrete color for value tasks.\nsoft(value_discrete_color,E) :- task(value), channel(E,color), discrete(E), enc_interesting(E).\n\n% @constraint Discrete shape for value tasks.\nsoft(value_discrete_shape,E) :- task(value), channel(E,shape), discrete(E), enc_interesting(E).\n\n% @constraint Discrete size for value tasks.\nsoft(value_discrete_size,E) :- task(value), channel(E,size), discrete(E), enc_interesting(E).\n\n% @constraint Discrete text for value tasks.\nsoft(value_discrete_text,E) :- task(value), channel(E,text), discrete(E), enc_interesting(E).\n\n% @constraint Discrete row for value tasks.\nsoft(value_discrete_row,E) :- task(value), channel(E,row), discrete(E), enc_interesting(E).\n\n% @constraint Discrete column for value tasks.\nsoft(value_discrete_column,E) :- task(value), channel(E,column), discrete(E), enc_interesting(E).\n\n% @constraint Continuous x for summary tasks.\nsoft(summary_continuous_x,E) :- task(summary), channel(E,x), continuous(E), enc_interesting(E).\n\n% @constraint Continuous y for summary tasks.\nsoft(summary_continuous_y,E) :- task(summary), channel(E,y), continuous(E), enc_interesting(E).\n\n% @constraint Continuous color for summary tasks.\nsoft(summary_continuous_color,E) :- task(summary), channel(E,color), continuous(E), enc_interesting(E).\n\n% @constraint Continuous size for summary tasks.\nsoft(summary_continuous_size,E) :- task(summary), channel(E,size), continuous(E), enc_interesting(E).\n\n% @constraint Continuous text for summary tasks.\nsoft(summary_continuous_text,E) :- task(summary), channel(E,text), continuous(E), enc_interesting(E).\n\n% @constraint Discrete x for summary tasks.\nsoft(summary_discrete_x,E) :- task(summary), channel(E,x), discrete(E), enc_interesting(E).\n\n% @constraint Discrete y for summary tasks.\nsoft(summary_discrete_y,E) :- task(summary), channel(E,y), discrete(E), enc_interesting(E).\n\n% @constraint Discrete color for summary tasks.\nsoft(summary_discrete_color,E) :- task(summary), channel(E,color), discrete(E), enc_interesting(E).\n\n% @constraint Discrete shape for summary tasks.\nsoft(summary_discrete_shape,E) :- task(summary), channel(E,shape), discrete(E), enc_interesting(E).\n\n% @constraint Discrete size for summary tasks.\nsoft(summary_discrete_size,E) :- task(summary), channel(E,size), discrete(E), enc_interesting(E).\n\n% @constraint Discrete text for summary tasks.\nsoft(summary_discrete_text,E) :- task(summary), channel(E,text), discrete(E), enc_interesting(E).\n\n% @constraint Discrete row for summary tasks.\nsoft(summary_discrete_row,E) :- task(summary), channel(E,row), discrete(E), enc_interesting(E).\n\n% @constraint Discrete column for summary tasks.\nsoft(summary_discrete_column,E) :- task(summary), channel(E,column), discrete(E), enc_interesting(E).\n\n",i="% Weights as constants\n\n#const type_q_weight = 0.\n#const type_o_weight = 1.\n#const type_n_weight = 2.\n#const aggregate_weight = 1.\n#const bin_weight = 2.\n#const bin_high_weight = 10.\n#const bin_low_weight = 6.\n#const encoding_weight = 0.\n#const encoding_field_weight = 6.\n#const same_field_2_weight = 8.\n#const same_field_gte3_weight = 16.\n#const count_twice_weight = 50.\n#const shape_cardinality_weight = 5.\n#const number_nominal_weight = 10.\n#const string_non_nominal_weight = 2.\n#const bin_cardinality_weight = 5.\n#const quant_bin_weight = 1.\n#const agg_dim_weight = 2.\n#const only_discrete_weight = 30.\n#const multiple_non_pos_weight = 3.\n#const non_positional_pref_weight = 10.\n#const aggregate_group_by_raw_weight = 3.\n#const x_y_raw_weight = 1.\n#const log_weight = 1.\n#const zero_weight = 1.\n#const zero_size_weight = 3.\n#const zero_positional_weight = 1.\n#const zero_skew_weight = 5.\n#const includes_zero_weight = 10.\n\n#const only_x_weight = 1.\n#const orientation_binned_weight = 1.\n#const high_cardinality_ordinal_weight = 10.\n#const high_cardinality_nominal_weight = 10.\n#const high_cardinality_nominal_color_weight = 10.\n#const horizontal_scrolling_weight = 20.\n#const temporal_date_weight = 1.\n#const quantitative_numbers_weight = 2.\n#const position_entropy_weight = 2.\n#const high_cardinality_size_weight = 1.\n#const value_agg_weight = 1.\n#const facet_summary_weight = 0.\n#const x_row_weight = 1.\n#const y_row_weight = 1.\n#const x_column_weight = 1.\n#const y_column_weight = 1.\n#const color_entropy_high_weight = 0.\n#const color_entropy_low_weight = 0.\n#const size_entropy_high_weight = 0.\n#const size_entropy_low_weight = 0.\n\n#const c_d_column_weight = 5.\n#const temporal_y_weight = 1.\n#const d_d_overlap_weight = 20.\n\n#const c_c_point_weight = 0.\n#const c_c_line_weight = 20.\n#const c_c_area_weight = 20.\n#const c_c_text_weight = 2.\n#const c_c_tick_weight = 5.\n\n#const c_d_point_weight = 10.\n#const c_d_bar_weight = 20.\n#const c_d_line_weight = 20.\n#const c_d_area_weight = 20.\n#const c_d_text_weight = 50.\n#const c_d_tick_weight = 0.\n\n#const c_d_no_overlap_point_weight = 20.\n#const c_d_no_overlap_bar_weight = 0.\n#const c_d_no_overlap_line_weight = 20.\n#const c_d_no_overlap_area_weight = 20.\n#const c_d_no_overlap_text_weight = 30.\n#const c_d_no_overlap_tick_weight = 25.\n\n#const d_d_point_weight = 0.\n#const d_d_text_weight = 1.\n#const d_d_rect_weight = 0.\n\n#const continuous_x_weight = 0.\n#const continuous_y_weight = 0.\n#const continuous_color_weight = 10.\n#const continuous_size_weight = 1.\n#const continuous_text_weight = 20.\n\n#const ordered_x_weight = 1.\n#const ordered_y_weight = 0.\n#const ordered_color_weight = 8.\n#const ordered_size_weight = 10.\n#const ordered_text_weight = 32.\n#const ordered_row_weight = 10.\n#const ordered_column_weight = 10.\n\n#const nominal_x_weight = 3.\n#const nominal_y_weight = 0.\n#const nominal_color_weight = 10.\n#const nominal_shape_weight = 11.\n#const nominal_text_weight = 12.\n#const nominal_row_weight = 7.\n#const nominal_column_weight = 10.\n#const nominal_detail_weight = 20.\n\n#const interesting_x_weight = 0.\n#const interesting_y_weight = 1.\n#const interesting_color_weight = 2.\n#const interesting_size_weight = 2.\n#const interesting_shape_weight = 3.\n#const interesting_text_weight = 6.\n#const interesting_row_weight = 6.\n#const interesting_column_weight = 7.\n#const interesting_detail_weight = 20.\n\n#const aggregate_count_weight = 0.\n#const aggregate_sum_weight = 2.\n#const aggregate_mean_weight = 1.\n#const aggregate_median_weight = 3.\n#const aggregate_min_weight = 4.\n#const aggregate_max_weight = 4.\n#const aggregate_stdev_weight = 5.\n\n#const value_point_weight = 0.\n#const value_bar_weight = 0.\n#const value_line_weight = 0.\n#const value_area_weight = 0.\n#const value_text_weight = 0.\n#const value_tick_weight = 0.\n#const value_rect_weight = 0.\n#const summary_point_weight = 0.\n#const summary_bar_weight = 0.\n#const summary_line_weight = 0.\n#const summary_area_weight = 0.\n#const summary_text_weight = 0.\n#const summary_tick_weight = 0.\n#const summary_rect_weight = 0.\n\n#const value_continuous_x_weight = 0.\n#const value_continuous_y_weight = 0.\n#const value_continuous_color_weight = 0.\n#const value_continuous_size_weight = 0.\n#const value_continuous_text_weight = 0.\n#const value_discrete_x_weight = 0.\n#const value_discrete_y_weight = 0.\n#const value_discrete_color_weight = 0.\n#const value_discrete_shape_weight = 0.\n#const value_discrete_size_weight = 0.\n#const value_discrete_text_weight = 0.\n#const value_discrete_row_weight = 0.\n#const value_discrete_column_weight = 0.\n#const summary_continuous_x_weight = 0.\n#const summary_continuous_y_weight = 0.\n#const summary_continuous_color_weight = 0.\n#const summary_continuous_size_weight = 0.\n#const summary_continuous_text_weight = 0.\n#const summary_discrete_x_weight = 0.\n#const summary_discrete_y_weight = 0.\n#const summary_discrete_color_weight = 0.\n#const summary_discrete_shape_weight = 0.\n#const summary_discrete_size_weight = 0.\n#const summary_discrete_text_weight = 0.\n#const summary_discrete_row_weight = 0.\n#const summary_discrete_column_weight = 0.\n\n#const stack_zero_weight = 0.\n#const stack_normalize_weight = 1.\n\n";var a=Object.freeze({TOPK_LUA:'#script(lua)\n\nfunction main(prg)\n    local count = tonumber(prg.configuration.solve.models)\n    local backend = prg:backend()\n\n    local observer = {\n        minimize_literals = {}\n    }\n    function observer:minimize (priority, literals)\n        self.minimize_literals = literals\n    end\n\n    prg:register_observer(observer)\n\n    prg:ground({{"base", {}}}, self)\n\n    while count > 0 do\n        local cost = 0\n\n        prg.configuration.solve.models = count\n        local it = prg:solve{yield=true}\n        local ret, err = pcall(function()\n            if it:get().unsatisfiable then\n                count = 0\n                return\n            end\n\n            for m in it:iter() do\n                if m.optimality_proven then\n                    cost = m.cost[1]\n                    count = count-1\n                end\n            end\n        end)\n        it:close()\n        if not ret then\n            error(err)\n        end\n\n        if count > 0 then\n            local aux = backend:add_atom()\n            backend:add_weight_rule{{aux}, cost+1, observer.minimize_literals}\n            backend:add_rule{{aux}, {-aux}}\n        end\n    end\nend\n#end.\n\n',DEFINE:"% ====== Definitions ======\n\n% Types of marks to encode data.\nmarktype(point;bar;line;area;text;tick;rect).\n% High level data types: quantitative, ordinal, nominal, temporal.\ntype(quantitative;ordinal;nominal;temporal).\n% Basic types of the data.\nprimitive_type(string;number;boolean;datetime).\n% Supported aggregation functions.\naggregate_op(count;mean;median;min;max;stdev;sum).\nsummative_aggregate_op(count;sum).\n% Numbers of bins that can be recommended; any natural number is allowed.\nbinning(10;25;200).\n\n% Encoding channels.\nsingle_channel(x;y;color;size;shape;text;row;column).\nmulti_channel(detail).\nchannel(C) :- single_channel(C).\nchannel(C) :- multi_channel(C).\nnon_positional(color;size;shape;text;detail).\n\n% Possible tasks.\ntasks(value;summary).\n\n% Possible stackings.\nstacking(zero;normalize).\n\n% ====== Helpers ======\n\ndiscrete(E) :- type(E,(nominal;ordinal)).\ndiscrete(E) :- bin(E,_).\ncontinuous(E) :- encoding(E), not discrete(E).\n\nchannel_discrete(C) :- discrete(E), channel(E,C).\nchannel_continuous(C) :- continuous(E), channel(E,C).\n\nordered(E) :- type(E,(ordinal;quantitative)).\n\n% Fields\nfield(F) :- fieldtype(F,_).\n\n% Stacking is applied to the continuous x or y.\nstack(EC,S) :- channel(EC,(x;y)), channel(ED,(x;y)), continuous(EC), discrete(ED), stack(S).\n% X and y are continuous.\nstack(E,S) :- channel_continuous(x), channel(E,y), continuous(E), stack(S).\n\nstack(S) :- stack(_,S).\n\n% Data properties\nenc_cardinality(E,C) :- field(E,F), cardinality(F,C).\nenc_entropy(E,EN) :- field(E,F), entropy(F,EN).\nenc_interesting(E) :- field(E,F), interesting(F).\nenc_extent(E,MIN,MAX) :- field(E,F), extent(F,MIN,MAX).\n\n% Cardinality of discrete field. A binned field has the cadinality of its field.\ndiscrete_cardinality(E,CE) :- discrete(E), enc_cardinality(E,CE), channel(E,C), not bin(E,_).\ndiscrete_cardinality(E,CB) :- channel(E,C), bin(E,CB).\n\n% Define a fake soft/2 for all soft/1.\nsoft(F,_placeholder) :- soft(F).\n\n% Silence warnings about properties never appearing in head.\nentropy(0,0) :- #false.\ninteresting(0) :- #false.\nextent(0,0,0) :- #false.\nsoft(0) :- #false.\ntask(value) :- #false.\ntask(summary) :- #false.\ndata(0) :- #false.\n\n% == Chart Types ==\n\n% Continuous by continuous.\nis_c_c :- channel_continuous(x), channel_continuous(y).\n\n% Continuous by discrete (or continuous only).\nis_c_d :- channel_continuous(x), not channel_continuous(y).\nis_c_d :- channel_continuous(y), not channel_continuous(x).\n\n% Discrete by discrete.\nis_d_d :- channel_discrete(x), channel_discrete(y).\n\n% == Overlap ==\n\n% The continuous variable is a measure (it is aggregated) and all other channels are .aggregated, or we use stack -> no overlap\nnon_pos_unaggregated :- channel(E,C), non_positional(C), not aggregate(E,_).\nno_overlap :- is_c_d, continuous(E), channel(E,(x;y)), aggregate(E,_), not non_pos_unaggregated.\nno_overlap :- is_c_d, stack(_).\n\n% the size of the discrete positional encoding\ndiscrete_size(S) :- is_c_d, x_y_cardinality(_,S).\ndiscrete_size(1) :- is_c_d, channel_continuous(x), not channel(_,y).\ndiscrete_size(1) :- is_c_d, channel_continuous(y), not channel(_,x).\n\n% Data size is as small as discrete dimension -> no overlap.\nno_overlap :- is_c_d, num_rows(S), discrete_size(S).\n\n% We definitely overlap if the data size > discrete size.\noverlap :- is_c_d, not no_overlap, num_rows(S1), discrete_size(S2), S1 > S2.\n\n% helpers to go from quadratic to linear number of grounding\nx_y_cardinality(x,S) :- channel(E,x), discrete_cardinality(E,S).\nx_y_cardinality(y,S) :- channel(E,y), discrete_cardinality(E,S).\n\n% No overlap if all other dimensions are aggregated.\ndiscrete_size(S) :- is_d_d, x_y_cardinality(x,SX), x_y_cardinality(y,SY), S = SX*SY.\nno_overlap :- is_d_d, not non_pos_unaggregated.\nno_overlap :- is_d_d, num_rows(S1), discrete_size(S2), S1 <= S2.  % This cannot guarantee no overlap.\n\n% We can guarantee overlap using this rule unless we are using row / column.\nrow_col :- channel(_,(row;column)).\noverlap :- is_d_d, channel(E,C), not row_col, not no_overlap, num_rows(S1), discrete_size(S2), S1 > S2.\n\n% == Orientation ==\n\n% Orientation tells us which one is the dependent and independent variable.\n\norientation(vertical) :- mark(bar;tick;area;line), channel_discrete(x).\norientation(vertical) :- mark(area;line), channel_continuous(x), channel_continuous(y).\n\norientation(horizontal) :- mark(bar;tick;area;line), channel_discrete(y).\n\n",GENERATE:"% ====== Generators ======\n\n% encodings\n\n% maximum number for each multi channel encoding\n#const max_extra_encs = 5.\n\nobj_id(1..max_extra_encs).\n\n{ encoding(E): obj_id(E) }.\n\n:- not encoding(ID), encoding(ID-1), obj_id(ID), obj_id(ID-1).\n\n% properties of encodings\n\n% channel and type have to be present\n{ channel(E,C): channel(C) } = 1 :- encoding(E).\n{ type(E,T): type(T) } = 1 :- encoding(E).\n\n% other properties that are not required\n0 { field(E,F): field(F) } 1 :- encoding(E).\n0 { aggregate(E,A): aggregate_op(A) } 1 :- encoding(E).\n0 { bin(E,B): binning(B) } 1 :- encoding(E).\n0 { zero(E) } 1 :- encoding(E).\n0 { log(E) } 1 :- encoding(E).\n\n% pick one mark type\n\n{ mark(M) : marktype(M) } = 1.\n\n% stacking\n\n0 { stack(S): stacking(S) } 1.\n\n",HARD:r,HARD_INTEGRITY:":- hard(_).\n:- hard(_,_).\n:- hard(_,_,_).\n\n",SOFT:o,WEIGHTS:i,ASSIGN_WEIGHTS:"%% GENERATED FILE. DO NOT EDIT.\n\nsoft_weight(type_q,type_q_weight).\nsoft_weight(type_o,type_o_weight).\nsoft_weight(type_n,type_n_weight).\nsoft_weight(aggregate,aggregate_weight).\nsoft_weight(bin,bin_weight).\nsoft_weight(bin_high,bin_high_weight).\nsoft_weight(bin_low,bin_low_weight).\nsoft_weight(encoding,encoding_weight).\nsoft_weight(encoding_field,encoding_field_weight).\nsoft_weight(same_field_2,same_field_2_weight).\nsoft_weight(same_field_gte3,same_field_gte3_weight).\nsoft_weight(count_twice,count_twice_weight).\nsoft_weight(shape_cardinality,shape_cardinality_weight).\nsoft_weight(number_nominal,number_nominal_weight).\nsoft_weight(string_non_nominal,string_non_nominal_weight).\nsoft_weight(bin_cardinality,bin_cardinality_weight).\nsoft_weight(quant_bin,quant_bin_weight).\nsoft_weight(agg_dim,agg_dim_weight).\nsoft_weight(only_discrete,only_discrete_weight).\nsoft_weight(multiple_non_pos,multiple_non_pos_weight).\nsoft_weight(non_positional_pref,non_positional_pref_weight).\nsoft_weight(aggregate_group_by_raw,aggregate_group_by_raw_weight).\nsoft_weight(x_y_raw,x_y_raw_weight).\nsoft_weight(log,log_weight).\nsoft_weight(zero,zero_weight).\nsoft_weight(zero_size,zero_size_weight).\nsoft_weight(zero_positional,zero_positional_weight).\nsoft_weight(zero_skew,zero_skew_weight).\nsoft_weight(includes_zero,includes_zero_weight).\nsoft_weight(only_x,only_x_weight).\nsoft_weight(orientation_binned,orientation_binned_weight).\nsoft_weight(high_cardinality_ordinal,high_cardinality_ordinal_weight).\nsoft_weight(high_cardinality_nominal,high_cardinality_nominal_weight).\nsoft_weight(high_cardinality_nominal_color,high_cardinality_nominal_color_weight).\nsoft_weight(horizontal_scrolling,horizontal_scrolling_weight).\nsoft_weight(temporal_date,temporal_date_weight).\nsoft_weight(quantitative_numbers,quantitative_numbers_weight).\nsoft_weight(position_entropy,position_entropy_weight).\nsoft_weight(high_cardinality_size,high_cardinality_size_weight).\nsoft_weight(value_agg,value_agg_weight).\nsoft_weight(facet_summary,facet_summary_weight).\nsoft_weight(x_row,x_row_weight).\nsoft_weight(y_row,y_row_weight).\nsoft_weight(x_column,x_column_weight).\nsoft_weight(y_column,y_column_weight).\nsoft_weight(color_entropy_high,color_entropy_high_weight).\nsoft_weight(color_entropy_low,color_entropy_low_weight).\nsoft_weight(size_entropy_high,size_entropy_high_weight).\nsoft_weight(size_entropy_low,size_entropy_low_weight).\nsoft_weight(c_d_column,c_d_column_weight).\nsoft_weight(temporal_y,temporal_y_weight).\nsoft_weight(d_d_overlap,d_d_overlap_weight).\nsoft_weight(c_c_point,c_c_point_weight).\nsoft_weight(c_c_line,c_c_line_weight).\nsoft_weight(c_c_area,c_c_area_weight).\nsoft_weight(c_c_text,c_c_text_weight).\nsoft_weight(c_c_tick,c_c_tick_weight).\nsoft_weight(c_d_point,c_d_point_weight).\nsoft_weight(c_d_bar,c_d_bar_weight).\nsoft_weight(c_d_line,c_d_line_weight).\nsoft_weight(c_d_area,c_d_area_weight).\nsoft_weight(c_d_text,c_d_text_weight).\nsoft_weight(c_d_tick,c_d_tick_weight).\nsoft_weight(c_d_no_overlap_point,c_d_no_overlap_point_weight).\nsoft_weight(c_d_no_overlap_bar,c_d_no_overlap_bar_weight).\nsoft_weight(c_d_no_overlap_line,c_d_no_overlap_line_weight).\nsoft_weight(c_d_no_overlap_area,c_d_no_overlap_area_weight).\nsoft_weight(c_d_no_overlap_text,c_d_no_overlap_text_weight).\nsoft_weight(c_d_no_overlap_tick,c_d_no_overlap_tick_weight).\nsoft_weight(d_d_point,d_d_point_weight).\nsoft_weight(d_d_text,d_d_text_weight).\nsoft_weight(d_d_rect,d_d_rect_weight).\nsoft_weight(continuous_x,continuous_x_weight).\nsoft_weight(continuous_y,continuous_y_weight).\nsoft_weight(continuous_color,continuous_color_weight).\nsoft_weight(continuous_size,continuous_size_weight).\nsoft_weight(continuous_text,continuous_text_weight).\nsoft_weight(ordered_x,ordered_x_weight).\nsoft_weight(ordered_y,ordered_y_weight).\nsoft_weight(ordered_color,ordered_color_weight).\nsoft_weight(ordered_size,ordered_size_weight).\nsoft_weight(ordered_text,ordered_text_weight).\nsoft_weight(ordered_row,ordered_row_weight).\nsoft_weight(ordered_column,ordered_column_weight).\nsoft_weight(nominal_x,nominal_x_weight).\nsoft_weight(nominal_y,nominal_y_weight).\nsoft_weight(nominal_color,nominal_color_weight).\nsoft_weight(nominal_shape,nominal_shape_weight).\nsoft_weight(nominal_text,nominal_text_weight).\nsoft_weight(nominal_row,nominal_row_weight).\nsoft_weight(nominal_column,nominal_column_weight).\nsoft_weight(nominal_detail,nominal_detail_weight).\nsoft_weight(interesting_x,interesting_x_weight).\nsoft_weight(interesting_y,interesting_y_weight).\nsoft_weight(interesting_color,interesting_color_weight).\nsoft_weight(interesting_size,interesting_size_weight).\nsoft_weight(interesting_shape,interesting_shape_weight).\nsoft_weight(interesting_text,interesting_text_weight).\nsoft_weight(interesting_row,interesting_row_weight).\nsoft_weight(interesting_column,interesting_column_weight).\nsoft_weight(interesting_detail,interesting_detail_weight).\nsoft_weight(aggregate_count,aggregate_count_weight).\nsoft_weight(aggregate_sum,aggregate_sum_weight).\nsoft_weight(aggregate_mean,aggregate_mean_weight).\nsoft_weight(aggregate_median,aggregate_median_weight).\nsoft_weight(aggregate_min,aggregate_min_weight).\nsoft_weight(aggregate_max,aggregate_max_weight).\nsoft_weight(aggregate_stdev,aggregate_stdev_weight).\nsoft_weight(value_point,value_point_weight).\nsoft_weight(value_bar,value_bar_weight).\nsoft_weight(value_line,value_line_weight).\nsoft_weight(value_area,value_area_weight).\nsoft_weight(value_text,value_text_weight).\nsoft_weight(value_tick,value_tick_weight).\nsoft_weight(value_rect,value_rect_weight).\nsoft_weight(summary_point,summary_point_weight).\nsoft_weight(summary_bar,summary_bar_weight).\nsoft_weight(summary_line,summary_line_weight).\nsoft_weight(summary_area,summary_area_weight).\nsoft_weight(summary_text,summary_text_weight).\nsoft_weight(summary_tick,summary_tick_weight).\nsoft_weight(summary_rect,summary_rect_weight).\nsoft_weight(value_continuous_x,value_continuous_x_weight).\nsoft_weight(value_continuous_y,value_continuous_y_weight).\nsoft_weight(value_continuous_color,value_continuous_color_weight).\nsoft_weight(value_continuous_size,value_continuous_size_weight).\nsoft_weight(value_continuous_text,value_continuous_text_weight).\nsoft_weight(value_discrete_x,value_discrete_x_weight).\nsoft_weight(value_discrete_y,value_discrete_y_weight).\nsoft_weight(value_discrete_color,value_discrete_color_weight).\nsoft_weight(value_discrete_shape,value_discrete_shape_weight).\nsoft_weight(value_discrete_size,value_discrete_size_weight).\nsoft_weight(value_discrete_text,value_discrete_text_weight).\nsoft_weight(value_discrete_row,value_discrete_row_weight).\nsoft_weight(value_discrete_column,value_discrete_column_weight).\nsoft_weight(summary_continuous_x,summary_continuous_x_weight).\nsoft_weight(summary_continuous_y,summary_continuous_y_weight).\nsoft_weight(summary_continuous_color,summary_continuous_color_weight).\nsoft_weight(summary_continuous_size,summary_continuous_size_weight).\nsoft_weight(summary_continuous_text,summary_continuous_text_weight).\nsoft_weight(summary_discrete_x,summary_discrete_x_weight).\nsoft_weight(summary_discrete_y,summary_discrete_y_weight).\nsoft_weight(summary_discrete_color,summary_discrete_color_weight).\nsoft_weight(summary_discrete_shape,summary_discrete_shape_weight).\nsoft_weight(summary_discrete_size,summary_discrete_size_weight).\nsoft_weight(summary_discrete_text,summary_discrete_text_weight).\nsoft_weight(summary_discrete_row,summary_discrete_row_weight).\nsoft_weight(summary_discrete_column,summary_discrete_column_weight).\nsoft_weight(stack_zero,stack_zero_weight).\nsoft_weight(stack_normalize,stack_normalize_weight).\n\n",OPTIMIZE:"% Minimize the feature weight\n\n#minimize { W,F,Q: soft_weight(F,W), soft(F,Q); #inf,F,Q: soft(F,Q), not soft_weight(F,_); #inf,F: hard(F); #inf,F,Q: hard(F,Q); #inf,F,Q1,Q2: hard(F,Q1,Q2) }.\n\n",OUTPUT:"% ====== Output ======\n\n#show data/1.\n\n#show mark/1.\n\n#show type/2.\n#show channel/2.\n#show field/2.\n#show aggregate/2.\n#show bin/2.\n#show stack/2.\n\n#show log/1.\n#show zero/1.\n\n#show soft/2.\n\n"});function s(n,t){const e=n.match(u);if(!e)throw Error("invalid constraints");const r=e.map(n=>({...function(n){const t=n.match(c);if(t){const n=t[0],e=l.exec(n);if(e)return{description:e[1]}}return null}(n),...function(n){const t=n.match(f);if(t){const n=t.join("\n"),e=d.exec(n);if(!e)throw Error("invalid asp: "+n);const r=e[1],o=h.exec(n);if(!o)throw Error("invalid asp: "+n);const i=o[1];return{type:r,name:i,asp:n}}return null}(n)}));if(t){const n=t.match(m),e=function(n){const t={};for(const e of n){const n=_.exec(e);if(!n)throw Error("invalid weight: "+e);const r=n[1],o=g.exec(e);if(!o)throw Error("invalid weight: "+e);const i=+o[1];t[r]=i}return t}(n);if(!n)throw Error("invalid weights");for(const n of r){const t=n.name;n.weight=e[t]}}return r}const u=/%\s*@constraint(?:(.+)\n)+/g,c=/(%.*\n)+/g,l=/@constraint\s+(.*)/,f=/^[^%].*/gm,d=/(\w+)\(/,h=/\((\w+),?.*?\)/,m=/#const.*/g,_=/#const\s+(\w+?)_weight/,g=/=\s*(\d+)/;function p(n){return"?"!==n?n:null}function y(n,t){return n(t={exports:{}},t.exports),t.exports}"undefined"!=typeof window?window:void 0!==xn||"undefined"!=typeof self&&self;var v=y((function(n){var t=n.exports;t.namedfunc=function(n,t){return t.__name__=n,t},t.name=function(n){return null==n?null:n.__name__},t.identity=function(n){return n},t.true=t.namedfunc("true",(function(){return!0})),t.false=t.namedfunc("false",(function(){return!1})),t.duplicate=function(n){return JSON.parse(JSON.stringify(n))},t.equal=function(n,t){return JSON.stringify(n)===JSON.stringify(t)},t.extend=function(n){for(var t,e,r=1,o=arguments.length;r<o;++r)for(e in t=arguments[r])n[e]=t[e];return n},t.length=function(n){return null!=n&&null!=n.length?n.length:null},t.keys=function(n){var t,e=[];for(t in n)e.push(t);return e},t.vals=function(n){var t,e=[];for(t in n)e.push(n[t]);return e},t.toMap=function(n,e){return(e=t.$(e))?n.reduce((function(n,t){return n[e(t)]=1,n}),{}):n.reduce((function(n,t){return n[t]=1,n}),{})},t.keystr=function(n){var t=n.length;if(!t)return"";for(var e=String(n[0]),r=1;r<t;++r)e+="|"+String(n[r]);return e};var e=Object.prototype.toString;t.isObject=function(n){return n===Object(n)},t.isFunction=function(n){return"[object Function]"===e.call(n)},t.isString=function(n){return"string"==typeof value||"[object String]"===e.call(n)},t.isArray=Array.isArray||function(n){return"[object Array]"===e.call(n)},t.isNumber=function(n){return"number"==typeof n||"[object Number]"===e.call(n)},t.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"==e.call(n)},t.isDate=function(n){return"[object Date]"===e.call(n)},t.isValid=function(n){return null!=n&&n==n},t.isBuffer="function"==typeof Buffer&&Buffer.isBuffer||t.false,t.number=function(n){return null==n||""===n?null:+n},t.boolean=function(n){return null==n||""===n?null:"false"!==n&&!!n},t.date=function(n,t){var e=t||Date;return null==n||""===n?null:e.parse(n)},t.array=function(n){return null!=n?t.isArray(n)?n:[n]:[]},t.str=function(n){return t.isArray(n)?"["+n.map(t.str)+"]":t.isObject(n)||t.isString(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n};var r=/\[(.*?)\]|[^.\[]+/g;function o(n,t){var e,r="";for(e=0;e<n;++e)r+=t;return r}function i(n,t,e){var r=0,o=n.split(a);return(n=e?(o=o.reverse()).filter((function(n){return(r+=n.length)<=t})).reverse():o.filter((function(n){return(r+=n.length)<=t}))).length?n.join("").trim():o[0].slice(0,t)}t.field=function(n){return String(n).match(r).map((function(n){return"["!==n[0]?n:"'"!==n[1]&&'"'!==n[1]?n.slice(1,-1):n.slice(2,-2).replace(/\\(["'])/g,"$1")}))},t.accessor=function(n){return null==n||t.isFunction(n)?n:t.namedfunc(n,Function("x","return x["+t.field(n).map(t.str).join("][")+"];"))},t.$=t.accessor,t.mutator=function(n){var e;return t.isString(n)&&(e=t.field(n)).length>1?function(n,t){for(var r=0;r<e.length-1;++r)n=n[e[r]];n[e[r]]=t}:function(t,e){t[n]=e}},t.$func=function(n,e){return function(r){r=t.$(r)||t.identity;var o=n+(t.name(r)?"_"+t.name(r):"");return t.namedfunc(o,(function(n){return e(r(n))}))}},t.$valid=t.$func("valid",t.isValid),t.$length=t.$func("length",t.length),t.$in=function(n,e){n=t.$(n);var r=t.isArray(e)?t.toMap(e):e;return function(t){return!!r[n(t)]}},t.comparator=function(n){var e=[];return void 0===n&&(n=[]),n=t.array(n).map((function(n){var r=1;return"-"===n[0]?(r=-1,n=n.slice(1)):"+"===n[0]&&(r=1,n=n.slice(1)),e.push(r),t.accessor(n)})),function(r,o){var i,a,s,u;for(i=0,a=n.length;i<a;++i)if(s=n[i],u=t.cmp(s(r),s(o)))return u*e[i];return 0}},t.cmp=function(n,t){return(n<t||null==n)&&null!=t?-1:(n>t||null==t)&&null!=n?1:(t=t instanceof Date?+t:t,(n=n instanceof Date?+n:n)!==n&&t==t?-1:t!=t&&n==n?1:0)},t.numcmp=function(n,t){return n-t},t.stablesort=function(n,t,e){var r=n.reduce((function(n,t,r){return n[e(t)]=r,n}),{});return n.sort((function(n,o){var i=t(n),a=t(o);return i<a?-1:i>a?1:r[e(n)]-r[e(o)]})),n},t.permute=function(n){for(var t,e,r=n.length;r;)e=Math.floor(Math.random()*r--),t=n[r],n[r]=n[e],n[e]=t},t.pad=function(n,t,e,r){r=r||" ";var i=t-n.length;if(i<=0)return n;switch(e){case"left":return o(i,r)+n;case"middle":case"center":return o(Math.floor(i/2),r)+n+o(Math.ceil(i/2),r);default:return n+o(i,r)}},t.truncate=function(n,t,e,r,o){var a=n.length;if(a<=t)return n;o=void 0!==o?String(o):"…";var s=Math.max(0,t-o.length);switch(e){case"left":return o+(r?i(n,s,1):n.slice(a-s));case"middle":case"center":var u=Math.ceil(s/2),c=Math.floor(s/2);return(r?i(n,u):n.slice(0,u))+o+(r?i(n,c,1):n.slice(a-c));default:return(r?i(n,s):n.slice(0,s))+o}};var a=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/})),w="__types__",E={boolean:v.boolean,integer:v.number,number:v.number,date:v.date,string:function(n){return null==n||""===n?null:n+""}},b={boolean:function(n){return"true"===n||"false"===n||v.isBoolean(n)},integer:function(n){return b.number(n)&&(n=+n)==~~n},number:function(n){return!isNaN(+n)&&!v.isDate(n)},date:function(n){return!isNaN(Date.parse(n))}};function k(n){return v.keys(n)}function M(n){return"["+n+"]"}function x(n,t){var e,r,o;if(n=v.array(n),t=v.$(t),n[w]&&(e=t(n[w]),v.isString(e)))return e;for(r=0,o=n.length;!v.isValid(e)&&r<o;++r)e=t?t(n[r]):n[r];return v.isDate(e)?"date":v.isNumber(e)?"number":v.isBoolean(e)?"boolean":v.isString(e)?"string":null}function S(n,t,e){var r,o,i;n=v.array(n),t=v.$(t);var a=["boolean","integer","number","date"];for(r=0;r<n.length;++r){for(i=t?t(n[r]):n[r],o=0;o<a.length;++o)e&&e.test(i)||!v.isValid(i)||b[a[o]](i)||(a.splice(o,1),o-=1);if(0===a.length)return"string"}return a[0]}x.annotation=function(n,t){if(!t)return n&&n[w]||null;n[w]=t},x.all=function(n,t){if(n.length){var e=t?v.identity:(t=k(n[0]),M);return t.reduce((function(t,r){return t[r]=x(n,e(r)),t}),{})}},x.infer=S,x.inferAll=function(n,t,e){var r=t?v.identity:(t=k(n[0]),M);return t.reduce((function(t,o){return t[o]=S(n,r(o),e),t}),{})},x.parsers=E;var D=x,T=y((function(n,t){!function(n){function t(n){return new r(n)}function e(n){return new Function("d","return {"+n.map((function(n,t){return JSON.stringify(n)+": d["+t+"]"})).join(",")+"}")}function r(n){var t=new RegExp('["'+n+"\n]"),r=n.charCodeAt(0);function o(t){return t.map(i).join(n)}function i(n){return t.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}this.parse=function(n,t){var r,o,i=this.parseRows(n,(function(n,i){if(r)return r(n,i-1);o=n,r=t?function(n,t){var r=e(n);return function(e,o){return t(r(e),o,n)}}(n,t):e(n)}));return i.columns=o,i},this.parseRows=function(n,t){var e,o,i={},a={},s=[],u=n.length,c=0,l=0;function f(){if(c>=u)return a;if(o)return o=!1,i;var t,e=c;if(34===n.charCodeAt(e)){for(var s=e;s++<u;)if(34===n.charCodeAt(s)){if(34!==n.charCodeAt(s+1))break;++s}return c=s+2,13===(t=n.charCodeAt(s+1))?(o=!0,10===n.charCodeAt(s+2)&&++c):10===t&&(o=!0),n.slice(e+1,s).replace(/""/g,'"')}for(;c<u;){var l=1;if(10===(t=n.charCodeAt(c++)))o=!0;else if(13===t)o=!0,10===n.charCodeAt(c)&&(++c,++l);else if(t!==r)continue;return n.slice(e,c-l)}return n.slice(e)}for(;(e=f())!==a;){for(var d=[];e!==i&&e!==a;)d.push(e),e=f();t&&null==(d=t(d,l++))||s.push(d)}return s},this.format=function(t,e){return null==e&&(e=function(n){var t=Object.create(null),e=[];return n.forEach((function(n){for(var r in n)r in t||e.push(t[r]=r)})),e}(t)),[e.map(i).join(n)].concat(t.map((function(t){return e.map((function(n){return i(t[n])})).join(n)}))).join("\n")},this.formatRows=function(n){return n.map(o).join("\n")}}t.prototype=r.prototype;var o=t(","),i=t("\t");n.version="0.1.14",n.dsv=t,n.csv=o,n.tsv=i}(t)}));function A(n,t){if(n){var e=t.header;n=(e?e.join(t.delimiter)+"\n":"")+n}return T.dsv(t.delimiter).parse(n)}A.delimiter=function(n){var t={delimiter:n};return function(n,e){return A(n,e?v.extend(e,t):t)}};var C=A,N=function(n,t){var e=v.isObject(n)&&!v.isBuffer(n)?n:JSON.parse(n);return t&&t.property&&(e=v.accessor(t.property)(e)),e};function O(n){return n}function j(n){if(null==n)return O;var t,e,r=n.scale[0],o=n.scale[1],i=n.translate[0],a=n.translate[1];return function(n,s){s||(t=e=0);var u=2,c=n.length,l=new Array(c);for(l[0]=(t+=n[0])*r+i,l[1]=(e+=n[1])*o+a;u<c;)l[u]=n[u],++u;return l}}function F(n){var t,e=j(n.transform),r=1/0,o=r,i=-r,a=-r;function s(n){(n=e(n))[0]<r&&(r=n[0]),n[0]>i&&(i=n[0]),n[1]<o&&(o=n[1]),n[1]>a&&(a=n[1])}function u(n){switch(n.type){case"GeometryCollection":n.geometries.forEach(u);break;case"Point":s(n.coordinates);break;case"MultiPoint":n.coordinates.forEach(s)}}for(t in n.arcs.forEach((function(n){for(var t,s=-1,u=n.length;++s<u;)(t=e(n[s],s))[0]<r&&(r=t[0]),t[0]>i&&(i=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])})),n.objects)u(n.objects[t]);return[r,o,i,a]}function z(n,t){var e=t.id,r=t.bbox,o=null==t.properties?{}:t.properties,i=P(n,t);return null==e&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:e,properties:o,geometry:i}:{type:"Feature",id:e,bbox:r,properties:o,geometry:i}}function P(n,t){var e=j(n.transform),r=n.arcs;function o(n,t){t.length&&t.pop();for(var o=r[n<0?~n:n],i=0,a=o.length;i<a;++i)t.push(e(o[i],i));n<0&&function(n,t){for(var e,r=n.length,o=r-t;o<--r;)e=n[o],n[o++]=n[r],n[r]=e}(t,a)}function i(n){return e(n)}function a(n){for(var t=[],e=0,r=n.length;e<r;++e)o(n[e],t);return t.length<2&&t.push(t[0]),t}function s(n){for(var t=a(n);t.length<4;)t.push(t[0]);return t}function u(n){return n.map(s)}return function n(t){var e,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(n)};case"Point":e=i(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(i);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:r,coordinates:e}}(t)}function I(n,t){var e={},r={},o={},i=[],a=-1;function s(n,t){for(var r in n){var o=n[r];delete t[o.start],delete o.start,delete o.end,o.forEach((function(n){e[n<0?~n:n]=1})),i.push(o)}}return t.forEach((function(e,r){var o,i=n.arcs[e<0?~e:e];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++a],t[a]=e,t[r]=o)})),t.forEach((function(t){var e,i,a=function(t){var e,r=n.arcs[t<0?~t:t],o=r[0];return n.transform?(e=[0,0],r.forEach((function(n){e[0]+=n[0],e[1]+=n[1]}))):e=r[r.length-1],t<0?[e,o]:[o,e]}(t),s=a[0],u=a[1];if(e=o[s])if(delete o[e.end],e.push(t),e.end=u,i=r[u]){delete r[i.start];var c=i===e?e:e.concat(i);r[c.start=e.start]=o[c.end=i.end]=c}else r[e.start]=o[e.end]=e;else if(e=r[u])if(delete r[e.start],e.unshift(t),e.start=s,i=o[s]){delete o[i.end];var l=i===e?e:i.concat(e);r[l.start=i.start]=o[l.end=e.end]=l}else r[e.start]=o[e.end]=e;else r[(e=[t]).start=s]=o[e.end=u]=e})),s(o,r),s(r,o),t.forEach((function(n){e[n<0?~n:n]||i.push([n])})),i}function L(n,t,e){var r,o,i;if(arguments.length>1)r=$(0,t,e);else for(o=0,r=new Array(i=n.arcs.length);o<i;++o)r[o]=o;return{type:"MultiLineString",arcs:I(n,r)}}function $(n,t,e){var r,o=[],i=[];function a(n){var t=n<0?~n:n;(i[t]||(i[t]=[])).push({i:n,g:r})}function s(n){n.forEach(a)}function u(n){n.forEach(s)}return function n(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(n){n.forEach(u)}(t.arcs)}}(t),i.forEach(null==e?function(n){o.push(n[0].i)}:function(n){e(n[0].g,n[n.length-1].g)&&o.push(n[0].i)}),o}function B(n,t){var e={},r=[],o=[];function i(n){n.forEach((function(t){t.forEach((function(t){(e[t=t<0?~t:t]||(e[t]=[])).push(n)}))})),r.push(n)}function a(t){return function(n){for(var t,e=-1,r=n.length,o=n[r-1],i=0;++e<r;)t=o,o=n[e],i+=t[0]*o[1]-t[1]*o[0];return Math.abs(i)}(P(n,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach((function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}})),r.forEach((function(n){if(!n._){var t=[],r=[n];for(n._=1,o.push(t);n=r.pop();)t.push(n),n.forEach((function(n){n.forEach((function(n){e[n<0?~n:n].forEach((function(n){n._||(n._=1,r.push(n))}))}))}))}})),r.forEach((function(n){delete n._})),{type:"MultiPolygon",arcs:o.map((function(t){var r,o=[];if(t.forEach((function(n){n.forEach((function(n){n.forEach((function(n){e[n<0?~n:n].length<2&&o.push(n)}))}))})),(r=(o=I(n,o)).length)>1)for(var i,s,u=1,c=a(o[0]);u<r;++u)(i=a(o[u]))>c&&(s=o[0],o[0]=o[u],o[u]=s,c=i);return o}))}}function R(n,t){for(var e=0,r=n.length;e<r;){var o=e+r>>>1;n[o]<t?e=o+1:r=o}return e}function Y(n){if(null==n)return O;var t,e,r=n.scale[0],o=n.scale[1],i=n.translate[0],a=n.translate[1];return function(n,s){s||(t=e=0);var u=2,c=n.length,l=new Array(c),f=Math.round((n[0]-i)/r),d=Math.round((n[1]-a)/o);for(l[0]=f-t,t=f,l[1]=d-e,e=d;u<c;)l[u]=n[u],++u;return l}}var U=Object.freeze({bbox:F,feature:function(n,t){return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return z(n,t)}))}:z(n,t)},mesh:function(n){return P(n,L.apply(this,arguments))},meshArcs:L,merge:function(n){return P(n,B.apply(this,arguments))},mergeArcs:B,neighbors:function(n){var t={},e=n.map((function(){return[]}));function r(n,e){n.forEach((function(n){n<0&&(n=~n);var r=t[n];r?r.push(e):t[n]=[e]}))}function o(n,t){n.forEach((function(n){r(n,t)}))}var i={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(n,t){n.forEach((function(n){o(n,t)}))}};for(var a in n.forEach((function n(t,e){"GeometryCollection"===t.type?t.geometries.forEach((function(t){n(t,e)})):t.type in i&&i[t.type](t.arcs,e)})),t)for(var s=t[a],u=s.length,c=0;c<u;++c)for(var l=c+1;l<u;++l){var f,d=s[c],h=s[l];(f=e[d])[a=R(f,h)]!==h&&f.splice(a,0,h),(f=e[h])[a=R(f,d)]!==d&&f.splice(a,0,d)}return e},quantize:function(n,t){if(n.transform)throw new Error("already quantized");if(t&&t.scale)s=n.bbox;else{if(!((e=Math.floor(t))>=2))throw new Error("n must be ≥2");var e,r=(s=n.bbox||F(n))[0],o=s[1],i=s[2],a=s[3];t={scale:[i-r?(i-r)/(e-1):1,a-o?(a-o)/(e-1):1],translate:[r,o]}}var s,u,c=Y(t),l=n.objects,f={};function d(n){return c(n)}function h(n){var t;switch(n.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:n.geometries.map(h)};break;case"Point":t={type:"Point",coordinates:d(n.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:n.coordinates.map(d)};break;default:return n}return null!=n.id&&(t.id=n.id),null!=n.bbox&&(t.bbox=n.bbox),null!=n.properties&&(t.properties=n.properties),t}for(u in l)f[u]=h(l[u]);return{type:"Topology",bbox:s,transform:t,objects:f,arcs:n.arcs.map((function(n){var t,e=0,r=1,o=n.length,i=new Array(o);for(i[0]=c(n[0],0);++e<o;)((t=c(n[e],e))[0]||t[1])&&(i[r++]=t);return 1===r&&(i[r++]=[0,0]),i.length=r,i}))}},transform:j,untransform:Y}),H=function(n,t){var e=H.topojson;if(null==e)throw Error("TopoJSON library not loaded.");var r,o=N(n,t);if(t&&t.feature){if(r=o.objects[t.feature])return e.feature(o,r).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(r=o.objects[t.mesh])return[e.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};H.topojson=U;var q={json:N,topojson:H,treejson:function(n,t){return e=N(n,t),o=(r=t)&&r.children||"children",i=r&&r.parent||"parent",a=[],function n(t,e){t[i]=e,a.push(t);var r=t[o];if(r)for(var s=0;s<r.length;++s)n(r[s],t)}(e,null),a.root=e,a;var e,r,o,i,a},dsv:C,csv:C.delimiter(","),tsv:C.delimiter("\t")},V=y((function(n,t){!function(n){var t=new Date,e=new Date;function r(n,o,i,a){function s(t){return n(t=new Date(+t)),t}return s.floor=s,s.round=function(t){var e=new Date(+t),r=new Date(t-1);return n(e),n(r),o(r,1),t-e<r-t?e:r},s.ceil=function(t){return n(t=new Date(t-1)),o(t,1),t},s.offset=function(n,t){return o(n=new Date(+n),null==t?1:Math.floor(t)),n},s.range=function(t,e,r){var i=[];if(t=new Date(t-1),e=new Date(+e),r=null==r?1:Math.floor(r),!(t<e&&r>0))return i;for(o(t,1),n(t),t<e&&i.push(new Date(+t));o(t,r),n(t),t<e;)i.push(new Date(+t));return i},s.filter=function(t){return r((function(e){for(;n(e),!t(e);)e.setTime(e-1)}),(function(n,e){for(;--e>=0;)for(;o(n,1),!t(n););}))},i&&(s.count=function(r,o){return t.setTime(+r),e.setTime(+o),n(t),n(e),Math.floor(i(t,e))},s.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?s.filter(a?function(t){return a(t)%n==0}:function(t){return s.count(0,t)%n==0}):s:null}),s}var o=r((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n}));o.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?r((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,e){t.setTime(+t+e*n)}),(function(t,e){return(e-t)/n})):o:null};var i=r((function(n){n.setMilliseconds(0)}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getSeconds()})),a=r((function(n){n.setSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getMinutes()})),s=r((function(n){n.setMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getHours()})),u=r((function(n){n.setHours(0,0,0,0)}),(function(n,t){n.setDate(n.getDate()+t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5}),(function(n){return n.getDate()-1}));function c(n){return r((function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-n)%7)}),(function(n,t){n.setDate(n.getDate()+7*t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/6048e5}))}var l=c(0),f=c(1),d=c(2),h=c(3),m=c(4),_=c(5),g=c(6),p=r((function(n){n.setHours(0,0,0,0),n.setDate(1)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()})),y=r((function(n){n.setHours(0,0,0,0),n.setMonth(0,1)}),(function(n,t){n.setFullYear(n.getFullYear()+t)}),(function(n,t){return t.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()})),v=r((function(n){n.setUTCMilliseconds(0)}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getUTCSeconds()})),w=r((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getUTCMinutes()})),E=r((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getUTCHours()})),b=r((function(n){n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+t)}),(function(n,t){return(t-n)/864e5}),(function(n){return n.getUTCDate()-1}));function k(n){return r((function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7)}),(function(n,t){n.setUTCDate(n.getUTCDate()+7*t)}),(function(n,t){return(t-n)/6048e5}))}var M=k(0),x=k(1),S=k(2),D=k(3),T=k(4),A=k(5),C=k(6),N=r((function(n){n.setUTCHours(0,0,0,0),n.setUTCDate(1)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()})),O=r((function(n){n.setUTCHours(0,0,0,0),n.setUTCMonth(0,1)}),(function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)}),(function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()})),j=o.range,F=i.range,z=a.range,P=s.range,I=u.range,L=l.range,$=f.range,B=d.range,R=h.range,Y=m.range,U=_.range,H=g.range,q=l.range,V=p.range,J=y.range,X=o,W=j,G=v.range,K=w.range,Z=E.range,Q=b.range,nn=M.range,tn=x.range,en=S.range,rn=D.range,on=T.range,an=A.range,sn=C.range,un=M.range,cn=N.range,ln=O.range;n.version="0.1.1",n.milliseconds=j,n.seconds=F,n.minutes=z,n.hours=P,n.days=I,n.sundays=L,n.mondays=$,n.tuesdays=B,n.wednesdays=R,n.thursdays=Y,n.fridays=U,n.saturdays=H,n.weeks=q,n.months=V,n.years=J,n.utcMillisecond=X,n.utcMilliseconds=W,n.utcSeconds=G,n.utcMinutes=K,n.utcHours=Z,n.utcDays=Q,n.utcSundays=nn,n.utcMondays=tn,n.utcTuesdays=en,n.utcWednesdays=rn,n.utcThursdays=on,n.utcFridays=an,n.utcSaturdays=sn,n.utcWeeks=un,n.utcMonths=cn,n.utcYears=ln,n.millisecond=o,n.second=i,n.minute=a,n.hour=s,n.day=u,n.sunday=l,n.monday=f,n.tuesday=d,n.wednesday=h,n.thursday=m,n.friday=_,n.saturday=g,n.week=l,n.month=p,n.year=y,n.utcSecond=v,n.utcMinute=w,n.utcHour=E,n.utcDay=b,n.utcSunday=M,n.utcMonday=x,n.utcTuesday=S,n.utcWednesday=D,n.utcThursday=T,n.utcFriday=A,n.utcSaturday=C,n.utcWeek=M,n.utcMonth=N,n.utcYear=O,n.interval=r}(t)})),J=y((function(n,t){!function(n,t){function e(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function r(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function o(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function i(n){var t=n.dateTime,i=n.date,s=n.time,u=n.periods,c=n.days,l=n.shortDays,f=n.months,rn=n.shortMonths,on=d(u),an=h(u),sn=d(c),un=h(c),cn=d(l),ln=h(l),fn=d(f),dn=h(f),hn=d(rn),mn=h(rn),_n={a:function(n){return l[n.getDay()]},A:function(n){return c[n.getDay()]},b:function(n){return rn[n.getMonth()]},B:function(n){return f[n.getMonth()]},c:null,d:T,e:T,H:A,I:C,j:N,L:O,m:j,M:F,p:function(n){return u[+(n.getHours()>=12)]},S:z,U:P,w:I,W:L,x:null,X:null,y:$,Y:B,Z:R,"%":en},gn={a:function(n){return l[n.getUTCDay()]},A:function(n){return c[n.getUTCDay()]},b:function(n){return rn[n.getUTCMonth()]},B:function(n){return f[n.getUTCMonth()]},c:null,d:Y,e:Y,H:U,I:H,j:q,L:V,m:J,M:X,p:function(n){return u[+(n.getUTCHours()>=12)]},S:W,U:G,w:K,W:Z,x:null,X:null,y:Q,Y:nn,Z:tn,"%":en},pn={a:function(n,t,e){var r=cn.exec(t.slice(e));return r?(n.w=ln[r[0].toLowerCase()],e+r[0].length):-1},A:function(n,t,e){var r=sn.exec(t.slice(e));return r?(n.w=un[r[0].toLowerCase()],e+r[0].length):-1},b:function(n,t,e){var r=hn.exec(t.slice(e));return r?(n.m=mn[r[0].toLowerCase()],e+r[0].length):-1},B:function(n,t,e){var r=fn.exec(t.slice(e));return r?(n.m=dn[r[0].toLowerCase()],e+r[0].length):-1},c:function(n,e,r){return wn(n,t,e,r)},d:E,e:E,H:k,I:k,j:b,L:S,m:w,M:M,p:function(n,t,e){var r=on.exec(t.slice(e));return r?(n.p=an[r[0].toLowerCase()],e+r[0].length):-1},S:x,U:_,w:m,W:g,x:function(n,t,e){return wn(n,i,t,e)},X:function(n,t,e){return wn(n,s,t,e)},y:y,Y:p,Z:v,"%":D};function yn(n,t){return function(e){var r,o,i,s=[],u=-1,c=0,l=n.length;for(e instanceof Date||(e=new Date(+e));++u<l;)37===n.charCodeAt(u)&&(s.push(n.slice(c,u)),null!=(o=a[r=n.charAt(++u)])?r=n.charAt(++u):o="e"===r?" ":"0",(i=t[r])&&(r=i(e,o)),s.push(r),c=u+1);return s.push(n.slice(c,u)),s.join("")}}function vn(n,t){return function(e){var i=o(1900);if(wn(i,n,e+="",0)!=e.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?r(o(i.y)).getUTCDay():t(o(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,r(i)):t(i)}}function wn(n,t,e,r){for(var o,i,s=0,u=t.length,c=e.length;s<u;){if(r>=c)return-1;if(37===(o=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=pn[o in a?t.charAt(s++):o])||(r=i(n,e,r))<0)return-1}else if(o!=e.charCodeAt(r++))return-1}return r}return _n.x=yn(i,_n),_n.X=yn(s,_n),_n.c=yn(t,_n),gn.x=yn(i,gn),gn.X=yn(s,gn),gn.c=yn(t,gn),{format:function(n){var t=yn(n+="",_n);return t.parse=vn(n,e),t.toString=function(){return n},t},utcFormat:function(n){var t=yn(n+="",gn);return t.parse=vn(n,r),t.toString=function(){return n},t}}}var a={"-":"",_:" ",0:"0"},s=/^\s*\d+/,u=/^%/,c=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function l(n,t,e){var r=n<0?"-":"",o=(r?-n:n)+"",i=o.length;return r+(i<e?new Array(e-i+1).join(t)+o:o)}function f(n){return n.replace(c,"\\$&")}function d(n){return new RegExp("^(?:"+n.map(f).join("|")+")","i")}function h(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function m(n,t,e){var r=s.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function _(n,t,e){var r=s.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function g(n,t,e){var r=s.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function p(n,t,e){var r=s.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function y(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function v(n,t,e){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function w(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function E(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function b(n,t,e){var r=s.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function k(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function M(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function x(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function S(n,t,e){var r=s.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function D(n,t,e){var r=u.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function T(n,t){return l(n.getDate(),t,2)}function A(n,t){return l(n.getHours(),t,2)}function C(n,t){return l(n.getHours()%12||12,t,2)}function N(n,e){return l(1+t.day.count(t.year(n),n),e,3)}function O(n,t){return l(n.getMilliseconds(),t,3)}function j(n,t){return l(n.getMonth()+1,t,2)}function F(n,t){return l(n.getMinutes(),t,2)}function z(n,t){return l(n.getSeconds(),t,2)}function P(n,e){return l(t.sunday.count(t.year(n),n),e,2)}function I(n){return n.getDay()}function L(n,e){return l(t.monday.count(t.year(n),n),e,2)}function $(n,t){return l(n.getFullYear()%100,t,2)}function B(n,t){return l(n.getFullYear()%1e4,t,4)}function R(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+l(t/60|0,"0",2)+l(t%60,"0",2)}function Y(n,t){return l(n.getUTCDate(),t,2)}function U(n,t){return l(n.getUTCHours(),t,2)}function H(n,t){return l(n.getUTCHours()%12||12,t,2)}function q(n,e){return l(1+t.utcDay.count(t.utcYear(n),n),e,3)}function V(n,t){return l(n.getUTCMilliseconds(),t,3)}function J(n,t){return l(n.getUTCMonth()+1,t,2)}function X(n,t){return l(n.getUTCMinutes(),t,2)}function W(n,t){return l(n.getUTCSeconds(),t,2)}function G(n,e){return l(t.utcSunday.count(t.utcYear(n),n),e,2)}function K(n){return n.getUTCDay()}function Z(n,e){return l(t.utcMonday.count(t.utcYear(n),n),e,2)}function Q(n,t){return l(n.getUTCFullYear()%100,t,2)}function nn(n,t){return l(n.getUTCFullYear()%1e4,t,4)}function tn(){return"+0000"}function en(){return"%"}var rn=i({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),on=i({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),an=i({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),sn=i({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),un=i({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),cn=i({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ln=i({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),fn=i({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),dn=i({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),hn=i({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),mn=i({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),_n=i({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),gn=i({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),pn=i({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),yn=i({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),vn=i({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),wn=i({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),En=i({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),bn=i({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),kn=i({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),Mn=i({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),xn=i({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});function Sn(n){return n.toISOString()}Sn.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Sn.toString=function(){return"%Y-%m-%dT%H:%M:%S.%LZ"};var Dn=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sn:rn.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Tn=rn.format,An=rn.utcFormat;n.version="0.2.1",n.format=Tn,n.utcFormat=An,n.locale=i,n.localeCaEs=on,n.localeDeCh=an,n.localeDeDe=sn,n.localeEnCa=un,n.localeEnGb=cn,n.localeEnUs=rn,n.localeEsEs=ln,n.localeFiFi=fn,n.localeFrCa=dn,n.localeFrFr=hn,n.localeHeIl=mn,n.localeHuHu=_n,n.localeItIt=gn,n.localeJaJp=pn,n.localeKoKr=yn,n.localeMkMk=vn,n.localeNlNl=wn,n.localePlPl=En,n.localePtBr=bn,n.localeRuRu=kn,n.localeSvSe=Mn,n.localeZhCn=xn,n.isoFormat=Dn}(t,V)})),X=(y((function(n,t){!function(n){function t(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function e(n){return(n=t(Math.abs(n)))?n[1]:NaN}var r;function o(n,e){var r=t(n,e);if(!r)return n+"";var o=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var i={"":function(n,t){n:for(var e,r=(n=n.toPrecision(t)).length,o=1,i=-1;o<r;++o)switch(n[o]){case".":i=e=o;break;case"0":0===i&&(i=o),e=o;break;case"e":break n;default:i>0&&(i=0)}return i>0?n.slice(0,i)+n.slice(e+1):n},"%":function(n,t){return(100*n).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return o(100*n,t)},r:o,s:function(n,e){var o=t(n,e);if(!o)return n+"";var i=o[0],a=o[1],s=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=i.length;return s===u?i:s>u?i+new Array(s-u+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+t(n,Math.max(0,e+s-1))[0]},X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}},a=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function s(n){return new u(n)}function u(n){if(!(t=a.exec(n)))throw new Error("invalid format: "+n);var t,e=t[1]||" ",r=t[2]||">",o=t[3]||"-",s=t[4]||"",u=!!t[5],c=t[6]&&+t[6],l=!!t[7],f=t[8]&&+t[8].slice(1),d=t[9]||"";"n"===d?(l=!0,d="g"):i[d]||(d=""),(u||"0"===e&&"="===r)&&(u=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=o,this.symbol=s,this.zero=u,this.width=c,this.comma=l,this.precision=f,this.type=d}u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var c=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function l(n){return n}function f(n){var t,o,a=n.grouping&&n.thousands?(t=n.grouping,o=n.thousands,function(n,e){for(var r=n.length,i=[],a=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),i.push(n.substring(r-=s,r+s)),!((u+=s+1)>e));)s=t[a=(a+1)%t.length];return i.reverse().join(o)}):l,u=n.currency,f=n.decimal;function d(n){var t=(n=s(n)).fill,e=n.align,o=n.sign,l=n.symbol,d=n.zero,h=n.width,m=n.comma,_=n.precision,g=n.type,p="$"===l?u[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",y="$"===l?u[1]:/[%p]/.test(g)?"%":"",v=i[g],w=!g||/[defgprs%]/.test(g);return _=null==_?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),function(n){var i=p,s=y;if("c"===g)s=v(n)+s,n="";else{var u,l=((n=+n)<0||1/n<0)&&(n*=-1,!0);if(n=v(n,_),l){var E=-1,b=n.length;for(l=!1;++E<b;)if(48<(u=n.charCodeAt(E))&&u<58||"x"===g&&96<u&&u<103||"X"===g&&64<u&&u<71){l=!0;break}}if(i=(l?"("===o?o:"-":"-"===o||"("===o?"":o)+i,s=s+("s"===g?c[8+r/3]:"")+(l&&"("===o?")":""),w)for(E=-1,b=n.length;++E<b;)if(48>(u=n.charCodeAt(E))||u>57){s=(46===u?f+n.slice(E+1):n.slice(E))+s,n=n.slice(0,E);break}}m&&!d&&(n=a(n,1/0));var k=i.length+n.length+s.length,M=k<h?new Array(h-k+1).join(t):"";switch(m&&d&&(n=a(M+n,M.length?h-s.length:1/0),M=""),e){case"<":return i+n+s+M;case"=":return i+M+n+s;case"^":return M.slice(0,k=M.length>>1)+i+n+s+M.slice(k)}return M+i+n+s}}return{format:d,formatPrefix:function(n,t){var r=d(((n=s(n)).type="f",n)),o=3*Math.max(-8,Math.min(8,Math.floor(e(t)/3))),i=Math.pow(10,-o),a=c[8+o/3];return function(n){return r(i*n)+a}}}}var d=f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),h=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),m=f({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),_=f({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),g=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),p=f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),y=f({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),v=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),w=f({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),E=f({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),b=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),k=f({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),M=f({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),x=f({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),S=f({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),D=f({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),T=f({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),A=f({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),C=f({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),N=f({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),O=f({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),j=f({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),F=f({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),z=d.format,P=d.formatPrefix;n.version="0.4.2",n.format=z,n.formatPrefix=P,n.locale=f,n.localeCaEs=h,n.localeCsCz=m,n.localeDeCh=_,n.localeDeDe=g,n.localeEnCa=p,n.localeEnGb=y,n.localeEnUs=d,n.localeEsEs=v,n.localeFiFi=w,n.localeFrCa=E,n.localeFrFr=b,n.localeHeIl=k,n.localeHuHu=M,n.localeItIt=x,n.localeJaJp=S,n.localeKoKr=D,n.localeMkMk=T,n.localeNlNl=A,n.localePlPl=C,n.localePtBr=N,n.localeRuRu=O,n.localeSvSe=j,n.localeZhCn=F,n.formatSpecifier=s,n.precisionFixed=function(n){return Math.max(0,-e(Math.abs(n)))},n.precisionPrefix=function(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(e(t)/3)))-e(Math.abs(n)))},n.precisionRound=function(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,e(t)-e(n))+1}}(t)})),J),W=(new Date(2e3,0,1),function(n){return X.format(n)});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var G=W;function K(n,t){var e=t&&t.type||"json";return n=q[e](n,t),t&&t.parse&&function(n,t){var e,r,o,i,a,s,u=n.length;for(t="auto"===t?D.inferAll(n):v.duplicate(t),e=v.keys(t),r=e.map((function(n){var e=t[n];if(e&&0===e.indexOf("date:")){var r=e.split(/:(.+)?/,2)[1];if(!("'"===r[0]&&"'"===r[r.length-1]||'"'===r[0]&&'"'===r[r.length-1]))throw Error("Format pattern must be quoted: "+r);return r=r.slice(1,-1),r=G(r),function(n){return r.parse(n)}}if(!D.parsers[e])throw Error("Illegal format pattern: "+n+":"+e);return D.parsers[e]})),i=0,s=e.length;i<u;++i)for(o=n[i],a=0;a<s;++a)o[e[a]]=r[a](o[e[a]]);D.annotation(n,t)}(n,t.parse),n}K.formats=q;var Z=K,Q=y((function(n){var t=n.exports;t.repeat=function(n,t){var e,r=Array(t);for(e=0;e<t;++e)r[e]=n;return r},t.zeros=function(n){return t.repeat(0,n)},t.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e==1/0)throw new Error("Infinite range");var r,o=[],i=-1;if(e<0)for(;(r=n+e*++i)>t;)o.push(r);else for(;(r=n+e*++i)<t;)o.push(r);return o},t.random={},t.random.uniform=function(n,e){void 0===e&&(e=void 0===n?1:n,n=0);var r=e-n,o=function(){return n+r*Math.random()};return o.samples=function(n){return t.zeros(n).map(o)},o.pdf=function(t){return t>=n&&t<=e?1/r:0},o.cdf=function(t){return t<n?0:t>e?1:(t-n)/r},o.icdf=function(t){return t>=0&&t<=1?n+t*r:NaN},o},t.random.integer=function(n,e){void 0===e&&(e=n,n=0);var r=e-n,o=function(){return n+Math.floor(r*Math.random())};return o.samples=function(n){return t.zeros(n).map(o)},o.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<e?1/r:0},o.cdf=function(t){var o=Math.floor(t);return o<n?0:o>=e?1:(o-n+1)/r},o.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*r):NaN},o},t.random.normal=function(n,e){var r;n=n||0,e=e||1;var o=function(){var t,o,i=0,a=0;if(void 0!==r)return i=r,r=void 0,i;do{t=(i=2*Math.random()-1)*i+(a=2*Math.random()-1)*a}while(0===t||t>1);return o=Math.sqrt(-2*Math.log(t)/t),r=n+a*o*e,n+i*o*e};return o.samples=function(n){return t.zeros(n).map(o)},o.pdf=function(t){var r=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(e,2)));return 1/(e*Math.sqrt(2*Math.PI))*r},o.cdf=function(t){var r,o=(t-n)/e,i=Math.abs(o);if(i>37)r=0;else{var a=Math.exp(-i*i/2);i<7.07106781186547?(r=a*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=a/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return o>0?1-r:r},o.icdf=function(t){if(t<=0||t>=1)return NaN;var r=2*t-1,o=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),i=2/(Math.PI*o)+Math.log(1-Math.pow(r,2))/2,a=Math.log(1-r*r)/o,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(i*i-a)-i);return n+e*Math.SQRT2*s},o},t.random.bootstrap=function(n,e){var r=n.filter(v.isValid),o=r.length,i=e?t.random.normal(0,e):null,a=function(){return r[~~(Math.random()*o)]+(i?i():0)};return a.samples=function(n){return t.zeros(n).map(a)},a}})),nn=y((function(n){var t=n.exports;function e(n,e,r){var o=n&&n.nullh||0,i=Q.random.normal(0,1),a=t.mean(e,r),s=t.stdev(e,r)/Math.sqrt(t.count.valid(e,r));if(0===s)return a-o==0?1:0;var u=(a-o)/s;return 2*i.cdf(-Math.abs(u))}function r(n,e,r,o){var i,a=o?e.map(v.$(r)):e,s=o?e.map(v.$(o)):r,u=t.count(a),c=t.count(s),l=Array();if(u!==c)throw Error("Array lengths must match.");for(i=0;i<u;++i)v.isValid(a[i])&&v.isValid(s[i])&&l.push(a[i]-s[i]);return t.z.test(l,n&&n.nullh||0)}function o(n,e,r,o){var i=o?e.map(v.$(r)):e,a=o?e.map(v.$(o)):r,s=t.count.valid(i),u=t.count.valid(a),c=Q.random.normal(0,1),l=t.mean(i)-t.mean(a)-(n&&n.nullh||0),f=Math.sqrt(t.variance(i)/s+t.variance(a)/u);if(0===f)return 0===l?1:0;var d=l/f;return 2*c.cdf(-Math.abs(d))}t.unique=function(n,t,e){t=v.$(t),e=e||[];var r,o,i,a={};for(o=0,i=n.length;o<i;++o)(r=t?t(n[o]):n[o])in a||(a[r]=1,e.push(r));return e},t.count=function(n){return n&&n.length||0},t.count.valid=function(n,t){t=v.$(t);var e,r,o,i=0;for(r=0,o=n.length;r<o;++r)e=t?t(n[r]):n[r],v.isValid(e)&&(i+=1);return i},t.count.missing=function(n,t){t=v.$(t);var e,r,o=0;for(e=0,r=n.length;e<r;++e)null==(t?t(n[e]):n[e])&&(o+=1);return o},t.count.distinct=function(n,t){t=v.$(t);var e,r,o,i={},a=0;for(r=0,o=n.length;r<o;++r)(e=t?t(n[r]):n[r])in i||(i[e]=1,a+=1);return a},t.count.map=function(n,t){t=v.$(t);var e,r,o,i={};for(r=0,o=n.length;r<o;++r)i[e=t?t(n[r]):n[r]]=e in i?i[e]+1:1;return i},t.median=function(n,e){return e&&(n=n.map(v.$(e))),n=n.filter(v.isValid).sort(v.cmp),t.quantile(n,.5)},t.quartile=function(n,e){e&&(n=n.map(v.$(e))),n=n.filter(v.isValid).sort(v.cmp);var r=t.quantile;return[r(n,.25),r(n,.5),r(n,.75)]},t.quantile=function(n,t,e){void 0===e&&(e=t,t=v.identity),t=v.$(t);var r=(n.length-1)*e+1,o=Math.floor(r),i=+t(n[o-1]),a=r-o;return a?i+a*(t(n[o])-i):i},t.sum=function(n,t){t=v.$(t);for(var e,r=0,o=0,i=n.length;o<i;++o)e=t?t(n[o]):n[o],v.isValid(e)&&(r+=e);return r},t.mean=function(n,t){t=v.$(t);var e,r,o,i,a=0;for(e=0,o=0,r=n.length;e<r;++e)i=t?t(n[e]):n[e],v.isValid(i)&&(a+=(i-a)/++o);return a},t.mean.geometric=function(n,t){t=v.$(t);var e,r,o,i,a=1;for(i=0,e=0,r=n.length;i<r;++i)if(o=t?t(n[i]):n[i],v.isValid(o)){if(o<=0)throw Error("Geometric mean only defined for positive values.");a*=o,++e}return a=e>0?Math.pow(a,1/e):0},t.mean.harmonic=function(n,t){t=v.$(t);var e,r,o,i,a=0;for(i=0,e=0,r=n.length;i<r;++i)o=t?t(n[i]):n[i],v.isValid(o)&&(a+=1/o,++e);return e/a},t.variance=function(n,t){if(t=v.$(t),!v.isArray(n)||n.length<2)return 0;var e,r,o,i,a=0,s=0;for(r=0,o=0;r<n.length;++r)i=t?t(n[r]):n[r],v.isValid(i)&&(s+=(e=i-a)*(i-(a+=e/++o)));return s/=o-1},t.stdev=function(n,e){return Math.sqrt(t.variance(n,e))},t.modeskew=function(n,e){var r=t.mean(n,e),o=t.median(n,e),i=t.stdev(n,e);return 0===i?0:(r-o)/i},t.min=function(n,e){return t.extent(n,e)[0]},t.max=function(n,e){return t.extent(n,e)[1]},t.extent=function(n,t){t=v.$(t);var e,r,o,i,a=n.length;for(i=0;i<a;++i)if(o=t?t(n[i]):n[i],v.isValid(o)){e=r=o;break}for(;i<a;++i)o=t?t(n[i]):n[i],v.isValid(o)&&(o<e&&(e=o),o>r&&(r=o));return[e,r]},t.extent.index=function(n,t){t=v.$(t);var e,r,o,i,a=-1,s=-1,u=n.length;for(i=0;i<u;++i)if(o=t?t(n[i]):n[i],v.isValid(o)){e=r=o,a=s=i;break}for(;i<u;++i)o=t?t(n[i]):n[i],v.isValid(o)&&(o<e&&(e=o,a=i),o>r&&(r=o,s=i));return[a,s]},t.dot=function(n,t,e){var r,o,i=0;if(e)for(t=v.$(t),e=v.$(e),r=0;r<n.length;++r)(o=t(n[r])*e(n[r]))==o&&(i+=o);else{if(n.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<n.length;++r)(o=n[r]*t[r])==o&&(i+=o)}return i},t.dist=function(n,t,e,r){var o,i,a=v.isFunction(e)||v.isString(e),s=n,u=a?n:t,c=a?r:e,l=2===c||null==c,f=n.length,d=0;for(a&&(t=v.$(t),e=v.$(e)),i=0;i<f;++i)o=a?t(s[i])-e(u[i]):s[i]-u[i],d+=l?o*o:Math.pow(Math.abs(o),c);return l?Math.sqrt(d):Math.pow(d,1/c)},t.cohensd=function(n,e,r){var o=r?n.map(v.$(e)):n,i=r?n.map(v.$(r)):e,a=t.mean(o),s=t.mean(i),u=t.count.valid(o),c=t.count.valid(i);if(u+c-2<=0)return 0;var l=t.variance(o),f=t.variance(i),d=Math.sqrt(((u-1)*l+(c-1)*f)/(u+c-2));return 0===d?0:(a-s)/d},t.covariance=function(n,e,r){var o,i,a,s,u,c=r?n.map(v.$(e)):n,l=r?n.map(v.$(r)):e,f=c.length,d=t.mean(c),h=t.mean(l),m=0,_=0;if(f!==l.length)throw Error("Input lengths must match.");for(o=0;o<f;++o)if(i=c[o],s=v.isValid(i),a=l[o],u=v.isValid(a),s&&u)m+=(i-d)*(a-h),++_;else if(s||u)throw Error("Valid values must align.");return m/(_-1)},t.rank=function(n,t){t=v.$(t)||v.identity;var e,r,o,i=n.map((function(n,e){return{idx:e,val:t(n)}})).sort(v.comparator("val")),a=n.length,s=Array(a),u=-1,c={};for(e=0;e<a;++e){if(r=i[e].val,u<0&&c===r)u=e-1;else if(u>-1&&c!==r){for(o=1+(e-1+u)/2;u<e;++u)s[i[u].idx]=o;u=-1}s[i[e].idx]=e+1,c=r}if(u>-1)for(o=1+(a-1+u)/2;u<a;++u)s[i[u].idx]=o;return s},t.cor=function(n,e,r){var o=r;r=o?n.map(v.$(r)):e,e=o?n.map(v.$(e)):n;var i=t.dot(e,r),a=t.mean(e),s=t.mean(r),u=t.stdev(e),c=t.stdev(r),l=n.length;return(i-l*a*s)/((l-1)*u*c)},t.cor.rank=function(n,e,r){var o,i,a,s=r?t.rank(n,e):t.rank(n),u=r?t.rank(n,r):t.rank(e),c=n.length;for(o=0,i=0;o<c;++o)i+=(a=s[o]-u[o])*a;return 1-6*i/(c*(c*c-1))},t.cor.dist=function(n,e,r){var o,i,a,s,u=r?n.map(v.$(e)):n,c=r?n.map(v.$(r)):e,l=t.dist.mat(u),f=t.dist.mat(c),d=l.length;for(o=0,i=0,a=0,s=0;o<d;++o)i+=l[o]*l[o],a+=f[o]*f[o],s+=l[o]*f[o];return Math.sqrt(s/Math.sqrt(i*a))},t.linearRegression=function(n,e,r){var o,i,a=r?n.map(v.$(e)):n,s=r?n.map(v.$(r)):e,u=a.length,c=t.covariance(a,s),l=t.stdev(a),f=t.stdev(s),d=c/(l*l),h=t.mean(s)-d*t.mean(a),m={slope:d,intercept:h,R:c/(l*f),rss:0};for(i=0;i<u;++i)v.isValid(a[i])&&v.isValid(s[i])&&(o=d*a[i]+h-s[i],m.rss+=o*o);return m},t.bootstrap={},t.bootstrap.ci=function(n,e,r,o,i){var a,s,u,c,l,f,d;for(v.isFunction(e)||v.isString(e)?(a=n.map(v.$(e)),s=r,u=o,c=i):(a=n,s=e,u=r,c=o),s=s?+s:1e3,u=u||.05,l=Q.random.bootstrap(a,c),d=0,f=Array(s);d<s;++d)f[d]=t.mean(l.samples(a.length));return f.sort(v.numcmp),[t.quantile(f,u/2),t.quantile(f,1-u/2)]},t.z={},t.z.ci=function(n,e,r){var o=n,i=e;(v.isFunction(e)||v.isString(e))&&(o=n.map(v.$(e)),i=r);var a=.05===(i=i||.05)?1.96:Q.random.normal(0,1).icdf(1-i/2),s=t.mean(o),u=t.stdev(o)/Math.sqrt(t.count.valid(o));return[s-a*u,s+a*u]},t.z.test=function(n,t,i,a){return v.isFunction(i)||v.isString(i)?(a&&a.paired?r:o)(a,n,t,i):v.isArray(t)?(i&&i.paired?r:o)(i,n,t):v.isFunction(t)||v.isString(t)?e(i,n,t):e(t,n)},t.dist.mat=function(n){var t,e,r,o=n.length,i=o*o,a=Array(i),s=Q.zeros(o),u=0;for(e=0;e<o;++e)for(a[e*o+e]=0,r=e+1;r<o;++r)a[e*o+r]=t=Math.abs(n[e]-n[r]),a[r*o+e]=t,s[e]+=t,s[r]+=t;for(e=0;e<o;++e)u+=s[e],s[e]/=o;for(u/=i,e=0;e<o;++e)for(r=e;r<o;++r)a[e*o+r]+=u-s[e]-s[r],a[r*o+e]=a[e*o+r];return a},t.entropy=function(n,t){t=v.$(t);var e,r,o=0,i=0,a=n.length;for(e=0;e<a;++e)o+=t?t(n[e]):n[e];if(0===o)return 0;for(e=0;e<a;++e)(r=(t?t(n[e]):n[e])/o)&&(i+=r*Math.log(r));return-i/Math.LN2},t.mutual=function(n,t,e,r){var o,i,a,s=r?n.map(v.$(t)):n,u=r?n.map(v.$(e)):t,c=r?n.map(v.$(r)):e,l={},f={},d=c.length,h=0,m=0,_=0;for(a=0;a<d;++a)l[s[a]]=0,f[u[a]]=0;for(a=0;a<d;++a)l[s[a]]+=c[a],f[u[a]]+=c[a],h+=c[a];for(i=1/(h*Math.LN2),a=0;a<d;++a)0!==c[a]&&(o=h*c[a]/(l[s[a]]*f[u[a]]),m+=c[a]*i*Math.log(o),_+=c[a]*i*Math.log(c[a]/h));return[m,1+m/_]},t.mutual.info=function(n,e,r,o){return t.mutual(n,e,r,o)[0]},t.mutual.dist=function(n,e,r,o){return t.mutual(n,e,r,o)[1]},t.profile=function(n,e){var r,o,i,a,s,u=0,c=0,l=0,f=0,d=null,h=null,m=0,_=[],g={};for(i=0;i<n.length;++i)g[a=e?e(n[i]):n[i]]=a in g?g[a]+1:(f+=1,1),null==a?++l:v.isValid(a)&&(s="string"==typeof a?a.length:a,(null===d||s<d)&&(d=s),(null===h||s>h)&&(h=s),m+=(r=s-u)*(s-(u+=r/++c)),_.push(s));return m/=c-1,o=Math.sqrt(m),_.sort(v.cmp),{type:D(n,e),unique:g,count:n.length,valid:c,missing:l,distinct:f,min:d,max:h,mean:u,stdev:o,median:a=t.quantile(_,.5),q1:t.quantile(_,.25),q3:t.quantile(_,.75),modeskew:0===o?0:(u-a)/o}},t.summary=function(n,e){var r=(e=e||v.keys(n[0])).map((function(e){var r=t.profile(n,v.$(e));return r.field=e,r}));return r.__summary__=!0,r}}));function tn(n){const t=Z(n),e=nn.summary(t),r={};return e.forEach(n=>{const t=n.field;delete n.field,r[t]=n}),{stats:r,size:n.length}}function en(n){const t=n[0].type;n.forEach(n=>{if(n.type!==t)throw new Error("constraints not all of type "+t)});let e,r,o="";"soft"===t&&(e="",r="");for(const i of n)o+=`% @constraint ${i.description}\n${i.asp}`,o+="\n\n","soft"===t&&(e+=`#const ${i.name}_weight = ${i.weight}.`,e+="\n",r+=`soft_weight(${i.name}, ${i.name}_weight).`,r+="\n");return"hard"===t?{definitions:o}:{definitions:o,weights:e,assigns:r}}function rn(n){if(!n)throw Error("No data has been prepared");const t=n.stats,e=[`num_rows(${n.size}).\n`];return Object.keys(t).forEach((n,r)=>{const o=`"${n}"`,i=t[n],a=`fieldtype(${o},${i.type}).`,s=`cardinality(${o}, ${i.distinct}).`;e.push(`${a}\n${s}`)}),e}var on={},an=Object.freeze({default:on});function sn(n,t){for(var e=0,r=n.length-1;r>=0;r--){var o=n[r];"."===o?n.splice(r,1):".."===o?(n.splice(r,1),e++):e&&(n.splice(r,1),e--)}if(t)for(;e--;e)n.unshift("..");return n}var un=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,cn=function(n){return un.exec(n).slice(1)};function ln(){for(var n="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(n=r+"/"+n,t="/"===r.charAt(0))}return(t?"/":"")+(n=sn(vn(n.split("/"),(function(n){return!!n})),!t).join("/"))||"."}function fn(n){var t=dn(n),e="/"===wn(n,-1);return(n=sn(vn(n.split("/"),(function(n){return!!n})),!t).join("/"))||t||(n="."),n&&e&&(n+="/"),(t?"/":"")+n}function dn(n){return"/"===n.charAt(0)}function hn(){var n=Array.prototype.slice.call(arguments,0);return fn(vn(n,(function(n,t){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))}function mn(n,t){function e(n){for(var t=0;t<n.length&&""===n[t];t++);for(var e=n.length-1;e>=0&&""===n[e];e--);return t>e?[]:n.slice(t,e-t+1)}n=ln(n).substr(1),t=ln(t).substr(1);for(var r=e(n.split("/")),o=e(t.split("/")),i=Math.min(r.length,o.length),a=i,s=0;s<i;s++)if(r[s]!==o[s]){a=s;break}var u=[];for(s=a;s<r.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}function _n(n){var t=cn(n),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."}function gn(n,t){var e=cn(n)[2];return t&&e.substr(-1*t.length)===t&&(e=e.substr(0,e.length-t.length)),e}function pn(n){return cn(n)[3]}var yn={extname:pn,basename:gn,dirname:_n,sep:"/",delimiter:":",relative:mn,join:hn,isAbsolute:dn,normalize:fn,resolve:ln};function vn(n,t){if(n.filter)return n.filter(t);for(var e=[],r=0;r<n.length;r++)t(n[r],r,n)&&e.push(n[r]);return e}var wn="b"==="ab".substr(-1)?function(n,t,e){return n.substr(t,e)}:function(n,t,e){return t<0&&(t=n.length+t),n.substr(t,e)},En=Object.freeze({resolve:ln,normalize:fn,isAbsolute:dn,join:hn,relative:mn,sep:"/",delimiter:":",dirname:_n,basename:gn,extname:pn,default:yn}),bn=an&&on||an,kn=En&&yn||En,Mn=y((function(n,t){var e,r=(e="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(n){n=void 0!==(n=n||{})?n:{};var t,r={};for(t in n)n.hasOwnProperty(t)&&(r[t]=n[t]);n.arguments=[],n.thisProgram="./this.program",n.quit=function(n,t){throw t},n.preRun=[],n.postRun=[];var o=!1,i=!1,a=!1,s=!1;o="object"==typeof window,i="function"==typeof importScripts,a="object"==typeof process&&!o&&!i,s=!o&&!a&&!i;var u,c,l="";function f(t){return n.locateFile?n.locateFile(t,l):l+t}a?(l=__dirname+"/",n.read=function(n,t){var e;return u||(u=bn),c||(c=kn),n=c.normalize(n),e=u.readFileSync(n),t?e:e.toString()},n.readBinary=function(t){var e=n.read(t,!0);return e.buffer||(e=new Uint8Array(e)),b(e.buffer),e},process.argv.length>1&&(n.thisProgram=process.argv[1].replace(/\\/g,"/")),n.arguments=process.argv.slice(2),process.on("uncaughtException",(function(n){if(!(n instanceof mo))throw n})),process.on("unhandledRejection",(function(n,t){process.exit(1)})),n.quit=function(n){process.exit(n)},n.inspect=function(){return"[Emscripten Module object]"}):s?("undefined"!=typeof read&&(n.read=function(n){return read(n)}),n.readBinary=function(n){var t;return"function"==typeof readbuffer?new Uint8Array(readbuffer(n)):(b("object"==typeof(t=read(n,"binary"))),t)},"undefined"!=typeof scriptArgs?n.arguments=scriptArgs:void 0!==arguments&&(n.arguments=arguments),"function"==typeof quit&&(n.quit=function(n){quit(n)})):(o||i)&&(o?document.currentScript&&(l=document.currentScript.src):l=self.location.href,e&&(l=e),l=0!==l.indexOf("blob:")?l.substr(0,l.lastIndexOf("/")+1):"",n.read=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.send(null),t.responseText},i&&(n.readBinary=function(n){var t=new XMLHttpRequest;return t.open("GET",n,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),n.readAsync=function(n,t,e){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):e()},r.onerror=e,r.send(null)},n.setWindowTitle=function(n){document.title=n});var d=n.print||("undefined"!=typeof console?console.log.bind(console):"undefined"!=typeof print?print:null),h=n.printErr||("undefined"!=typeof printErr?printErr:"undefined"!=typeof console&&console.warn.bind(console)||d);for(t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);r=void 0;var m=16;function _(n){var t=Z;return Z=Z+n+15&-16,t}function g(n){var t=X[on>>2],e=t+n+15&-16;return X[on>>2]=e,e>=_n&&!hn()?(X[on>>2]=t,0):t}function p(n,t){return t||(t=m),n=Math.ceil(n/t)*t}function y(n){switch(n){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:if("*"===n[n.length-1])return 4;if("i"===n[0]){var t=parseInt(n.substr(1));return b(t%8==0),t/8}return 0}}var v={"f64-rem":function(n,t){return n%t},debugger:function(){}},w=1024,E=!1;function b(n,t){n||po("Assertion failed: "+t)}function k(t){var e=n["_"+t];return b(e,"Cannot call unknown function "+t+", make sure it is exported"),e}var M={stackSave:function(){ho()},stackRestore:function(){fo()},arrayToC:function(n){var t=lo(n.length);return jn(n,t),t},stringToC:function(n){var t=0;if(null!=n&&0!==n){var e=1+(n.length<<2);L(n,t=lo(e),e)}return t}},x={string:M.stringToC,array:M.arrayToC};function S(n,t,e,r,o){var i=k(n),a=[],s=0;if(r)for(var u=0;u<r.length;u++){var c=x[e[u]];c?(0===s&&(s=ho()),a[u]=c(r[u])):a[u]=r[u]}var l=i.apply(null,a);return l=function(n){return"string"===t?j(n):"boolean"===t?Boolean(n):n}(l),0!==s&&fo(s),l}function D(n,t,e,r){switch("*"===(e=e||"i8").charAt(e.length-1)&&(e="i32"),e){case"i1":case"i8":q[n>>0]=t;break;case"i16":J[n>>1]=t;break;case"i32":X[n>>2]=t;break;case"i64":tempI64=[t>>>0,(tempDouble=t,+zn(tempDouble)>=1?tempDouble>0?(0|Ln(+In(tempDouble/4294967296),4294967295))>>>0:~~+Pn((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],X[n>>2]=tempI64[0],X[n+4>>2]=tempI64[1];break;case"float":W[n>>2]=t;break;case"double":G[n>>3]=t;break;default:po("invalid type for setValue: "+e)}}var T=0,A=2,C=4;function N(n,t,e,r){var o,i;"number"==typeof n?(o=!0,i=n):(o=!1,i=n.length);var a,s="string"==typeof t?t:null;if(a=e==C?r:["function"==typeof so?so:_,lo,_,g][void 0===e?A:e](Math.max(i,s?1:t.length)),o){var u;for(r=a,b(0==(3&a)),u=a+(-4&i);r<u;r+=4)X[r>>2]=0;for(u=a+i;r<u;)q[r++>>0]=0;return a}if("i8"===s)return n.subarray||n.slice?V.set(n,a):V.set(new Uint8Array(n),a),a;for(var c,l,f,d=0;d<i;){var h=n[d];0!==(c=s||t[d])?("i64"==c&&(c="i32"),D(a+d,h,c),f!==c&&(l=y(c),f=c),d+=l):d++}return a}function O(n){return Q?xn?so(n):g(n):_(n)}function j(n,t){if(0===t||!n)return"";for(var e,r=0,o=0;r|=e=V[n+o>>0],(0!=e||t)&&(o++,!t||o!=t););t||(t=o);var i="";if(r<128){for(var a;t>0;)a=String.fromCharCode.apply(String,V.subarray(n,n+Math.min(t,1024))),i=i?i+a:a,n+=1024,t-=1024;return i}return P(n)}var F="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function z(n,t){for(var e=t;n[e];)++e;if(e-t>16&&n.subarray&&F)return F.decode(n.subarray(t,e));for(var r,o,i,a,s,u="";;){if(!(r=n[t++]))return u;if(128&r)if(o=63&n[t++],192!=(224&r))if(i=63&n[t++],224==(240&r)?r=(15&r)<<12|o<<6|i:(a=63&n[t++],240==(248&r)?r=(7&r)<<18|o<<12|i<<6|a:(s=63&n[t++],r=248==(252&r)?(3&r)<<24|o<<18|i<<12|a<<6|s:(1&r)<<30|o<<24|i<<18|a<<12|s<<6|63&n[t++])),r<65536)u+=String.fromCharCode(r);else{var c=r-65536;u+=String.fromCharCode(55296|c>>10,56320|1023&c)}else u+=String.fromCharCode((31&r)<<6|o);else u+=String.fromCharCode(r)}}function P(n){return z(V,n)}function I(n,t,e,r){if(!(r>0))return 0;for(var o=e,i=e+r-1,a=0;a<n.length;++a){var s=n.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&n.charCodeAt(++a)),s<=127){if(e>=i)break;t[e++]=s}else if(s<=2047){if(e+1>=i)break;t[e++]=192|s>>6,t[e++]=128|63&s}else if(s<=65535){if(e+2>=i)break;t[e++]=224|s>>12,t[e++]=128|s>>6&63,t[e++]=128|63&s}else if(s<=2097151){if(e+3>=i)break;t[e++]=240|s>>18,t[e++]=128|s>>12&63,t[e++]=128|s>>6&63,t[e++]=128|63&s}else if(s<=67108863){if(e+4>=i)break;t[e++]=248|s>>24,t[e++]=128|s>>18&63,t[e++]=128|s>>12&63,t[e++]=128|s>>6&63,t[e++]=128|63&s}else{if(e+5>=i)break;t[e++]=252|s>>30,t[e++]=128|s>>24&63,t[e++]=128|s>>18&63,t[e++]=128|s>>12&63,t[e++]=128|s>>6&63,t[e++]=128|63&s}}return t[e]=0,e-o}function L(n,t,e){return I(n,V,t,e)}function $(n){for(var t=0,e=0;e<n.length;++e){var r=n.charCodeAt(e);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&n.charCodeAt(++e)),r<=127?++t:t+=r<=2047?2:r<=65535?3:r<=2097151?4:r<=67108863?5:6}return t}function B(n){var t=$(n)+1,e=so(t);return e&&I(n,q,e,t),e}function R(n){return n.replace(/__Z[\w\d_]+/g,(function(n){return n==n?n:n+" ["+n+"]"}))}function Y(){var n=new Error;if(!n.stack){try{throw new Error(0)}catch(t){n=t}if(!n.stack)return"(no stack trace available)"}return n.stack.toString()}function U(){var t=Y();return n.extraStackTrace&&(t+="\n"+n.extraStackTrace()),R(t)}"undefined"!=typeof TextDecoder&&new TextDecoder("utf-16le");var H,q,V,J,X,W,G,K,Z,Q,nn,tn,en,rn,on,an=65536,sn=16777216,un=16777216;function cn(n,t){return n%t>0&&(n+=t-n%t),n}function ln(t){n.buffer=H=t}function fn(){n.HEAP8=q=new Int8Array(H),n.HEAP16=J=new Int16Array(H),n.HEAP32=X=new Int32Array(H),n.HEAPU8=V=new Uint8Array(H),n.HEAPU16=new Uint16Array(H),n.HEAPU32=new Uint32Array(H),n.HEAPF32=W=new Float32Array(H),n.HEAPF64=G=new Float64Array(H)}function dn(){po("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+_n+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which allows increasing the size at runtime, or (3) if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function hn(){var t=n.usingWasm?an:sn,e=2147483648-t;if(X[on>>2]>e)return!1;var r=_n;for(_n=Math.max(_n,un);_n<X[on>>2];)_n=_n<=536870912?cn(2*_n,t):Math.min(cn((3*_n+2147483648)/4,t),e);var o=n.reallocBuffer(_n);return o&&o.byteLength==_n?(ln(o),fn(),!0):(_n=r,!1)}K=Z=nn=tn=en=rn=on=0,Q=!1,n.reallocBuffer||(n.reallocBuffer=function(n){var t;try{var e=q;t=new ArrayBuffer(n),new Int8Array(t).set(e)}catch(n){return!1}return!!io(t)&&t});try{Function.prototype.call.bind(Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get)(new ArrayBuffer(4))}catch(n){}var mn=n.TOTAL_STACK||5242880,_n=n.TOTAL_MEMORY||16777216;function gn(){return _n}function pn(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var r=e.func;"number"==typeof r?void 0===e.arg?n.dynCall_v(r):n.dynCall_vi(r,e.arg):r(void 0===e.arg?null:e.arg)}else e()}}_n<mn&&h("TOTAL_MEMORY should be larger than TOTAL_STACK, was "+_n+"! (TOTAL_STACK="+mn+")"),n.buffer?H=n.buffer:("object"==typeof WebAssembly&&"function"==typeof WebAssembly.Memory?(n.wasmMemory=new WebAssembly.Memory({initial:_n/an}),H=n.wasmMemory.buffer):H=new ArrayBuffer(_n),n.buffer=H),fn();var yn=[],vn=[],wn=[],En=[],Mn=[],xn=!1;function Sn(){if(n.preRun)for("function"==typeof n.preRun&&(n.preRun=[n.preRun]);n.preRun.length;)Nn(n.preRun.shift());pn(yn)}function Dn(){xn||(xn=!0,pn(vn))}function Tn(){pn(wn)}function An(){pn(En)}function Cn(){if(n.postRun)for("function"==typeof n.postRun&&(n.postRun=[n.postRun]);n.postRun.length;)On(n.postRun.shift());pn(Mn)}function Nn(n){yn.unshift(n)}function On(n){Mn.unshift(n)}function jn(n,t){q.set(n,t)}function Fn(n,t,e){for(var r=0;r<n.length;++r)q[t++>>0]=n.charCodeAt(r);e||(q[t>>0]=0)}var zn=Math.abs,Pn=Math.ceil,In=Math.floor,Ln=Math.min,$n=0,Bn=null;function Rn(t){$n++,n.monitorRunDependencies&&n.monitorRunDependencies($n)}function Yn(t){if($n--,n.monitorRunDependencies&&n.monitorRunDependencies($n),0==$n&&Bn){var e=Bn;Bn=null,e()}}n.preloadedImages={},n.preloadedAudios={};var Un="data:application/octet-stream;base64,";function Hn(n){return String.prototype.startsWith?n.startsWith(Un):0===n.indexOf(Un)}function qn(){var t="clingo.wast",e="clingo.wasm",r="clingo.temp.asm.js";Hn(t)||(t=f(t)),Hn(e)||(e=f(e)),Hn(r)||(r=f(r));var a={global:null,env:null,asm2wasm:v,parent:n},s=null;function u(){try{if(n.wasmBinary)return new Uint8Array(n.wasmBinary);if(n.readBinary)return n.readBinary(e);throw"both async and sync fetching of the wasm failed"}catch(n){po(n)}}function c(t,r,c){if("object"!=typeof WebAssembly)return h("no native wasm support detected"),!1;if(!(n.wasmMemory instanceof WebAssembly.Memory))return h("no native wasm Memory in use"),!1;function l(t,e){(s=t.exports).memory&&function(t){var e=n.buffer;t.byteLength<e.byteLength&&h("the new buffer in mergeMemory is smaller than the previous one. in native wasm, we should grow memory here");var r=new Int8Array(e);new Int8Array(t).set(r),ln(t),fn()}(s.memory),n.asm=s,n.usingWasm=!0,Yn()}if(r.memory=n.wasmMemory,a.global={NaN:NaN,Infinity:1/0},a["global.Math"]=Math,a.env=r,Rn(),n.instantiateWasm)try{return n.instantiateWasm(a,l)}catch(n){return h("Module.instantiateWasm callback failed with error: "+n),!1}function f(n){l(n.instance,n.module)}function d(t){(n.wasmBinary||!o&&!i||"function"!=typeof fetch?new Promise((function(n,t){n(u())})):fetch(e,{credentials:"same-origin"}).then((function(n){if(!n.ok)throw"failed to load wasm binary file at '"+e+"'";return n.arrayBuffer()})).catch((function(){return u()}))).then((function(n){return WebAssembly.instantiate(n,a)})).then(t).catch((function(n){h("failed to asynchronously prepare wasm: "+n),po(n)}))}return n.wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||Hn(e)||"function"!=typeof fetch?d(f):WebAssembly.instantiateStreaming(fetch(e,{credentials:"same-origin"}),a).then(f).catch((function(n){h("wasm streaming compile failed: "+n),h("falling back to ArrayBuffer instantiation"),d(f)})),{}}n.asmPreload=n.asm,n.reallocBuffer,n.reallocBuffer=function(t){return function(t){t=cn(t,n.usingWasm?an:sn);var e=n.buffer.byteLength;if(n.usingWasm)try{return-1!==n.wasmMemory.grow((t-e)/65536)?n.buffer=n.wasmMemory.buffer:null}catch(n){return null}}(t)},n.asm=function(t,e,r){if(!(e=e).table){var o=n.wasmTableSize;void 0===o&&(o=1024);var i=n.wasmMaxTableSize;"object"==typeof WebAssembly&&"function"==typeof WebAssembly.Table?e.table=void 0!==i?new WebAssembly.Table({initial:o,maximum:i,element:"anyfunc"}):new WebAssembly.Table({initial:o,element:"anyfunc"}):e.table=new Array(o),n.wasmTable=e.table}var a;return e.memoryBase||(e.memoryBase=n.STATIC_BASE),e.tableBase||(e.tableBase=0),b(a=c(0,e),"no binaryen method succeeded."),a}}qn(),Z=(K=w)+204768,vn.push({func:function(){Or()}},{func:function(){Jr()}},{func:function(){Gr()}},{func:function(){Kr()}},{func:function(){Zr()}},{func:function(){Qr()}},{func:function(){zr()}},{func:function(){jr()}},{func:function(){Fr()}},{func:function(){Yr()}},{func:function(){Wr()}},{func:function(){Ir()}},{func:function(){Lr()}},{func:function(){$r()}},{func:function(){Xr()}},{func:function(){no()}},{func:function(){Ur()}},{func:function(){Hr()}},{func:function(){qr()}},{func:function(){Vr()}},{func:function(){Br()}},{func:function(){to()}},{func:function(){Pr()}});var Vn=204768;n.STATIC_BASE=K,n.STATIC_BUMP=Vn;var Jn=Z;function Xn(n){go(n)}function Wn(n){Xn(n)}function Gn(n){Xn(n)}Z+=16;var Kn={};function Zn(t){var e,r;Zn.called?(r=X[t>>2],e=X[r>>2]):(Zn.called=!0,Kn.USER=Kn.LOGNAME="web_user",Kn.PATH="/",Kn.PWD="/",Kn.HOME="/home/web_user",Kn.LANG="C.UTF-8",Kn._=n.thisProgram,e=O(1024),r=O(256),X[r>>2]=e,X[t>>2]=r);var o=[],i=0;for(var a in Kn)if("string"==typeof Kn[a]){var s=a+"="+Kn[a];o.push(s),i+=s.length}if(i>1024)throw new Error("Environment size exceeded TOTAL_ENV_SIZE!");for(var u=0;u<o.length;u++)Fn(s=o[u],e),X[r+4*u>>2]=e,e+=s.length+1;X[r+4*o.length>>2]=0}function Qn(){po()}function nt(){return a||"undefined"!=typeof dateNow||(o||i)&&self.performance&&self.performance.now}var tt={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function et(t){return n.___errno_location&&(X[n.___errno_location()>>2]=t),t}function rt(n,t){var e;if(0===n)e=Date.now();else{if(1!==n||!nt())return et(tt.EINVAL),-1;e=Qn()}return X[t>>2]=e/1e3|0,X[t+4>>2]=e%1e3*1e3*1e3|0,0}function ot(){return rt.apply(null,arguments)}function it(n){return so(n)}var at={last:0,caught:[],infos:{},deAdjust:function(n){if(!n||at.infos[n])return n;for(var t in at.infos){var e=+t;if(at.infos[e].adjusted===n)return e}return n},addRef:function(n){n&&at.infos[n].refcount++},decRef:function(t){if(t){var e=at.infos[t];b(e.refcount>0),e.refcount--,0!==e.refcount||e.rethrown||(e.destructor&&n.dynCall_vi(e.destructor,t),delete at.infos[t],dt(t))}},clearRef:function(n){n&&(at.infos[n].refcount=0)}};function st(n){var t=at.infos[n];return t&&!t.caught&&(t.caught=!0,Rr.uncaught_exception--),t&&(t.rethrown=!1),at.caught.push(n),at.addRef(at.deAdjust(n)),n}function ut(){var n=at.caught[at.caught.length-1]||0;return n&&at.addRef(at.deAdjust(n)),n}function ct(n){at.decRef(at.deAdjust(n))}function lt(n){at.addRef(at.deAdjust(n))}function ft(){throw E=!0,"Pure virtual function called!"}function dt(n){try{return ao(n)}catch(n){}}function ht(){n.setThrew(0);var t=at.caught.pop();t&&(at.decRef(at.deAdjust(t)),at.last=0)}function mt(){var n=at.caught.pop();throw n=at.deAdjust(n),at.infos[n].rethrown||(at.caught.push(n),at.infos[n].rethrown=!0),at.last=n,n+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function _t(n){n&&(at.caught.push(n),at.infos[n].rethrown=!0,mt())}function gt(n){throw at.last||(at.last=n),n+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function pt(){var t=at.last;if(!t)return 0|(co(0),0);var e=at.infos[t],r=e.type;if(!r)return 0|(co(0),t);var o=Array.prototype.slice.call(arguments);n.___cxa_is_pointer_type(r),pt.buffer||(pt.buffer=so(4)),X[pt.buffer>>2]=t,t=pt.buffer;for(var i=0;i<o.length;i++)if(o[i]&&n.___cxa_can_catch(o[i],r,t))return t=X[t>>2],e.adjusted=t,0|(co(o[i]),t);return t=X[t>>2],0|(co(r),t)}function yt(n,t,e){throw at.infos[n]={ptr:n,adjusted:n,type:t,destructor:e,refcount:0,caught:!1,rethrown:!1},at.last=n,"uncaught_exception"in Rr?Rr.uncaught_exception++:Rr.uncaught_exception=1,n+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function vt(){return!!Rr.uncaught_exception}function wt(){}function Et(){}function bt(n,t){return et(tt.EPERM),-1}var kt={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},Mt={splitPath:function(n){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(n).slice(1)},normalizeArray:function(n,t){for(var e=0,r=n.length-1;r>=0;r--){var o=n[r];"."===o?n.splice(r,1):".."===o?(n.splice(r,1),e++):e&&(n.splice(r,1),e--)}if(t)for(;e;e--)n.unshift("..");return n},normalize:function(n){var t="/"===n.charAt(0),e="/"===n.substr(-1);return(n=Mt.normalizeArray(n.split("/").filter((function(n){return!!n})),!t).join("/"))||t||(n="."),n&&e&&(n+="/"),(t?"/":"")+n},dirname:function(n){var t=Mt.splitPath(n),e=t[0],r=t[1];return e||r?(r&&(r=r.substr(0,r.length-1)),e+r):"."},basename:function(n){if("/"===n)return"/";var t=n.lastIndexOf("/");return-1===t?n:n.substr(t+1)},extname:function(n){return Mt.splitPath(n)[3]},join:function(){var n=Array.prototype.slice.call(arguments,0);return Mt.normalize(n.join("/"))},join2:function(n,t){return Mt.normalize(n+"/"+t)},resolve:function(){for(var n="",t=!1,e=arguments.length-1;e>=-1&&!t;e--){var r=e>=0?arguments[e]:Ct.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,t="/"===r.charAt(0)}return(t?"/":"")+(n=Mt.normalizeArray(n.split("/").filter((function(n){return!!n})),!t).join("/"))||"."},relative:function(n,t){function e(n){for(var t=0;t<n.length&&""===n[t];t++);for(var e=n.length-1;e>=0&&""===n[e];e--);return t>e?[]:n.slice(t,e-t+1)}n=Mt.resolve(n).substr(1),t=Mt.resolve(t).substr(1);for(var r=e(n.split("/")),o=e(t.split("/")),i=Math.min(r.length,o.length),a=i,s=0;s<i;s++)if(r[s]!==o[s]){a=s;break}var u=[];for(s=a;s<r.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},xt={ttys:[],init:function(){},shutdown:function(){},register:function(n,t){xt.ttys[n]={input:[],output:[],ops:t},Ct.registerDevice(n,xt.stream_ops)},stream_ops:{open:function(n){var t=xt.ttys[n.node.rdev];if(!t)throw new Ct.ErrnoError(tt.ENODEV);n.tty=t,n.seekable=!1},close:function(n){n.tty.ops.flush(n.tty)},flush:function(n){n.tty.ops.flush(n.tty)},read:function(n,t,e,r,o){if(!n.tty||!n.tty.ops.get_char)throw new Ct.ErrnoError(tt.ENXIO);for(var i=0,a=0;a<r;a++){var s;try{s=n.tty.ops.get_char(n.tty)}catch(n){throw new Ct.ErrnoError(tt.EIO)}if(void 0===s&&0===i)throw new Ct.ErrnoError(tt.EAGAIN);if(null==s)break;i++,t[e+a]=s}return i&&(n.node.timestamp=Date.now()),i},write:function(n,t,e,r,o){if(!n.tty||!n.tty.ops.put_char)throw new Ct.ErrnoError(tt.ENXIO);for(var i=0;i<r;i++)try{n.tty.ops.put_char(n.tty,t[e+i])}catch(n){throw new Ct.ErrnoError(tt.EIO)}return r&&(n.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(n){if(!n.input.length){var t=null;if(a){var e=new Buffer(256),r=0,o="win32"!=process.platform,i=process.stdin.fd;if(o){var s=!1;try{i=Re.openSync("/dev/stdin","r"),s=!0}catch(n){}}try{r=Re.readSync(i,e,0,256,null)}catch(n){if(-1==n.toString().indexOf("EOF"))throw n;r=0}s&&Re.closeSync(i),t=r>0?e.slice(0,r).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;n.input=Ue(t,!0)}return n.input.shift()},put_char:function(n,t){null===t||10===t?(d(z(n.output,0)),n.output=[]):0!=t&&n.output.push(t)},flush:function(n){n.output&&n.output.length>0&&(d(z(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,t){null===t||10===t?(h(z(n.output,0)),n.output=[]):0!=t&&n.output.push(t)},flush:function(n){n.output&&n.output.length>0&&(h(z(n.output,0)),n.output=[])}}},St={ops_table:null,mount:function(n){return St.createNode(null,"/",16895,0)},createNode:function(n,t,e,r){if(Ct.isBlkdev(e)||Ct.isFIFO(e))throw new Ct.ErrnoError(tt.EPERM);St.ops_table||(St.ops_table={dir:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr,lookup:St.node_ops.lookup,mknod:St.node_ops.mknod,rename:St.node_ops.rename,unlink:St.node_ops.unlink,rmdir:St.node_ops.rmdir,readdir:St.node_ops.readdir,symlink:St.node_ops.symlink},stream:{llseek:St.stream_ops.llseek}},file:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr},stream:{llseek:St.stream_ops.llseek,read:St.stream_ops.read,write:St.stream_ops.write,allocate:St.stream_ops.allocate,mmap:St.stream_ops.mmap,msync:St.stream_ops.msync}},link:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr,readlink:St.node_ops.readlink},stream:{}},chrdev:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr},stream:Ct.chrdev_stream_ops}});var o=Ct.createNode(n,t,e,r);return Ct.isDir(o.mode)?(o.node_ops=St.ops_table.dir.node,o.stream_ops=St.ops_table.dir.stream,o.contents={}):Ct.isFile(o.mode)?(o.node_ops=St.ops_table.file.node,o.stream_ops=St.ops_table.file.stream,o.usedBytes=0,o.contents=null):Ct.isLink(o.mode)?(o.node_ops=St.ops_table.link.node,o.stream_ops=St.ops_table.link.stream):Ct.isChrdev(o.mode)&&(o.node_ops=St.ops_table.chrdev.node,o.stream_ops=St.ops_table.chrdev.stream),o.timestamp=Date.now(),n&&(n.contents[t]=o),o},getFileDataAsRegularArray:function(n){if(n.contents&&n.contents.subarray){for(var t=[],e=0;e<n.usedBytes;++e)t.push(n.contents[e]);return t}return n.contents},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array},expandFileStorage:function(n,t){if(n.contents&&n.contents.subarray&&t>n.contents.length&&(n.contents=St.getFileDataAsRegularArray(n),n.usedBytes=n.contents.length),!n.contents||n.contents.subarray){var e=n.contents?n.contents.length:0;if(e>=t)return;t=Math.max(t,e*(e<1048576?2:1.125)|0),0!=e&&(t=Math.max(t,256));var r=n.contents;return n.contents=new Uint8Array(t),void(n.usedBytes>0&&n.contents.set(r.subarray(0,n.usedBytes),0))}for(!n.contents&&t>0&&(n.contents=[]);n.contents.length<t;)n.contents.push(0)},resizeFileStorage:function(n,t){if(n.usedBytes!=t){if(0==t)return n.contents=null,void(n.usedBytes=0);if(!n.contents||n.contents.subarray){var e=n.contents;return n.contents=new Uint8Array(new ArrayBuffer(t)),e&&n.contents.set(e.subarray(0,Math.min(t,n.usedBytes))),void(n.usedBytes=t)}if(n.contents||(n.contents=[]),n.contents.length>t)n.contents.length=t;else for(;n.contents.length<t;)n.contents.push(0);n.usedBytes=t}},node_ops:{getattr:function(n){var t={};return t.dev=Ct.isChrdev(n.mode)?n.id:1,t.ino=n.id,t.mode=n.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=n.rdev,Ct.isDir(n.mode)?t.size=4096:Ct.isFile(n.mode)?t.size=n.usedBytes:Ct.isLink(n.mode)?t.size=n.link.length:t.size=0,t.atime=new Date(n.timestamp),t.mtime=new Date(n.timestamp),t.ctime=new Date(n.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(n,t){void 0!==t.mode&&(n.mode=t.mode),void 0!==t.timestamp&&(n.timestamp=t.timestamp),void 0!==t.size&&St.resizeFileStorage(n,t.size)},lookup:function(n,t){throw Ct.genericErrors[tt.ENOENT]},mknod:function(n,t,e,r){return St.createNode(n,t,e,r)},rename:function(n,t,e){if(Ct.isDir(n.mode)){var r;try{r=Ct.lookupNode(t,e)}catch(n){}if(r)for(var o in r.contents)throw new Ct.ErrnoError(tt.ENOTEMPTY)}delete n.parent.contents[n.name],n.name=e,t.contents[e]=n,n.parent=t},unlink:function(n,t){delete n.contents[t]},rmdir:function(n,t){var e=Ct.lookupNode(n,t);for(var r in e.contents)throw new Ct.ErrnoError(tt.ENOTEMPTY);delete n.contents[t]},readdir:function(n){var t=[".",".."];for(var e in n.contents)n.contents.hasOwnProperty(e)&&t.push(e);return t},symlink:function(n,t,e){var r=St.createNode(n,t,41471,0);return r.link=e,r},readlink:function(n){if(!Ct.isLink(n.mode))throw new Ct.ErrnoError(tt.EINVAL);return n.link}},stream_ops:{read:function(n,t,e,r,o){var i=n.node.contents;if(o>=n.node.usedBytes)return 0;var a=Math.min(n.node.usedBytes-o,r);if(b(a>=0),a>8&&i.subarray)t.set(i.subarray(o,o+a),e);else for(var s=0;s<a;s++)t[e+s]=i[o+s];return a},write:function(n,t,e,r,o,i){if(!r)return 0;var a=n.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return a.contents=t.subarray(e,e+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===o)return a.contents=new Uint8Array(t.subarray(e,e+r)),a.usedBytes=r,r;if(o+r<=a.usedBytes)return a.contents.set(t.subarray(e,e+r),o),r}if(St.expandFileStorage(a,o+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(e,e+r),o);else for(var s=0;s<r;s++)a.contents[o+s]=t[e+s];return a.usedBytes=Math.max(a.usedBytes,o+r),r},llseek:function(n,t,e){var r=t;if(1===e?r+=n.position:2===e&&Ct.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new Ct.ErrnoError(tt.EINVAL);return r},allocate:function(n,t,e){St.expandFileStorage(n.node,t+e),n.node.usedBytes=Math.max(n.node.usedBytes,t+e)},mmap:function(n,t,e,r,o,i,a){if(!Ct.isFile(n.node.mode))throw new Ct.ErrnoError(tt.ENODEV);var s,u,c=n.node.contents;if(2&a||c.buffer!==t&&c.buffer!==t.buffer){if((o>0||o+r<n.node.usedBytes)&&(c=c.subarray?c.subarray(o,o+r):Array.prototype.slice.call(c,o,o+r)),u=!0,!(s=so(r)))throw new Ct.ErrnoError(tt.ENOMEM);t.set(c,s)}else u=!1,s=c.byteOffset;return{ptr:s,allocated:u}},msync:function(n,t,e,r,o){if(!Ct.isFile(n.node.mode))throw new Ct.ErrnoError(tt.ENODEV);return 2&o||St.stream_ops.write(n,t,0,r,e,!1),0}}},Dt={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var n=null;return"object"==typeof window&&(n=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),b(n,"IDBFS used, but indexedDB not supported"),n},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(n){return St.mount.apply(null,arguments)},syncfs:function(n,t,e){Dt.getLocalSet(n,(function(r,o){if(r)return e(r);Dt.getRemoteSet(n,(function(n,r){if(n)return e(n);var i=t?r:o,a=t?o:r;Dt.reconcile(i,a,e)}))}))},getDB:function(n,t){var e,r=Dt.dbs[n];if(r)return t(null,r);try{e=Dt.indexedDB().open(n,Dt.DB_VERSION)}catch(n){return t(n)}if(!e)return t("Unable to connect to IndexedDB");e.onupgradeneeded=function(n){var t,e=n.target.result,r=n.target.transaction;(t=e.objectStoreNames.contains(Dt.DB_STORE_NAME)?r.objectStore(Dt.DB_STORE_NAME):e.createObjectStore(Dt.DB_STORE_NAME)).indexNames.contains("timestamp")||t.createIndex("timestamp","timestamp",{unique:!1})},e.onsuccess=function(){r=e.result,Dt.dbs[n]=r,t(null,r)},e.onerror=function(n){t(this.error),n.preventDefault()}},getLocalSet:function(n,t){var e={};function r(n){return"."!==n&&".."!==n}function o(n){return function(t){return Mt.join2(n,t)}}for(var i=Ct.readdir(n.mountpoint).filter(r).map(o(n.mountpoint));i.length;){var a,s=i.pop();try{a=Ct.stat(s)}catch(n){return t(n)}Ct.isDir(a.mode)&&i.push.apply(i,Ct.readdir(s).filter(r).map(o(s))),e[s]={timestamp:a.mtime}}return t(null,{type:"local",entries:e})},getRemoteSet:function(n,t){var e={};Dt.getDB(n.mountpoint,(function(n,r){if(n)return t(n);try{var o=r.transaction([Dt.DB_STORE_NAME],"readonly");o.onerror=function(n){t(this.error),n.preventDefault()},o.objectStore(Dt.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(n){var o=n.target.result;if(!o)return t(null,{type:"remote",db:r,entries:e});e[o.primaryKey]={timestamp:o.key},o.continue()}}catch(n){return t(n)}}))},loadLocalEntry:function(n,t){var e,r;try{r=Ct.lookupPath(n).node,e=Ct.stat(n)}catch(n){return t(n)}return Ct.isDir(e.mode)?t(null,{timestamp:e.mtime,mode:e.mode}):Ct.isFile(e.mode)?(r.contents=St.getFileDataAsTypedArray(r),t(null,{timestamp:e.mtime,mode:e.mode,contents:r.contents})):t(new Error("node type not supported"))},storeLocalEntry:function(n,t,e){try{if(Ct.isDir(t.mode))Ct.mkdir(n,t.mode);else{if(!Ct.isFile(t.mode))return e(new Error("node type not supported"));Ct.writeFile(n,t.contents,{canOwn:!0})}Ct.chmod(n,t.mode),Ct.utime(n,t.timestamp,t.timestamp)}catch(n){return e(n)}e(null)},removeLocalEntry:function(n,t){try{Ct.lookupPath(n);var e=Ct.stat(n);Ct.isDir(e.mode)?Ct.rmdir(n):Ct.isFile(e.mode)&&Ct.unlink(n)}catch(n){return t(n)}t(null)},loadRemoteEntry:function(n,t,e){var r=n.get(t);r.onsuccess=function(n){e(null,n.target.result)},r.onerror=function(n){e(this.error),n.preventDefault()}},storeRemoteEntry:function(n,t,e,r){var o=n.put(e,t);o.onsuccess=function(){r(null)},o.onerror=function(n){r(this.error),n.preventDefault()}},removeRemoteEntry:function(n,t,e){var r=n.delete(t);r.onsuccess=function(){e(null)},r.onerror=function(n){e(this.error),n.preventDefault()}},reconcile:function(n,t,e){var r=0,o=[];Object.keys(n.entries).forEach((function(e){var i=n.entries[e],a=t.entries[e];(!a||i.timestamp>a.timestamp)&&(o.push(e),r++)}));var i=[];if(Object.keys(t.entries).forEach((function(e){t.entries[e],n.entries[e]||(i.push(e),r++)})),!r)return e(null);var a=0,s=("remote"===n.type?n.db:t.db).transaction([Dt.DB_STORE_NAME],"readwrite"),u=s.objectStore(Dt.DB_STORE_NAME);function c(n){return n?c.errored?void 0:(c.errored=!0,e(n)):++a>=r?e(null):void 0}s.onerror=function(n){c(this.error),n.preventDefault()},o.sort().forEach((function(n){"local"===t.type?Dt.loadRemoteEntry(u,n,(function(t,e){if(t)return c(t);Dt.storeLocalEntry(n,e,c)})):Dt.loadLocalEntry(n,(function(t,e){if(t)return c(t);Dt.storeRemoteEntry(u,n,e,c)}))})),i.sort().reverse().forEach((function(n){"local"===t.type?Dt.removeLocalEntry(n,c):Dt.removeRemoteEntry(u,n,c)}))}},Tt={isWindows:!1,staticInit:function(){Tt.isWindows=!!process.platform.match(/^win/);var n=process.binding("constants");n.fs&&(n=n.fs),Tt.flagsForNodeMap={1024:n.O_APPEND,64:n.O_CREAT,128:n.O_EXCL,0:n.O_RDONLY,2:n.O_RDWR,4096:n.O_SYNC,512:n.O_TRUNC,1:n.O_WRONLY}},bufferFrom:function(n){return Buffer.alloc?Buffer.from(n):new Buffer(n)},mount:function(n){return b(a),Tt.createNode(null,"/",Tt.getMode(n.opts.root),0)},createNode:function(n,t,e,r){if(!Ct.isDir(e)&&!Ct.isFile(e)&&!Ct.isLink(e))throw new Ct.ErrnoError(tt.EINVAL);var o=Ct.createNode(n,t,e);return o.node_ops=Tt.node_ops,o.stream_ops=Tt.stream_ops,o},getMode:function(n){var t;try{t=Re.lstatSync(n),Tt.isWindows&&(t.mode=t.mode|(292&t.mode)>>2)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}return t.mode},realPath:function(n){for(var t=[];n.parent!==n;)t.push(n.name),n=n.parent;return t.push(n.mount.opts.root),t.reverse(),Mt.join.apply(null,t)},flagsForNode:function(n){n&=-2097153,n&=-2049,n&=-32769,n&=-524289;var t=0;for(var e in Tt.flagsForNodeMap)n&e&&(t|=Tt.flagsForNodeMap[e],n^=e);if(n)throw new Ct.ErrnoError(tt.EINVAL);return t},node_ops:{getattr:function(n){var t,e=Tt.realPath(n);try{t=Re.lstatSync(e)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}return Tt.isWindows&&!t.blksize&&(t.blksize=4096),Tt.isWindows&&!t.blocks&&(t.blocks=(t.size+t.blksize-1)/t.blksize|0),{dev:t.dev,ino:t.ino,mode:t.mode,nlink:t.nlink,uid:t.uid,gid:t.gid,rdev:t.rdev,size:t.size,atime:t.atime,mtime:t.mtime,ctime:t.ctime,blksize:t.blksize,blocks:t.blocks}},setattr:function(n,t){var e=Tt.realPath(n);try{if(void 0!==t.mode&&(Re.chmodSync(e,t.mode),n.mode=t.mode),void 0!==t.timestamp){var r=new Date(t.timestamp);Re.utimesSync(e,r,r)}void 0!==t.size&&Re.truncateSync(e,t.size)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},lookup:function(n,t){var e=Mt.join2(Tt.realPath(n),t),r=Tt.getMode(e);return Tt.createNode(n,t,r)},mknod:function(n,t,e,r){var o=Tt.createNode(n,t,e,r),i=Tt.realPath(o);try{Ct.isDir(o.mode)?Re.mkdirSync(i,o.mode):Re.writeFileSync(i,"",{mode:o.mode})}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}return o},rename:function(n,t,e){var r=Tt.realPath(n),o=Mt.join2(Tt.realPath(t),e);try{Re.renameSync(r,o)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},unlink:function(n,t){var e=Mt.join2(Tt.realPath(n),t);try{Re.unlinkSync(e)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},rmdir:function(n,t){var e=Mt.join2(Tt.realPath(n),t);try{Re.rmdirSync(e)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},readdir:function(n){var t=Tt.realPath(n);try{return Re.readdirSync(t)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},symlink:function(n,t,e){var r=Mt.join2(Tt.realPath(n),t);try{Re.symlinkSync(e,r)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},readlink:function(n){var t=Tt.realPath(n);try{return t=Re.readlinkSync(t),t=Ye.relative(Ye.resolve(n.mount.opts.root),t)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}}},stream_ops:{open:function(n){var t=Tt.realPath(n.node);try{Ct.isFile(n.node.mode)&&(n.nfd=Re.openSync(t,Tt.flagsForNode(n.flags)))}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},close:function(n){try{Ct.isFile(n.node.mode)&&n.nfd&&Re.closeSync(n.nfd)}catch(n){if(!n.code)throw n;throw new Ct.ErrnoError(tt[n.code])}},read:function(n,t,e,r,o){if(0===r)return 0;try{return Re.readSync(n.nfd,Tt.bufferFrom(t.buffer),e,r,o)}catch(n){throw new Ct.ErrnoError(tt[n.code])}},write:function(n,t,e,r,o){try{return Re.writeSync(n.nfd,Tt.bufferFrom(t.buffer),e,r,o)}catch(n){throw new Ct.ErrnoError(tt[n.code])}},llseek:function(n,t,e){var r=t;if(1===e)r+=n.position;else if(2===e&&Ct.isFile(n.node.mode))try{r+=Re.fstatSync(n.nfd).size}catch(n){throw new Ct.ErrnoError(tt[n.code])}if(r<0)throw new Ct.ErrnoError(tt.EINVAL);return r}}},At={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(n){b(i),At.reader||(At.reader=new FileReaderSync);var t=At.createNode(null,"/",At.DIR_MODE,0),e={};function r(n){for(var r=n.split("/"),o=t,i=0;i<r.length-1;i++){var a=r.slice(0,i+1).join("/");e[a]||(e[a]=At.createNode(o,r[i],At.DIR_MODE,0)),o=e[a]}return o}function o(n){var t=n.split("/");return t[t.length-1]}return Array.prototype.forEach.call(n.opts.files||[],(function(n){At.createNode(r(n.name),o(n.name),At.FILE_MODE,0,n,n.lastModifiedDate)})),(n.opts.blobs||[]).forEach((function(n){At.createNode(r(n.name),o(n.name),At.FILE_MODE,0,n.data)})),(n.opts.packages||[]).forEach((function(n){n.metadata.files.forEach((function(t){var e=t.filename.substr(1);At.createNode(r(e),o(e),At.FILE_MODE,0,n.blob.slice(t.start,t.end))}))})),t},createNode:function(n,t,e,r,o,i){var a=Ct.createNode(n,t,e);return a.mode=e,a.node_ops=At.node_ops,a.stream_ops=At.stream_ops,a.timestamp=(i||new Date).getTime(),b(At.FILE_MODE!==At.DIR_MODE),e===At.FILE_MODE?(a.size=o.size,a.contents=o):(a.size=4096,a.contents={}),n&&(n.contents[t]=a),a},node_ops:{getattr:function(n){return{dev:1,ino:void 0,mode:n.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:n.size,atime:new Date(n.timestamp),mtime:new Date(n.timestamp),ctime:new Date(n.timestamp),blksize:4096,blocks:Math.ceil(n.size/4096)}},setattr:function(n,t){void 0!==t.mode&&(n.mode=t.mode),void 0!==t.timestamp&&(n.timestamp=t.timestamp)},lookup:function(n,t){throw new Ct.ErrnoError(tt.ENOENT)},mknod:function(n,t,e,r){throw new Ct.ErrnoError(tt.EPERM)},rename:function(n,t,e){throw new Ct.ErrnoError(tt.EPERM)},unlink:function(n,t){throw new Ct.ErrnoError(tt.EPERM)},rmdir:function(n,t){throw new Ct.ErrnoError(tt.EPERM)},readdir:function(n){var t=[".",".."];for(var e in n.contents)n.contents.hasOwnProperty(e)&&t.push(e);return t},symlink:function(n,t,e){throw new Ct.ErrnoError(tt.EPERM)},readlink:function(n){throw new Ct.ErrnoError(tt.EPERM)}},stream_ops:{read:function(n,t,e,r,o){if(o>=n.node.size)return 0;var i=n.node.contents.slice(o,o+r),a=At.reader.readAsArrayBuffer(i);return t.set(new Uint8Array(a),e),i.size},write:function(n,t,e,r,o){throw new Ct.ErrnoError(tt.EIO)},llseek:function(n,t,e){var r=t;if(1===e?r+=n.position:2===e&&Ct.isFile(n.node.mode)&&(r+=n.node.size),r<0)throw new Ct.ErrnoError(tt.EINVAL);return r}}};Z+=16,Z+=16;var Ct={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,handleFSError:function(n){if(!(n instanceof Ct.ErrnoError))throw n+" : "+U();return et(n.errno)},lookupPath:function(n,t){if(t=t||{},!(n=Mt.resolve(Ct.cwd(),n)))return{path:"",node:null};var e={follow_mount:!0,recurse_count:0};for(var r in e)void 0===t[r]&&(t[r]=e[r]);if(t.recurse_count>8)throw new Ct.ErrnoError(tt.ELOOP);for(var o=Mt.normalizeArray(n.split("/").filter((function(n){return!!n})),!1),i=Ct.root,a="/",s=0;s<o.length;s++){var u=s===o.length-1;if(u&&t.parent)break;if(i=Ct.lookupNode(i,o[s]),a=Mt.join2(a,o[s]),Ct.isMountpoint(i)&&(!u||u&&t.follow_mount)&&(i=i.mounted.root),!u||t.follow)for(var c=0;Ct.isLink(i.mode);){var l=Ct.readlink(a);if(a=Mt.resolve(Mt.dirname(a),l),i=Ct.lookupPath(a,{recurse_count:t.recurse_count}).node,c++>40)throw new Ct.ErrnoError(tt.ELOOP)}}return{path:a,node:i}},getPath:function(n){for(var t;;){if(Ct.isRoot(n)){var e=n.mount.mountpoint;return t?"/"!==e[e.length-1]?e+"/"+t:e+t:e}t=t?n.name+"/"+t:n.name,n=n.parent}},hashName:function(n,t){for(var e=0,r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r)|0;return(n+e>>>0)%Ct.nameTable.length},hashAddNode:function(n){var t=Ct.hashName(n.parent.id,n.name);n.name_next=Ct.nameTable[t],Ct.nameTable[t]=n},hashRemoveNode:function(n){var t=Ct.hashName(n.parent.id,n.name);if(Ct.nameTable[t]===n)Ct.nameTable[t]=n.name_next;else for(var e=Ct.nameTable[t];e;){if(e.name_next===n){e.name_next=n.name_next;break}e=e.name_next}},lookupNode:function(n,t){var e=Ct.mayLookup(n);if(e)throw new Ct.ErrnoError(e,n);for(var r=Ct.hashName(n.id,t),o=Ct.nameTable[r];o;o=o.name_next){var i=o.name;if(o.parent.id===n.id&&i===t)return o}return Ct.lookup(n,t)},createNode:function(n,t,e,r){Ct.FSNode||(Ct.FSNode=function(n,t,e,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=Ct.nextInode++,this.name=t,this.mode=e,this.node_ops={},this.stream_ops={},this.rdev=r},Ct.FSNode.prototype={},Object.defineProperties(Ct.FSNode.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(n){n?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(n){n?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return Ct.isDir(this.mode)}},isDevice:{get:function(){return Ct.isChrdev(this.mode)}}}));var o=new Ct.FSNode(n,t,e,r);return Ct.hashAddNode(o),o},destroyNode:function(n){Ct.hashRemoveNode(n)},isRoot:function(n){return n===n.parent},isMountpoint:function(n){return!!n.mounted},isFile:function(n){return 32768==(61440&n)},isDir:function(n){return 16384==(61440&n)},isLink:function(n){return 40960==(61440&n)},isChrdev:function(n){return 8192==(61440&n)},isBlkdev:function(n){return 24576==(61440&n)},isFIFO:function(n){return 4096==(61440&n)},isSocket:function(n){return 49152==(49152&n)},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(n){var t=Ct.flagModes[n];if(void 0===t)throw new Error("Unknown file open mode: "+n);return t},flagsToPermissionString:function(n){var t=["r","w","rw"][3&n];return 512&n&&(t+="w"),t},nodePermissions:function(n,t){return Ct.ignorePermissions||(-1===t.indexOf("r")||292&n.mode)&&(-1===t.indexOf("w")||146&n.mode)&&(-1===t.indexOf("x")||73&n.mode)?0:tt.EACCES},mayLookup:function(n){var t=Ct.nodePermissions(n,"x");return t||(n.node_ops.lookup?0:tt.EACCES)},mayCreate:function(n,t){try{return Ct.lookupNode(n,t),tt.EEXIST}catch(n){}return Ct.nodePermissions(n,"wx")},mayDelete:function(n,t,e){var r;try{r=Ct.lookupNode(n,t)}catch(n){return n.errno}var o=Ct.nodePermissions(n,"wx");if(o)return o;if(e){if(!Ct.isDir(r.mode))return tt.ENOTDIR;if(Ct.isRoot(r)||Ct.getPath(r)===Ct.cwd())return tt.EBUSY}else if(Ct.isDir(r.mode))return tt.EISDIR;return 0},mayOpen:function(n,t){return n?Ct.isLink(n.mode)?tt.ELOOP:Ct.isDir(n.mode)&&("r"!==Ct.flagsToPermissionString(t)||512&t)?tt.EISDIR:Ct.nodePermissions(n,Ct.flagsToPermissionString(t)):tt.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(n,t){n=n||0,t=t||Ct.MAX_OPEN_FDS;for(var e=n;e<=t;e++)if(!Ct.streams[e])return e;throw new Ct.ErrnoError(tt.EMFILE)},getStream:function(n){return Ct.streams[n]},createStream:function(n,t,e){Ct.FSStream||(Ct.FSStream=function(){},Ct.FSStream.prototype={},Object.defineProperties(Ct.FSStream.prototype,{object:{get:function(){return this.node},set:function(n){this.node=n}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}}));var r=new Ct.FSStream;for(var o in n)r[o]=n[o];n=r;var i=Ct.nextfd(t,e);return n.fd=i,Ct.streams[i]=n,n},closeStream:function(n){Ct.streams[n]=null},chrdev_stream_ops:{open:function(n){var t=Ct.getDevice(n.node.rdev);n.stream_ops=t.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:function(){throw new Ct.ErrnoError(tt.ESPIPE)}},major:function(n){return n>>8},minor:function(n){return 255&n},makedev:function(n,t){return n<<8|t},registerDevice:function(n,t){Ct.devices[n]={stream_ops:t}},getDevice:function(n){return Ct.devices[n]},getMounts:function(n){for(var t=[],e=[n];e.length;){var r=e.pop();t.push(r),e.push.apply(e,r.mounts)}return t},syncfs:function(n,t){"function"==typeof n&&(t=n,n=!1),Ct.syncFSRequests++,Ct.syncFSRequests>1&&console.log("warning: "+Ct.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var e=Ct.getMounts(Ct.root.mount),r=0;function o(n){return b(Ct.syncFSRequests>0),Ct.syncFSRequests--,t(n)}function i(n){if(n)return i.errored?void 0:(i.errored=!0,o(n));++r>=e.length&&o(null)}e.forEach((function(t){if(!t.type.syncfs)return i(null);t.type.syncfs(t,n,i)}))},mount:function(n,t,e){var r,o="/"===e,i=!e;if(o&&Ct.root)throw new Ct.ErrnoError(tt.EBUSY);if(!o&&!i){var a=Ct.lookupPath(e,{follow_mount:!1});if(e=a.path,r=a.node,Ct.isMountpoint(r))throw new Ct.ErrnoError(tt.EBUSY);if(!Ct.isDir(r.mode))throw new Ct.ErrnoError(tt.ENOTDIR)}var s={type:n,opts:t,mountpoint:e,mounts:[]},u=n.mount(s);return u.mount=s,s.root=u,o?Ct.root=u:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),u},unmount:function(n){var t=Ct.lookupPath(n,{follow_mount:!1});if(!Ct.isMountpoint(t.node))throw new Ct.ErrnoError(tt.EINVAL);var e=t.node,r=e.mounted,o=Ct.getMounts(r);Object.keys(Ct.nameTable).forEach((function(n){for(var t=Ct.nameTable[n];t;){var e=t.name_next;-1!==o.indexOf(t.mount)&&Ct.destroyNode(t),t=e}})),e.mounted=null;var i=e.mount.mounts.indexOf(r);b(-1!==i),e.mount.mounts.splice(i,1)},lookup:function(n,t){return n.node_ops.lookup(n,t)},mknod:function(n,t,e){var r=Ct.lookupPath(n,{parent:!0}).node,o=Mt.basename(n);if(!o||"."===o||".."===o)throw new Ct.ErrnoError(tt.EINVAL);var i=Ct.mayCreate(r,o);if(i)throw new Ct.ErrnoError(i);if(!r.node_ops.mknod)throw new Ct.ErrnoError(tt.EPERM);return r.node_ops.mknod(r,o,t,e)},create:function(n,t){return t=void 0!==t?t:438,t&=4095,t|=32768,Ct.mknod(n,t,0)},mkdir:function(n,t){return t=void 0!==t?t:511,t&=1023,t|=16384,Ct.mknod(n,t,0)},mkdirTree:function(n,t){for(var e=n.split("/"),r="",o=0;o<e.length;++o)if(e[o]){r+="/"+e[o];try{Ct.mkdir(r,t)}catch(n){if(n.errno!=tt.EEXIST)throw n}}},mkdev:function(n,t,e){return void 0===e&&(e=t,t=438),t|=8192,Ct.mknod(n,t,e)},symlink:function(n,t){if(!Mt.resolve(n))throw new Ct.ErrnoError(tt.ENOENT);var e=Ct.lookupPath(t,{parent:!0}).node;if(!e)throw new Ct.ErrnoError(tt.ENOENT);var r=Mt.basename(t),o=Ct.mayCreate(e,r);if(o)throw new Ct.ErrnoError(o);if(!e.node_ops.symlink)throw new Ct.ErrnoError(tt.EPERM);return e.node_ops.symlink(e,r,n)},rename:function(n,t){var e,r,o=Mt.dirname(n),i=Mt.dirname(t),a=Mt.basename(n),s=Mt.basename(t);try{e=Ct.lookupPath(n,{parent:!0}).node,r=Ct.lookupPath(t,{parent:!0}).node}catch(n){throw new Ct.ErrnoError(tt.EBUSY)}if(!e||!r)throw new Ct.ErrnoError(tt.ENOENT);if(e.mount!==r.mount)throw new Ct.ErrnoError(tt.EXDEV);var u,c=Ct.lookupNode(e,a),l=Mt.relative(n,i);if("."!==l.charAt(0))throw new Ct.ErrnoError(tt.EINVAL);if("."!==(l=Mt.relative(t,o)).charAt(0))throw new Ct.ErrnoError(tt.ENOTEMPTY);try{u=Ct.lookupNode(r,s)}catch(n){}if(c!==u){var f=Ct.isDir(c.mode),d=Ct.mayDelete(e,a,f);if(d)throw new Ct.ErrnoError(d);if(d=u?Ct.mayDelete(r,s,f):Ct.mayCreate(r,s))throw new Ct.ErrnoError(d);if(!e.node_ops.rename)throw new Ct.ErrnoError(tt.EPERM);if(Ct.isMountpoint(c)||u&&Ct.isMountpoint(u))throw new Ct.ErrnoError(tt.EBUSY);if(r!==e&&(d=Ct.nodePermissions(e,"w")))throw new Ct.ErrnoError(d);Ct.hashRemoveNode(c);try{e.node_ops.rename(c,r,s)}catch(n){throw n}finally{Ct.hashAddNode(c)}}},rmdir:function(n){var t=Ct.lookupPath(n,{parent:!0}).node,e=Mt.basename(n),r=Ct.lookupNode(t,e),o=Ct.mayDelete(t,e,!0);if(o)throw new Ct.ErrnoError(o);if(!t.node_ops.rmdir)throw new Ct.ErrnoError(tt.EPERM);if(Ct.isMountpoint(r))throw new Ct.ErrnoError(tt.EBUSY);t.node_ops.rmdir(t,e),Ct.destroyNode(r)},readdir:function(n){var t=Ct.lookupPath(n,{follow:!0}).node;if(!t.node_ops.readdir)throw new Ct.ErrnoError(tt.ENOTDIR);return t.node_ops.readdir(t)},unlink:function(n){var t=Ct.lookupPath(n,{parent:!0}).node,e=Mt.basename(n),r=Ct.lookupNode(t,e),o=Ct.mayDelete(t,e,!1);if(o)throw new Ct.ErrnoError(o);if(!t.node_ops.unlink)throw new Ct.ErrnoError(tt.EPERM);if(Ct.isMountpoint(r))throw new Ct.ErrnoError(tt.EBUSY);t.node_ops.unlink(t,e),Ct.destroyNode(r)},readlink:function(n){var t=Ct.lookupPath(n).node;if(!t)throw new Ct.ErrnoError(tt.ENOENT);if(!t.node_ops.readlink)throw new Ct.ErrnoError(tt.EINVAL);return Mt.resolve(Ct.getPath(t.parent),t.node_ops.readlink(t))},stat:function(n,t){var e=Ct.lookupPath(n,{follow:!t}).node;if(!e)throw new Ct.ErrnoError(tt.ENOENT);if(!e.node_ops.getattr)throw new Ct.ErrnoError(tt.EPERM);return e.node_ops.getattr(e)},lstat:function(n){return Ct.stat(n,!0)},chmod:function(n,t,e){var r;if(!(r="string"==typeof n?Ct.lookupPath(n,{follow:!e}).node:n).node_ops.setattr)throw new Ct.ErrnoError(tt.EPERM);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:function(n,t){Ct.chmod(n,t,!0)},fchmod:function(n,t){var e=Ct.getStream(n);if(!e)throw new Ct.ErrnoError(tt.EBADF);Ct.chmod(e.node,t)},chown:function(n,t,e,r){var o;if(!(o="string"==typeof n?Ct.lookupPath(n,{follow:!r}).node:n).node_ops.setattr)throw new Ct.ErrnoError(tt.EPERM);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:function(n,t,e){Ct.chown(n,t,e,!0)},fchown:function(n,t,e){var r=Ct.getStream(n);if(!r)throw new Ct.ErrnoError(tt.EBADF);Ct.chown(r.node,t,e)},truncate:function(n,t){if(t<0)throw new Ct.ErrnoError(tt.EINVAL);var e;if(!(e="string"==typeof n?Ct.lookupPath(n,{follow:!0}).node:n).node_ops.setattr)throw new Ct.ErrnoError(tt.EPERM);if(Ct.isDir(e.mode))throw new Ct.ErrnoError(tt.EISDIR);if(!Ct.isFile(e.mode))throw new Ct.ErrnoError(tt.EINVAL);var r=Ct.nodePermissions(e,"w");if(r)throw new Ct.ErrnoError(r);e.node_ops.setattr(e,{size:t,timestamp:Date.now()})},ftruncate:function(n,t){var e=Ct.getStream(n);if(!e)throw new Ct.ErrnoError(tt.EBADF);if(0==(2097155&e.flags))throw new Ct.ErrnoError(tt.EINVAL);Ct.truncate(e.node,t)},utime:function(n,t,e){var r=Ct.lookupPath(n,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,e)})},open:function(t,e,r,o,i){if(""===t)throw new Ct.ErrnoError(tt.ENOENT);var a;if(r=void 0===r?438:r,r=64&(e="string"==typeof e?Ct.modeStringToFlags(e):e)?4095&r|32768:0,"object"==typeof t)a=t;else{t=Mt.normalize(t);try{a=Ct.lookupPath(t,{follow:!(131072&e)}).node}catch(n){}}var s=!1;if(64&e)if(a){if(128&e)throw new Ct.ErrnoError(tt.EEXIST)}else a=Ct.mknod(t,r,0),s=!0;if(!a)throw new Ct.ErrnoError(tt.ENOENT);if(Ct.isChrdev(a.mode)&&(e&=-513),65536&e&&!Ct.isDir(a.mode))throw new Ct.ErrnoError(tt.ENOTDIR);if(!s){var u=Ct.mayOpen(a,e);if(u)throw new Ct.ErrnoError(u)}512&e&&Ct.truncate(a,0),e&=-641;var c=Ct.createStream({node:a,path:Ct.getPath(a),flags:e,seekable:!0,position:0,stream_ops:a.stream_ops,ungotten:[],error:!1},o,i);return c.stream_ops.open&&c.stream_ops.open(c),!n.logReadFiles||1&e||(Ct.readFiles||(Ct.readFiles={}),t in Ct.readFiles||(Ct.readFiles[t]=1,u("read file: "+t))),c},close:function(n){if(Ct.isClosed(n))throw new Ct.ErrnoError(tt.EBADF);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(n){throw n}finally{Ct.closeStream(n.fd)}n.fd=null},isClosed:function(n){return null===n.fd},llseek:function(n,t,e){if(Ct.isClosed(n))throw new Ct.ErrnoError(tt.EBADF);if(!n.seekable||!n.stream_ops.llseek)throw new Ct.ErrnoError(tt.ESPIPE);return n.position=n.stream_ops.llseek(n,t,e),n.ungotten=[],n.position},read:function(n,t,e,r,o){if(r<0||o<0)throw new Ct.ErrnoError(tt.EINVAL);if(Ct.isClosed(n))throw new Ct.ErrnoError(tt.EBADF);if(1==(2097155&n.flags))throw new Ct.ErrnoError(tt.EBADF);if(Ct.isDir(n.node.mode))throw new Ct.ErrnoError(tt.EISDIR);if(!n.stream_ops.read)throw new Ct.ErrnoError(tt.EINVAL);var i=void 0!==o;if(i){if(!n.seekable)throw new Ct.ErrnoError(tt.ESPIPE)}else o=n.position;var a=n.stream_ops.read(n,t,e,r,o);return i||(n.position+=a),a},write:function(n,t,e,r,o,i){if(r<0||o<0)throw new Ct.ErrnoError(tt.EINVAL);if(Ct.isClosed(n))throw new Ct.ErrnoError(tt.EBADF);if(0==(2097155&n.flags))throw new Ct.ErrnoError(tt.EBADF);if(Ct.isDir(n.node.mode))throw new Ct.ErrnoError(tt.EISDIR);if(!n.stream_ops.write)throw new Ct.ErrnoError(tt.EINVAL);1024&n.flags&&Ct.llseek(n,0,2);var a=void 0!==o;if(a){if(!n.seekable)throw new Ct.ErrnoError(tt.ESPIPE)}else o=n.position;var s=n.stream_ops.write(n,t,e,r,o,i);a||(n.position+=s);try{n.path&&Ct.trackingDelegate.onWriteToFile&&Ct.trackingDelegate.onWriteToFile(n.path)}catch(n){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+n.message)}return s},allocate:function(n,t,e){if(Ct.isClosed(n))throw new Ct.ErrnoError(tt.EBADF);if(t<0||e<=0)throw new Ct.ErrnoError(tt.EINVAL);if(0==(2097155&n.flags))throw new Ct.ErrnoError(tt.EBADF);if(!Ct.isFile(n.node.mode)&&!Ct.isDir(n.node.mode))throw new Ct.ErrnoError(tt.ENODEV);if(!n.stream_ops.allocate)throw new Ct.ErrnoError(tt.EOPNOTSUPP);n.stream_ops.allocate(n,t,e)},mmap:function(n,t,e,r,o,i,a){if(1==(2097155&n.flags))throw new Ct.ErrnoError(tt.EACCES);if(!n.stream_ops.mmap)throw new Ct.ErrnoError(tt.ENODEV);return n.stream_ops.mmap(n,t,e,r,o,i,a)},msync:function(n,t,e,r,o){return n&&n.stream_ops.msync?n.stream_ops.msync(n,t,e,r,o):0},munmap:function(n){return 0},ioctl:function(n,t,e){if(!n.stream_ops.ioctl)throw new Ct.ErrnoError(tt.ENOTTY);return n.stream_ops.ioctl(n,t,e)},readFile:function(n,t){if((t=t||{}).flags=t.flags||"r",t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var e,r=Ct.open(n,t.flags),o=Ct.stat(n).size,i=new Uint8Array(o);return Ct.read(r,i,0,o,0),"utf8"===t.encoding?e=z(i,0):"binary"===t.encoding&&(e=i),Ct.close(r),e},writeFile:function(n,t,e){(e=e||{}).flags=e.flags||"w";var r=Ct.open(n,e.flags,e.mode);if("string"==typeof t){var o=new Uint8Array($(t)+1),i=I(t,o,0,o.length);Ct.write(r,o,0,i,void 0,e.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Ct.write(r,t,0,t.byteLength,void 0,e.canOwn)}Ct.close(r)},cwd:function(){return Ct.currentPath},chdir:function(n){var t=Ct.lookupPath(n,{follow:!0});if(null===t.node)throw new Ct.ErrnoError(tt.ENOENT);if(!Ct.isDir(t.node.mode))throw new Ct.ErrnoError(tt.ENOTDIR);var e=Ct.nodePermissions(t.node,"x");if(e)throw new Ct.ErrnoError(e);Ct.currentPath=t.path},createDefaultDirectories:function(){Ct.mkdir("/tmp"),Ct.mkdir("/home"),Ct.mkdir("/home/web_user")},createDefaultDevices:function(){var n;if(Ct.mkdir("/dev"),Ct.registerDevice(Ct.makedev(1,3),{read:function(){return 0},write:function(n,t,e,r,o){return r}}),Ct.mkdev("/dev/null",Ct.makedev(1,3)),xt.register(Ct.makedev(5,0),xt.default_tty_ops),xt.register(Ct.makedev(6,0),xt.default_tty1_ops),Ct.mkdev("/dev/tty",Ct.makedev(5,0)),Ct.mkdev("/dev/tty1",Ct.makedev(6,0)),"undefined"!=typeof crypto){var t=new Uint8Array(1);n=function(){return crypto.getRandomValues(t),t[0]}}else n=a?function(){return bn.randomBytes(1)[0]}:function(){return 256*Math.random()|0};Ct.createDevice("/dev","random",n),Ct.createDevice("/dev","urandom",n),Ct.mkdir("/dev/shm"),Ct.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){Ct.mkdir("/proc"),Ct.mkdir("/proc/self"),Ct.mkdir("/proc/self/fd"),Ct.mount({mount:function(){var n=Ct.createNode("/proc/self","fd",16895,73);return n.node_ops={lookup:function(n,t){var e=+t,r=Ct.getStream(e);if(!r)throw new Ct.ErrnoError(tt.EBADF);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return o.parent=o,o}},n}},{},"/proc/self/fd")},createStandardStreams:function(){n.stdin?Ct.createDevice("/dev","stdin",n.stdin):Ct.symlink("/dev/tty","/dev/stdin"),n.stdout?Ct.createDevice("/dev","stdout",null,n.stdout):Ct.symlink("/dev/tty","/dev/stdout"),n.stderr?Ct.createDevice("/dev","stderr",null,n.stderr):Ct.symlink("/dev/tty1","/dev/stderr");var t=Ct.open("/dev/stdin","r");b(0===t.fd,"invalid handle for stdin ("+t.fd+")");var e=Ct.open("/dev/stdout","w");b(1===e.fd,"invalid handle for stdout ("+e.fd+")");var r=Ct.open("/dev/stderr","w");b(2===r.fd,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:function(){Ct.ErrnoError||(Ct.ErrnoError=function(n,t){this.node=t,this.setErrno=function(n){for(var t in this.errno=n,tt)if(tt[t]===n){this.code=t;break}},this.setErrno(n),this.message=kt[n],this.stack&&Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0})},Ct.ErrnoError.prototype=new Error,Ct.ErrnoError.prototype.constructor=Ct.ErrnoError,[tt.ENOENT].forEach((function(n){Ct.genericErrors[n]=new Ct.ErrnoError(n),Ct.genericErrors[n].stack="<generic error, no stack>"})))},staticInit:function(){Ct.ensureErrnoError(),Ct.nameTable=new Array(4096),Ct.mount(St,{},"/"),Ct.createDefaultDirectories(),Ct.createDefaultDevices(),Ct.createSpecialDirectories(),Ct.filesystems={MEMFS:St,IDBFS:Dt,NODEFS:Tt,WORKERFS:At}},init:function(t,e,r){b(!Ct.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Ct.init.initialized=!0,Ct.ensureErrnoError(),n.stdin=t||n.stdin,n.stdout=e||n.stdout,n.stderr=r||n.stderr,Ct.createStandardStreams()},quit:function(){Ct.init.initialized=!1;var t=n._fflush;t&&t(0);for(var e=0;e<Ct.streams.length;e++){var r=Ct.streams[e];r&&Ct.close(r)}},getMode:function(n,t){var e=0;return n&&(e|=365),t&&(e|=146),e},joinPath:function(n,t){var e=Mt.join.apply(null,n);return t&&"/"==e[0]&&(e=e.substr(1)),e},absolutePath:function(n,t){return Mt.resolve(t,n)},standardizePath:function(n){return Mt.normalize(n)},findObject:function(n,t){var e=Ct.analyzePath(n,t);return e.exists?e.object:(et(e.error),null)},analyzePath:function(n,t){try{n=(r=Ct.lookupPath(n,{follow:!t})).path}catch(n){}var e={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Ct.lookupPath(n,{parent:!0});e.parentExists=!0,e.parentPath=r.path,e.parentObject=r.node,e.name=Mt.basename(n),r=Ct.lookupPath(n,{follow:!t}),e.exists=!0,e.path=r.path,e.object=r.node,e.name=r.node.name,e.isRoot="/"===r.path}catch(n){e.error=n.errno}return e},createFolder:function(n,t,e,r){var o=Mt.join2("string"==typeof n?n:Ct.getPath(n),t),i=Ct.getMode(e,r);return Ct.mkdir(o,i)},createPath:function(n,t,e,r){n="string"==typeof n?n:Ct.getPath(n);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=Mt.join2(n,i);try{Ct.mkdir(a)}catch(n){}n=a}}return a},createFile:function(n,t,e,r,o){var i=Mt.join2("string"==typeof n?n:Ct.getPath(n),t),a=Ct.getMode(r,o);return Ct.create(i,a)},createDataFile:function(n,t,e,r,o,i){var a=t?Mt.join2("string"==typeof n?n:Ct.getPath(n),t):n,s=Ct.getMode(r,o),u=Ct.create(a,s);if(e){if("string"==typeof e){for(var c=new Array(e.length),l=0,f=e.length;l<f;++l)c[l]=e.charCodeAt(l);e=c}Ct.chmod(u,146|s);var d=Ct.open(u,"w");Ct.write(d,e,0,e.length,0,i),Ct.close(d),Ct.chmod(u,s)}return u},createDevice:function(n,t,e,r){var o=Mt.join2("string"==typeof n?n:Ct.getPath(n),t),i=Ct.getMode(!!e,!!r);Ct.createDevice.major||(Ct.createDevice.major=64);var a=Ct.makedev(Ct.createDevice.major++,0);return Ct.registerDevice(a,{open:function(n){n.seekable=!1},close:function(n){r&&r.buffer&&r.buffer.length&&r(10)},read:function(n,t,r,o,i){for(var a=0,s=0;s<o;s++){var u;try{u=e()}catch(n){throw new Ct.ErrnoError(tt.EIO)}if(void 0===u&&0===a)throw new Ct.ErrnoError(tt.EAGAIN);if(null==u)break;a++,t[r+s]=u}return a&&(n.node.timestamp=Date.now()),a},write:function(n,t,e,o,i){for(var a=0;a<o;a++)try{r(t[e+a])}catch(n){throw new Ct.ErrnoError(tt.EIO)}return o&&(n.node.timestamp=Date.now()),a}}),Ct.mkdev(o,i,a)},createLink:function(n,t,e,r,o){var i=Mt.join2("string"==typeof n?n:Ct.getPath(n),t);return Ct.symlink(e,i)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;var e=!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!n.read)throw new Error("Cannot load without read() or XMLHttpRequest.");try{t.contents=Ue(n.read(t.url),!0),t.usedBytes=t.contents.length}catch(n){e=!1}return e||et(tt.EIO),e},createLazyFile:function(n,t,e,r,o){function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(n){if(!(n>this.length-1||n<0)){var t=n%this.chunkSize,e=n/this.chunkSize|0;return this.getter(e)[t]}},a.prototype.setDataGetter=function(n){this.getter=n},a.prototype.cacheLength=function(){var n=new XMLHttpRequest;if(n.open("HEAD",e,!1),n.send(null),!(n.status>=200&&n.status<300||304===n.status))throw new Error("Couldn't load "+e+". Status: "+n.status);var t,r=Number(n.getResponseHeader("Content-length")),o=(t=n.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=n.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;o||(a=r);var s=this;s.setDataGetter((function(n){var t=n*a,o=(n+1)*a-1;if(o=Math.min(o,r-1),void 0===s.chunks[n]&&(s.chunks[n]=function(n,t){if(n>t)throw new Error("invalid range ("+n+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",e,!1),r!==a&&o.setRequestHeader("Range","bytes="+n+"-"+t),"undefined"!=typeof Uint8Array&&(o.responseType="arraybuffer"),o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+e+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):Ue(o.responseText||"",!0)}(t,o)),void 0===s.chunks[n])throw new Error("doXHR failed!");return s.chunks[n]})),!i&&r||(a=r=1,r=this.getter(0).length,a=r,console.log("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!i)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new a;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var u={isDevice:!1,contents:s}}else u={isDevice:!1,url:e};var c=Ct.createFile(n,t,u,r,o);u.contents?c.contents=u.contents:u.url&&(c.contents=null,c.url=u.url),Object.defineProperties(c,{usedBytes:{get:function(){return this.contents.length}}});var l={};return Object.keys(c.stream_ops).forEach((function(n){var t=c.stream_ops[n];l[n]=function(){if(!Ct.forceLoadFile(c))throw new Ct.ErrnoError(tt.EIO);return t.apply(null,arguments)}})),l.read=function(n,t,e,r,o){if(!Ct.forceLoadFile(c))throw new Ct.ErrnoError(tt.EIO);var i=n.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,r);if(b(a>=0),i.slice)for(var s=0;s<a;s++)t[e+s]=i[o+s];else for(s=0;s<a;s++)t[e+s]=i.get(o+s);return a},c.stream_ops=l,c},createPreloadedFile:function(t,e,r,o,i,a,s,u,c,l){Browser.init();var f=e?Mt.resolve(Mt.join2(t,e)):t;function d(r){function d(n){l&&l(),u||Ct.createDataFile(t,e,n,o,i,c),a&&a(),Yn()}var h=!1;n.preloadPlugins.forEach((function(n){h||n.canHandle(f)&&(n.handle(r,f,d,(function(){s&&s(),Yn()})),h=!0)})),h||d(r)}Rn(),"string"==typeof r?Browser.asyncLoad(r,(function(n){d(n)}),s):d(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(n,t,e){t=t||function(){},e=e||function(){};var r=Ct.indexedDB();try{var o=r.open(Ct.DB_NAME(),Ct.DB_VERSION)}catch(n){return e(n)}o.onupgradeneeded=function(){console.log("creating db"),o.result.createObjectStore(Ct.DB_STORE_NAME)},o.onsuccess=function(){var r=o.result.transaction([Ct.DB_STORE_NAME],"readwrite"),i=r.objectStore(Ct.DB_STORE_NAME),a=0,s=0,u=n.length;function c(){0==s?t():e()}n.forEach((function(n){var t=i.put(Ct.analyzePath(n).object.contents,n);t.onsuccess=function(){++a+s==u&&c()},t.onerror=function(){s++,a+s==u&&c()}})),r.onerror=e},o.onerror=e},loadFilesFromDB:function(n,t,e){t=t||function(){},e=e||function(){};var r=Ct.indexedDB();try{var o=r.open(Ct.DB_NAME(),Ct.DB_VERSION)}catch(n){return e(n)}o.onupgradeneeded=e,o.onsuccess=function(){var r=o.result;try{var i=r.transaction([Ct.DB_STORE_NAME],"readonly")}catch(n){return void e(n)}var a=i.objectStore(Ct.DB_STORE_NAME),s=0,u=0,c=n.length;function l(){0==u?t():e()}n.forEach((function(n){var t=a.get(n);t.onsuccess=function(){Ct.analyzePath(n).exists&&Ct.unlink(n),Ct.createDataFile(Mt.dirname(n),Mt.basename(n),t.result,!0,!0,!0),++s+u==c&&l()},t.onerror=function(){u++,s+u==c&&l()}})),i.onerror=e},o.onerror=e}},Nt={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(n,t){if("/"!==t[0]){var e;if(-100===n)e=Ct.cwd();else{var r=Ct.getStream(n);if(!r)throw new Ct.ErrnoError(tt.EBADF);e=r.path}t=Mt.join2(e,t)}return t},doStat:function(n,t,e){try{var r=n(t)}catch(n){if(n&&n.node&&Mt.normalize(t)!==Mt.normalize(Ct.getPath(n.node)))return-tt.ENOTDIR;throw n}return X[e>>2]=r.dev,X[e+4>>2]=0,X[e+8>>2]=r.ino,X[e+12>>2]=r.mode,X[e+16>>2]=r.nlink,X[e+20>>2]=r.uid,X[e+24>>2]=r.gid,X[e+28>>2]=r.rdev,X[e+32>>2]=0,X[e+36>>2]=r.size,X[e+40>>2]=4096,X[e+44>>2]=r.blocks,X[e+48>>2]=r.atime.getTime()/1e3|0,X[e+52>>2]=0,X[e+56>>2]=r.mtime.getTime()/1e3|0,X[e+60>>2]=0,X[e+64>>2]=r.ctime.getTime()/1e3|0,X[e+68>>2]=0,X[e+72>>2]=r.ino,0},doMsync:function(n,t,e,r){var o=new Uint8Array(V.subarray(n,n+e));Ct.msync(t,o,0,e,r)},doMkdir:function(n,t){return"/"===(n=Mt.normalize(n))[n.length-1]&&(n=n.substr(0,n.length-1)),Ct.mkdir(n,t,0),0},doMknod:function(n,t,e){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-tt.EINVAL}return Ct.mknod(n,t,e),0},doReadlink:function(n,t,e){if(e<=0)return-tt.EINVAL;var r=Ct.readlink(n),o=Math.min(e,$(r)),i=q[t+o];return L(r,t,e+1),q[t+o]=i,o},doAccess:function(n,t){if(-8&t)return-tt.EINVAL;var e;e=Ct.lookupPath(n,{follow:!0}).node;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&Ct.nodePermissions(e,r)?-tt.EACCES:0},doDup:function(n,t,e){var r=Ct.getStream(e);return r&&Ct.close(r),Ct.open(n,t,0,e,e).fd},doReadv:function(n,t,e,r){for(var o=0,i=0;i<e;i++){var a=X[t+8*i>>2],s=X[t+(8*i+4)>>2],u=Ct.read(n,q,a,s,r);if(u<0)return-1;if(o+=u,u<s)break}return o},doWritev:function(n,t,e,r){for(var o=0,i=0;i<e;i++){var a=X[t+8*i>>2],s=X[t+(8*i+4)>>2],u=Ct.write(n,q,a,s,r);if(u<0)return-1;o+=u}return o},varargs:0,get:function(n){return Nt.varargs+=4,X[Nt.varargs-4>>2]},getStr:function(){return j(Nt.get())},getStreamFromFD:function(){var n=Ct.getStream(Nt.get());if(!n)throw new Ct.ErrnoError(tt.EBADF);return n},getSocketFromFD:function(){var n=SOCKFS.getSocket(Nt.get());if(!n)throw new Ct.ErrnoError(tt.EBADF);return n},getSocketAddress:function(n){var t=Nt.get(),e=Nt.get();if(n&&0===t)return null;var r=__read_sockaddr(t,e);if(r.errno)throw new Ct.ErrnoError(r.errno);return r.addr=DNS.lookup_addr(r.addr)||r.addr,r},get64:function(){var n=Nt.get(),t=Nt.get();return b(n>=0?0===t:-1===t),n},getZero:function(){b(0===Nt.get())}};function Ot(n,t){Nt.varargs=t;try{var e=Nt.getStr();return Ct.unlink(e),0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function jt(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD(),r=(Nt.get(),Nt.get()),o=Nt.get(),i=Nt.get(),a=r;return Ct.llseek(e,a,i),X[o>>2]=e.position,e.getdents&&0===a&&0===i&&(e.getdents=null),0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Ft(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD(),r=Nt.get(),o=Nt.get();return Nt.doReadv(e,r,o)}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function zt(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD(),r=Nt.get(),o=Nt.get();return Nt.doWritev(e,r,o)}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Pt(n,t){Nt.varargs=t;try{var e=Nt.getStr(),r=Nt.get();return Nt.doStat(Ct.lstat,e,r)}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function It(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD();switch(Nt.get()){case 0:return(r=Nt.get())<0?-tt.EINVAL:Ct.open(e.path,e.flags,0,r).fd;case 1:case 2:return 0;case 3:return e.flags;case 4:var r=Nt.get();return e.flags|=r,0;case 12:case 12:return r=Nt.get(),J[r+0>>1]=2,0;case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-tt.EINVAL;case 9:return et(tt.EINVAL),-1;default:return-tt.EINVAL}}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Lt(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD(),r=Nt.get();return b(!Nt.get()),e.fd===r?-tt.EINVAL:Nt.doDup(e.path,e.flags,r)}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function $t(n,t){Nt.varargs=t;try{var e=Nt.getStr(),r=Nt.getStr();return Ct.rename(e,r),0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Bt(n,t){Nt.varargs=t;try{var e=Nt.getStr();return Ct.rmdir(e),0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Rt(n,t){Nt.varargs=t;try{var e=Nt.getStr(),r=Nt.get(),o=Nt.get();return Ct.open(e,r,o).fd}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Yt(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD(),r=Nt.get();switch(r){case 21509:case 21505:return e.tty?0:-tt.ENOTTY;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return e.tty?0:-tt.ENOTTY;case 21519:if(!e.tty)return-tt.ENOTTY;var o=Nt.get();return X[o>>2]=0,0;case 21520:return e.tty?-tt.EINVAL:-tt.ENOTTY;case 21531:return o=Nt.get(),Ct.ioctl(e,r,o);case 21523:case 21524:return e.tty?0:-tt.ENOTTY;default:po("bad ioctl syscall "+r)}}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Ut(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD();return Ct.close(e),0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Ht(n,t){Nt.varargs=t;try{var e=Nt.getStreamFromFD(),r=Nt.get();return e.fd===r?r:Nt.doDup(e.path,e.flags,r)}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function qt(n,t){Nt.varargs=t;try{Nt.get();var e=Nt.get();return uo(e,0,136),X[e>>2]=1,X[e+4>>2]=2,X[e+8>>2]=3,X[e+12>>2]=4,0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Vt(n,t){Nt.varargs=t;try{var e=Nt.get(),r=Nt.get(),o=Nt.mappings[e];if(!o)return 0;if(r===o.len){var i=Ct.getStream(o.fd);Nt.doMsync(e,i,r,o.flags),Nt.mappings[e]=null,o.allocated&&ao(o.malloc)}return 0}catch(n){return void 0!==Ct&&n instanceof Ct.ErrnoError||po(n),-n.errno}}function Jt(){}function Xt(){}function Wt(){n.abort()}var Gt=0;function Kt(t){setTimeout((function(){Gt&&n.dynCall_vi(Gt,0)}),1e3*t)}function Zt(){return void 0===Zt.start&&(Zt.start=Date.now()),1e3*(Date.now()-Zt.start)|0}function Qt(n,t){return n-t}function ne(n){return 0===n?0:(n=j(n),Kn.hasOwnProperty(n)?(ne.ret&&ao(ne.ret),ne.ret=B(Kn[n]),ne.ret):0)}function te(n){var t=Date.now();return X[n>>2]=t/1e3|0,X[n+4>>2]=t%1e3*1e3|0,0}var ee=Z+=16;Z+=48;var re=N(Ue("GMT"),"i8",A);function oe(n,t){var e=new Date(1e3*X[n>>2]);X[t>>2]=e.getUTCSeconds(),X[t+4>>2]=e.getUTCMinutes(),X[t+8>>2]=e.getUTCHours(),X[t+12>>2]=e.getUTCDate(),X[t+16>>2]=e.getUTCMonth(),X[t+20>>2]=e.getUTCFullYear()-1900,X[t+24>>2]=e.getUTCDay(),X[t+36>>2]=0,X[t+32>>2]=0;var r=Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0),o=(e.getTime()-r)/864e5|0;return X[t+28>>2]=o,X[t+40>>2]=re,t}function ie(n){return oe(n,ee)}var ae=Pn,se=Pn;function ue(n){return Math.pow(2,n)}function ce(){return ue.apply(null,arguments)}var le=zn,fe=In;function de(n){return Math.log(n)/Math.LN10}function he(){return de.apply(null,arguments)}function me(n){var t=_e,e=t.LLVM_SAVEDSTACKS[n];t.LLVM_SAVEDSTACKS.splice(n,1),fo(e)}function _e(){var n=_e;return n.LLVM_SAVEDSTACKS||(n.LLVM_SAVEDSTACKS=[]),n.LLVM_SAVEDSTACKS.push(ho()),n.LLVM_SAVEDSTACKS.length-1}function ge(){po("trap!")}function pe(){if(!pe.called){pe.called=!0,X[ro()>>2]=60*(new Date).getTimezoneOffset();var n=new Date(2e3,0,1),t=new Date(2e3,6,1);X[eo()>>2]=Number(n.getTimezoneOffset()!=t.getTimezoneOffset());var e=a(n),r=a(t),o=N(Ue(e),"i8",T),i=N(Ue(r),"i8",T);t.getTimezoneOffset()<n.getTimezoneOffset()?(X[oo()>>2]=o,X[oo()+4>>2]=i):(X[oo()>>2]=i,X[oo()+4>>2]=o)}function a(n){var t=n.toTimeString().match(/\(([A-Za-z ]+)\)$/);return t?t[1]:"GMT"}}function ye(n,t){pe();var e=new Date(1e3*X[n>>2]);X[t>>2]=e.getSeconds(),X[t+4>>2]=e.getMinutes(),X[t+8>>2]=e.getHours(),X[t+12>>2]=e.getDate(),X[t+16>>2]=e.getMonth(),X[t+20>>2]=e.getFullYear()-1900,X[t+24>>2]=e.getDay();var r=new Date(e.getFullYear(),0,1),o=(e.getTime()-r.getTime())/864e5|0;X[t+28>>2]=o,X[t+36>>2]=-60*e.getTimezoneOffset();var i=new Date(2e3,6,1).getTimezoneOffset(),a=r.getTimezoneOffset(),s=0|(i!=a&&e.getTimezoneOffset()==Math.min(a,i));X[t+32>>2]=s;var u=X[oo()+(s?4:0)>>2];return X[t+40>>2]=u,t}function ve(n){return ye(n,ee)}function we(t,e){throw n.setThrew(t,e||1),"longjmp"}function Ee(n,t,e){return V.set(V.subarray(t,t+e),n),n}function be(n){pe();var t=new Date(X[n+20>>2]+1900,X[n+16>>2],X[n+12>>2],X[n+8>>2],X[n+4>>2],X[n>>2],0),e=X[n+32>>2],r=t.getTimezoneOffset(),o=new Date(t.getFullYear(),0,1),i=new Date(2e3,6,1).getTimezoneOffset(),a=o.getTimezoneOffset(),s=Math.min(a,i);if(e<0)X[n+32>>2]=Number(i!=a&&s==r);else if(e>0!=(s==r)){var u=Math.max(a,i),c=e>0?s:u;t.setTime(t.getTime()+6e4*(c-r))}X[n+24>>2]=t.getDay();var l=(t.getTime()-o.getTime())/864e5|0;return X[n+28>>2]=l,t.getTime()/1e3|0}function ke(){return 0}var Me={};function xe(n){return Me[n]||0}var Se=1;function De(n,t){return 0==n?tt.EINVAL:(X[n>>2]=Se,Me[Se]=0,Se++,0)}function Te(){}function Ae(t,e){Ae.seen||(Ae.seen={}),t in Ae.seen||(n.dynCall_v(e),Ae.seen[t]=1)}function Ce(n,t){return n in Me?(Me[n]=t,0):tt.EINVAL}function Ne(n,t){return 14==n&&(Gt=t),0}function Oe(n){return n%4==0&&(n%100!=0||n%400==0)}function je(n,t){for(var e=0,r=0;r<=t;e+=n[r++]);return e}var Fe=[31,29,31,30,31,30,31,31,30,31,30,31],ze=[31,28,31,30,31,30,31,31,30,31,30,31];function Pe(n,t){for(var e=new Date(n.getTime());t>0;){var r=Oe(e.getFullYear()),o=e.getMonth(),i=(r?Fe:ze)[o];if(!(t>i-e.getDate()))return e.setDate(e.getDate()+t),e;t-=i-e.getDate()+1,e.setDate(1),o<11?e.setMonth(o+1):(e.setMonth(0),e.setFullYear(e.getFullYear()+1))}return e}function Ie(n,t,e,r){var o=X[r+40>>2],i={tm_sec:X[r>>2],tm_min:X[r+4>>2],tm_hour:X[r+8>>2],tm_mday:X[r+12>>2],tm_mon:X[r+16>>2],tm_year:X[r+20>>2],tm_wday:X[r+24>>2],tm_yday:X[r+28>>2],tm_isdst:X[r+32>>2],tm_gmtoff:X[r+36>>2],tm_zone:o?j(o):""},a=j(e),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S"};for(var u in s)a=a.replace(new RegExp(u,"g"),s[u]);var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(n,t,e){for(var r="number"==typeof n?n.toString():n||"";r.length<t;)r=e[0]+r;return r}function d(n,t){return f(n,t,"0")}function h(n,t){function e(n){return n<0?-1:n>0?1:0}var r;return 0===(r=e(n.getFullYear()-t.getFullYear()))&&0===(r=e(n.getMonth()-t.getMonth()))&&(r=e(n.getDate()-t.getDate())),r}function m(n){switch(n.getDay()){case 0:return new Date(n.getFullYear()-1,11,29);case 1:return n;case 2:return new Date(n.getFullYear(),0,3);case 3:return new Date(n.getFullYear(),0,2);case 4:return new Date(n.getFullYear(),0,1);case 5:return new Date(n.getFullYear()-1,11,31);case 6:return new Date(n.getFullYear()-1,11,30)}}function _(n){var t=Pe(new Date(n.tm_year+1900,0,1),n.tm_yday),e=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),o=m(e),i=m(r);return h(o,t)<=0?h(i,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(n){return c[n.tm_wday].substring(0,3)},"%A":function(n){return c[n.tm_wday]},"%b":function(n){return l[n.tm_mon].substring(0,3)},"%B":function(n){return l[n.tm_mon]},"%C":function(n){return d((n.tm_year+1900)/100|0,2)},"%d":function(n){return d(n.tm_mday,2)},"%e":function(n){return f(n.tm_mday,2," ")},"%g":function(n){return _(n).toString().substring(2)},"%G":function(n){return _(n)},"%H":function(n){return d(n.tm_hour,2)},"%I":function(n){var t=n.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(n){return d(n.tm_mday+je(Oe(n.tm_year+1900)?Fe:ze,n.tm_mon-1),3)},"%m":function(n){return d(n.tm_mon+1,2)},"%M":function(n){return d(n.tm_min,2)},"%n":function(){return"\n"},"%p":function(n){return n.tm_hour>=0&&n.tm_hour<12?"AM":"PM"},"%S":function(n){return d(n.tm_sec,2)},"%t":function(){return"\t"},"%u":function(n){return new Date(n.tm_year+1900,n.tm_mon+1,n.tm_mday,0,0,0,0).getDay()||7},"%U":function(n){var t=new Date(n.tm_year+1900,0,1),e=0===t.getDay()?t:Pe(t,7-t.getDay()),r=new Date(n.tm_year+1900,n.tm_mon,n.tm_mday);if(h(e,r)<0){var o=je(Oe(r.getFullYear())?Fe:ze,r.getMonth()-1)-31,i=31-e.getDate()+o+r.getDate();return d(Math.ceil(i/7),2)}return 0===h(e,t)?"01":"00"},"%V":function(n){var t,e=new Date(n.tm_year+1900,0,4),r=new Date(n.tm_year+1901,0,4),o=m(e),i=m(r),a=Pe(new Date(n.tm_year+1900,0,1),n.tm_yday);return h(a,o)<0?"53":h(i,a)<=0?"01":(t=o.getFullYear()<n.tm_year+1900?n.tm_yday+32-o.getDate():n.tm_yday+1-o.getDate(),d(Math.ceil(t/7),2))},"%w":function(n){return new Date(n.tm_year+1900,n.tm_mon+1,n.tm_mday,0,0,0,0).getDay()},"%W":function(n){var t=new Date(n.tm_year,0,1),e=1===t.getDay()?t:Pe(t,0===t.getDay()?1:7-t.getDay()+1),r=new Date(n.tm_year+1900,n.tm_mon,n.tm_mday);if(h(e,r)<0){var o=je(Oe(r.getFullYear())?Fe:ze,r.getMonth()-1)-31,i=31-e.getDate()+o+r.getDate();return d(Math.ceil(i/7),2)}return 0===h(e,t)?"01":"00"},"%y":function(n){return(n.tm_year+1900).toString().substring(2)},"%Y":function(n){return n.tm_year+1900},"%z":function(n){var t=n.tm_gmtoff,e=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(e?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(n){return n.tm_zone},"%%":function(){return"%"}};for(var u in g)a.indexOf(u)>=0&&(a=a.replace(new RegExp(u,"g"),g[u](i)));var p=Ue(a,!1);return p.length>t?0:(jn(p,n),p.length-1)}function Le(n,t,e,r){return Ie(n,t,e,r)}function $e(n){return et(tt.EAGAIN),-1}function Be(n){var t=Date.now()/1e3|0;return n&&(X[n>>2]=t),t}if(Qn=a?function(){var n=process.hrtime();return 1e3*n[0]+n[1]/1e6}:"undefined"!=typeof dateNow?dateNow:"object"==typeof self&&self.performance&&"function"==typeof self.performance.now?function(){return self.performance.now()}:"object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:Date.now,Ct.staticInit(),vn.unshift((function(){n.noFSInit||Ct.init.initialized||Ct.init()})),wn.push((function(){Ct.ignorePermissions=!1})),En.push((function(){Ct.quit()})),vn.unshift((function(){})),En.push((function(){})),a){var Re=bn,Ye=kn;Tt.staticInit()}function Ue(n,t,e){var r=e>0?e:$(n)+1,o=new Array(r),i=I(n,o,0,o.length);return t&&(o.length=i),o}function He(t,e){var r=ho();try{return n.dynCall_di(t,e)}catch(t){if(fo(r),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function qe(t,e,r,o){var i=ho();try{return n.dynCall_didi(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Ve(t,e,r,o){var i=ho();try{return n.dynCall_diii(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Je(t,e,r,o){var i=ho();try{return n.dynCall_dij(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Xe(t,e){var r=ho();try{return n.dynCall_ii(t,e)}catch(t){if(fo(r),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function We(t,e,r){var o=ho();try{return n.dynCall_iid(t,e,r)}catch(t){if(fo(o),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Ge(t,e,r){var o=ho();try{return n.dynCall_iii(t,e,r)}catch(t){if(fo(o),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Ke(t,e,r,o){var i=ho();try{return n.dynCall_iiii(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Ze(t,e,r,o,i){var a=ho();try{return n.dynCall_iiiid(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Qe(t,e,r,o,i){var a=ho();try{return n.dynCall_iiiii(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function nr(t,e,r,o,i,a){var s=ho();try{return n.dynCall_iiiiid(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function tr(t,e,r,o,i,a){var s=ho();try{return n.dynCall_iiiiii(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function er(t,e,r,o,i,a,s){var u=ho();try{return n.dynCall_iiiiiid(t,e,r,o,i,a,s)}catch(t){if(fo(u),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function rr(t,e,r,o,i,a,s){var u=ho();try{return n.dynCall_iiiiiii(t,e,r,o,i,a,s)}catch(t){if(fo(u),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function or(t,e,r,o,i,a,s,u){var c=ho();try{return n.dynCall_iiiiiiii(t,e,r,o,i,a,s,u)}catch(t){if(fo(c),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function ir(t,e,r,o,i,a,s,u,c){var l=ho();try{return n.dynCall_iiiiiiiii(t,e,r,o,i,a,s,u,c)}catch(t){if(fo(l),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function ar(t,e,r,o,i,a,s){var u=ho();try{return n.dynCall_iiiiij(t,e,r,o,i,a,s)}catch(t){if(fo(u),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function sr(t,e,r,o){var i=ho();try{return n.dynCall_iij(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function ur(t,e,r,o,i){var a=ho();try{return n.dynCall_iiji(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function cr(t,e,r,o,i,a){var s=ho();try{return n.dynCall_iijii(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function lr(t,e,r,o,i,a){var s=ho();try{return n.dynCall_iijj(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function fr(t,e,r,o,i){var a=ho();try{return n.dynCall_ijii(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function dr(t,e,r,o,i,a){var s=ho();try{return n.dynCall_ijiii(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function hr(t,e,r,o,i,a,s){var u=ho();try{return n.dynCall_ijiiii(t,e,r,o,i,a,s)}catch(t){if(fo(u),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function mr(t,e){var r=ho();try{return n.dynCall_ji(t,e)}catch(t){if(fo(r),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function _r(t,e,r){var o=ho();try{return n.dynCall_jii(t,e,r)}catch(t){if(fo(o),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function gr(t,e,r,o){var i=ho();try{return n.dynCall_jiii(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function pr(t,e,r,o){var i=ho();try{return n.dynCall_jij(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function yr(t,e,r,o,i){var a=ho();try{return n.dynCall_jiji(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function vr(t,e,r,o,i,a){var s=ho();try{return n.dynCall_jijii(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function wr(t){var e=ho();try{n.dynCall_v(t)}catch(t){if(fo(e),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Er(t,e){var r=ho();try{n.dynCall_vi(t,e)}catch(t){if(fo(r),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function br(t,e,r){var o=ho();try{n.dynCall_vii(t,e,r)}catch(t){if(fo(o),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function kr(t,e,r,o){var i=ho();try{n.dynCall_viii(t,e,r,o)}catch(t){if(fo(i),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Mr(t,e,r,o,i){var a=ho();try{n.dynCall_viiii(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function xr(t,e,r,o,i,a){var s=ho();try{n.dynCall_viiiii(t,e,r,o,i,a)}catch(t){if(fo(s),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Sr(t,e,r,o,i,a,s){var u=ho();try{n.dynCall_viiiiii(t,e,r,o,i,a,s)}catch(t){if(fo(u),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Dr(t,e,r,o,i,a,s,u){var c=ho();try{n.dynCall_viiiiiii(t,e,r,o,i,a,s,u)}catch(t){if(fo(c),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Tr(t,e,r,o,i,a,s){var u=ho();try{n.dynCall_viijii(t,e,r,o,i,a,s)}catch(t){if(fo(u),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}function Ar(t,e,r,o,i){var a=ho();try{n.dynCall_vijd(t,e,r,o,i)}catch(t){if(fo(a),"number"!=typeof t&&"longjmp"!==t)throw t;n.setThrew(1,0)}}on=_(4),nn=tn=p(Z),rn=p(en=nn+mn),X[on>>2]=rn,Q=!0,n.wasmTableSize=7612,n.wasmMaxTableSize=7612,n.asmGlobalArg={},n.asmLibraryArg={abort:po,assert:b,enlargeMemory:hn,getTotalMemory:gn,abortOnCannotGrowMemory:dn,invoke_di:He,invoke_didi:qe,invoke_diii:Ve,invoke_dij:Je,invoke_ii:Xe,invoke_iid:We,invoke_iii:Ge,invoke_iiii:Ke,invoke_iiiid:Ze,invoke_iiiii:Qe,invoke_iiiiid:nr,invoke_iiiiii:tr,invoke_iiiiiid:er,invoke_iiiiiii:rr,invoke_iiiiiiii:or,invoke_iiiiiiiii:ir,invoke_iiiiij:ar,invoke_iij:sr,invoke_iiji:ur,invoke_iijii:cr,invoke_iijj:lr,invoke_ijii:fr,invoke_ijiii:dr,invoke_ijiiii:hr,invoke_ji:mr,invoke_jii:_r,invoke_jiii:gr,invoke_jij:pr,invoke_jiji:yr,invoke_jijii:vr,invoke_v:wr,invoke_vi:Er,invoke_vii:br,invoke_viii:kr,invoke_viiii:Mr,invoke_viiiii:xr,invoke_viiiiii:Sr,invoke_viiiiiii:Dr,invoke_viijii:Tr,invoke_vijd:Ar,__Exit:Gn,___buildEnvironment:Zn,___clock_gettime:ot,___cxa_allocate_exception:it,___cxa_begin_catch:st,___cxa_current_primary_exception:ut,___cxa_decrement_exception_refcount:ct,___cxa_end_catch:ht,___cxa_find_matching_catch:pt,___cxa_free_exception:dt,___cxa_increment_exception_refcount:lt,___cxa_pure_virtual:ft,___cxa_rethrow:mt,___cxa_rethrow_primary_exception:_t,___cxa_throw:yt,___cxa_uncaught_exception:vt,___gxx_personality_v0:wt,___lock:Et,___map_file:bt,___resumeException:gt,___setErrNo:et,___syscall10:Ot,___syscall140:jt,___syscall145:Ft,___syscall146:zt,___syscall196:Pt,___syscall221:It,___syscall330:Lt,___syscall38:$t,___syscall40:Bt,___syscall5:Rt,___syscall54:Yt,___syscall6:Ut,___syscall63:Ht,___syscall77:qt,___syscall91:Vt,___unlock:Jt,___wait:Xt,__addDays:Pe,__arraySum:je,__exit:Xn,__isLeapYear:Oe,_abort:Wt,_alarm:Kt,_clock:Zt,_clock_gettime:rt,_difftime:Qt,_emscripten_get_now:Qn,_emscripten_get_now_is_monotonic:nt,_emscripten_memcpy_big:Ee,_exit:Wn,_getenv:ne,_gettimeofday:te,_gmtime:ie,_gmtime_r:oe,_llvm_ceil_f32:ae,_llvm_ceil_f64:se,_llvm_exp2_f32:ue,_llvm_exp2_f64:ce,_llvm_fabs_f64:le,_llvm_floor_f64:fe,_llvm_log10_f32:de,_llvm_log10_f64:he,_llvm_stackrestore:me,_llvm_stacksave:_e,_llvm_trap:ge,_localtime:ve,_localtime_r:ye,_longjmp:we,_mktime:be,_pthread_cond_wait:ke,_pthread_getspecific:xe,_pthread_key_create:De,_pthread_mutex_destroy:Te,_pthread_once:Ae,_pthread_setspecific:Ce,_signal:Ne,_strftime:Ie,_strftime_l:Le,_system:$e,_time:Be,_tzset:pe,DYNAMICTOP_PTR:on,tempDoublePtr:Jn,STACKTOP:tn,STACK_MAX:en};var Cr=n.asm(n.asmGlobalArg,n.asmLibraryArg,H);n.asm=Cr;var Nr,Or=n.__GLOBAL__I_000101=function(){return n.asm.__GLOBAL__I_000101.apply(null,arguments)},jr=n.__GLOBAL__sub_I_clasp_app_cpp=function(){return n.asm.__GLOBAL__sub_I_clasp_app_cpp.apply(null,arguments)},Fr=n.__GLOBAL__sub_I_clasp_options_cpp=function(){return n.asm.__GLOBAL__sub_I_clasp_options_cpp.apply(null,arguments)},zr=n.__GLOBAL__sub_I_control_cc=function(){return n.asm.__GLOBAL__sub_I_control_cc.apply(null,arguments)},Pr=n.__GLOBAL__sub_I_iostream_cpp=function(){return n.asm.__GLOBAL__sub_I_iostream_cpp.apply(null,arguments)},Ir=n.__GLOBAL__sub_I_logic_program_cpp=function(){return n.asm.__GLOBAL__sub_I_logic_program_cpp.apply(null,arguments)},Lr=n.__GLOBAL__sub_I_shared_context_cpp=function(){return n.asm.__GLOBAL__sub_I_shared_context_cpp.apply(null,arguments)},$r=n.__GLOBAL__sub_I_statistics_cpp=function(){return n.asm.__GLOBAL__sub_I_statistics_cpp.apply(null,arguments)},Br=n.__GLOBAL__sub_I_string_convert_cpp=function(){return n.asm.__GLOBAL__sub_I_string_convert_cpp.apply(null,arguments)},Rr=n.__ZSt18uncaught_exceptionv=function(){return n.asm.__ZSt18uncaught_exceptionv.apply(null,arguments)},Yr=(n.___cxa_can_catch=function(){return n.asm.___cxa_can_catch.apply(null,arguments)},n.___cxa_is_pointer_type=function(){return n.asm.___cxa_is_pointer_type.apply(null,arguments)},n.___cxx_global_var_init=function(){return n.asm.___cxx_global_var_init.apply(null,arguments)}),Ur=n.___cxx_global_var_init_10=function(){return n.asm.___cxx_global_var_init_10.apply(null,arguments)},Hr=n.___cxx_global_var_init_11=function(){return n.asm.___cxx_global_var_init_11.apply(null,arguments)},qr=n.___cxx_global_var_init_12=function(){return n.asm.___cxx_global_var_init_12.apply(null,arguments)},Vr=n.___cxx_global_var_init_13=function(){return n.asm.___cxx_global_var_init_13.apply(null,arguments)},Jr=n.___cxx_global_var_init_2=function(){return n.asm.___cxx_global_var_init_2.apply(null,arguments)},Xr=n.___cxx_global_var_init_2409=function(){return n.asm.___cxx_global_var_init_2409.apply(null,arguments)},Wr=n.___cxx_global_var_init_265=function(){return n.asm.___cxx_global_var_init_265.apply(null,arguments)},Gr=n.___cxx_global_var_init_3=function(){return n.asm.___cxx_global_var_init_3.apply(null,arguments)},Kr=n.___cxx_global_var_init_4=function(){return n.asm.___cxx_global_var_init_4.apply(null,arguments)},Zr=n.___cxx_global_var_init_5=function(){return n.asm.___cxx_global_var_init_5.apply(null,arguments)},Qr=n.___cxx_global_var_init_6=function(){return n.asm.___cxx_global_var_init_6.apply(null,arguments)},no=n.___cxx_global_var_init_9=function(){return n.asm.___cxx_global_var_init_9.apply(null,arguments)},to=n.___emscripten_environ_constructor=function(){return n.asm.___emscripten_environ_constructor.apply(null,arguments)},eo=(n.___errno_location=function(){return n.asm.___errno_location.apply(null,arguments)},n.__get_daylight=function(){return n.asm.__get_daylight.apply(null,arguments)}),ro=(n.__get_environ=function(){return n.asm.__get_environ.apply(null,arguments)},n.__get_timezone=function(){return n.asm.__get_timezone.apply(null,arguments)}),oo=n.__get_tzname=function(){return n.asm.__get_tzname.apply(null,arguments)},io=n._emscripten_replace_memory=function(){return n.asm._emscripten_replace_memory.apply(null,arguments)},ao=n._free=function(){return n.asm._free.apply(null,arguments)},so=(n._llvm_bswap_i32=function(){return n.asm._llvm_bswap_i32.apply(null,arguments)},n._malloc=function(){return n.asm._malloc.apply(null,arguments)}),uo=(n._memcpy=function(){return n.asm._memcpy.apply(null,arguments)},n._memmove=function(){return n.asm._memmove.apply(null,arguments)},n._memset=function(){return n.asm._memset.apply(null,arguments)}),co=(n._pthread_cond_broadcast=function(){return n.asm._pthread_cond_broadcast.apply(null,arguments)},n._pthread_mutex_lock=function(){return n.asm._pthread_mutex_lock.apply(null,arguments)},n._pthread_mutex_unlock=function(){return n.asm._pthread_mutex_unlock.apply(null,arguments)},n._realloc=function(){return n.asm._realloc.apply(null,arguments)},n._run=function(){return n.asm._run.apply(null,arguments)},n._saveSetjmp=function(){return n.asm._saveSetjmp.apply(null,arguments)},n._sbrk=function(){return n.asm._sbrk.apply(null,arguments)},n._testSetjmp=function(){return n.asm._testSetjmp.apply(null,arguments)},n.establishStackSpace=function(){return n.asm.establishStackSpace.apply(null,arguments)},n.getTempRet0=function(){return n.asm.getTempRet0.apply(null,arguments)},n.runPostSets=function(){return n.asm.runPostSets.apply(null,arguments)},n.setTempRet0=function(){return n.asm.setTempRet0.apply(null,arguments)}),lo=(n.setThrew=function(){return n.asm.setThrew.apply(null,arguments)},n.stackAlloc=function(){return n.asm.stackAlloc.apply(null,arguments)}),fo=n.stackRestore=function(){return n.asm.stackRestore.apply(null,arguments)},ho=n.stackSave=function(){return n.asm.stackSave.apply(null,arguments)};function mo(n){this.name="ExitStatus",this.message="Program terminated with exit("+n+")",this.status=n}function _o(t){function e(){n.calledRun||(n.calledRun=!0,E||(Dn(),Tn(),n.onRuntimeInitialized&&n.onRuntimeInitialized(),Cn()))}t=t||n.arguments,$n>0||(Sn(),$n>0||n.calledRun||(n.setStatus?(n.setStatus("Running..."),setTimeout((function(){setTimeout((function(){n.setStatus("")}),1),e()}),1)):e()))}function go(t,e){e&&n.noExitRuntime&&0===t||(n.noExitRuntime||(E=!0,tn=Nr,An(),n.onExit&&n.onExit(t)),n.quit(t,new mo(t)))}function po(t){throw n.onAbort&&n.onAbort(t),void 0!==t?(d(t),h(t),t=JSON.stringify(t)):t="",E=!0,"abort("+t+"). Build with -s ASSERTIONS=1 for more info."}if(n.dynCall_di=function(){return n.asm.dynCall_di.apply(null,arguments)},n.dynCall_didi=function(){return n.asm.dynCall_didi.apply(null,arguments)},n.dynCall_diii=function(){return n.asm.dynCall_diii.apply(null,arguments)},n.dynCall_dij=function(){return n.asm.dynCall_dij.apply(null,arguments)},n.dynCall_ii=function(){return n.asm.dynCall_ii.apply(null,arguments)},n.dynCall_iid=function(){return n.asm.dynCall_iid.apply(null,arguments)},n.dynCall_iii=function(){return n.asm.dynCall_iii.apply(null,arguments)},n.dynCall_iiii=function(){return n.asm.dynCall_iiii.apply(null,arguments)},n.dynCall_iiiid=function(){return n.asm.dynCall_iiiid.apply(null,arguments)},n.dynCall_iiiii=function(){return n.asm.dynCall_iiiii.apply(null,arguments)},n.dynCall_iiiiid=function(){return n.asm.dynCall_iiiiid.apply(null,arguments)},n.dynCall_iiiiii=function(){return n.asm.dynCall_iiiiii.apply(null,arguments)},n.dynCall_iiiiiid=function(){return n.asm.dynCall_iiiiiid.apply(null,arguments)},n.dynCall_iiiiiii=function(){return n.asm.dynCall_iiiiiii.apply(null,arguments)},n.dynCall_iiiiiiii=function(){return n.asm.dynCall_iiiiiiii.apply(null,arguments)},n.dynCall_iiiiiiiii=function(){return n.asm.dynCall_iiiiiiiii.apply(null,arguments)},n.dynCall_iiiiij=function(){return n.asm.dynCall_iiiiij.apply(null,arguments)},n.dynCall_iij=function(){return n.asm.dynCall_iij.apply(null,arguments)},n.dynCall_iiji=function(){return n.asm.dynCall_iiji.apply(null,arguments)},n.dynCall_iijii=function(){return n.asm.dynCall_iijii.apply(null,arguments)},n.dynCall_iijj=function(){return n.asm.dynCall_iijj.apply(null,arguments)},n.dynCall_ijii=function(){return n.asm.dynCall_ijii.apply(null,arguments)},n.dynCall_ijiii=function(){return n.asm.dynCall_ijiii.apply(null,arguments)},n.dynCall_ijiiii=function(){return n.asm.dynCall_ijiiii.apply(null,arguments)},n.dynCall_ji=function(){return n.asm.dynCall_ji.apply(null,arguments)},n.dynCall_jii=function(){return n.asm.dynCall_jii.apply(null,arguments)},n.dynCall_jiii=function(){return n.asm.dynCall_jiii.apply(null,arguments)},n.dynCall_jij=function(){return n.asm.dynCall_jij.apply(null,arguments)},n.dynCall_jiji=function(){return n.asm.dynCall_jiji.apply(null,arguments)},n.dynCall_jijii=function(){return n.asm.dynCall_jijii.apply(null,arguments)},n.dynCall_v=function(){return n.asm.dynCall_v.apply(null,arguments)},n.dynCall_vi=function(){return n.asm.dynCall_vi.apply(null,arguments)},n.dynCall_vii=function(){return n.asm.dynCall_vii.apply(null,arguments)},n.dynCall_viii=function(){return n.asm.dynCall_viii.apply(null,arguments)},n.dynCall_viiii=function(){return n.asm.dynCall_viiii.apply(null,arguments)},n.dynCall_viiiii=function(){return n.asm.dynCall_viiiii.apply(null,arguments)},n.dynCall_viiiiii=function(){return n.asm.dynCall_viiiiii.apply(null,arguments)},n.dynCall_viiiiiii=function(){return n.asm.dynCall_viiiiiii.apply(null,arguments)},n.dynCall_viijii=function(){return n.asm.dynCall_viijii.apply(null,arguments)},n.dynCall_vijd=function(){return n.asm.dynCall_vijd.apply(null,arguments)},n.asm=Cr,n.ccall=S,n.then=function(t){if(n.calledRun)t(n);else{var e=n.onRuntimeInitialized;n.onRuntimeInitialized=function(){e&&e(),t(n)}}return n},mo.prototype=new Error,mo.prototype.constructor=mo,Bn=function t(){n.calledRun||_o(),n.calledRun||(Bn=t)},n.run=_o,n.abort=po,n.preInit)for("function"==typeof n.preInit&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return n.noExitRuntime=!0,_o(),n});n.exports=r}));const Sn=/(soft\(\w+).*?\)/;function Dn(n,t){return(n.Call||[]).reduce((n,e)=>(e.Witnesses.forEach(e=>{const r=e.Value,o=e.Costs,i=r.filter(n=>n.startsWith("soft(")).map(n=>{const e=Sn.exec(n);if(!e)throw Error("invalid violation: "+n);const r=e[1],o=t.find(n=>n.asp.startsWith(r));if(!o)throw Error(r+" not found!");return Object.assign({},o,{witness:n})});n.push({costs:o,facts:r,violations:i})}),n),[])}function Tn(n){return n.map(n=>e(n.facts))}n.default=class{constructor(n="https://unpkg.com/wasm-clingo@0.2.2",t=console.log){this.initialized=!1,this.stdout="","/"!==n.substr(n.length-1)&&(n+="/");const e=this,u={locateFile:t=>`${n}${t}`,setStatus:t,print(n){e.stdout+=n},totalDependencies:0,monitorRunDependencies(n){u.totalDependencies=Math.max(u.totalDependencies,n),u.setStatus(n?"Preparing... ("+(u.totalDependencies-n)+"/"+u.totalDependencies+")":"All downloads complete.")},printErr(n){n&&(u.setStatus("Received output on stderr."),console.warn(n))}};this.Module=u,this.schema=null,this.hard=s(r),this.soft=s(o,i),this.constraints=a}init(){return new Promise((n,t)=>{this.Module.setStatus("Downloading..."),this.Module.onRuntimeInitialized=()=>{this.initialized=!0,n(this)},Mn(this.Module)})}solve(n,t={}){if(!this.initialized)throw Error("Draco is not initialized. Call `init() first.`");this.Module.setStatus("Running Draco Query..."),n+=this.getDataDeclaration();const e=t.constraints||Object.keys(this.constraints).filter(n=>!("SOFT"===n||"HARD"===n||"WEIGHTS"===n));t.relaxHard&&-1!==e.indexOf("HARD_INTEGRITY")&&e.splice(e.indexOf("HARD_INTEGRITY"),1),n+=e.map(n=>this.constraints[n]).join("\n\n");const r=en(this.soft);n+=en(this.hard).definitions+"\n\n",n+=r.definitions+"\n\n"+r.weights+"\n\n"+r.assigns;const o=["--outf=2","--opt-mode=OptN","--quiet=1","--project",void 0===t.models?1:t.models].concat((t.weights||[]).map(n=>`-c ${n.name}=${n.value}`)).join(" ");this.stdout="",this.Module.ccall("run","number",["string","string"],[n,o]);const i=JSON.parse(this.stdout);if("UNSATISFIABLE"===i.Result)return console.debug("UNSATISFIABLE"),console.debug(i),null;const a=Dn(i,this.soft.concat(this.hard));if(a.length>(t.models||1))throw new Error("Too many models.");const s=Tn(a);return this.Module.setStatus(""),{models:a,programs:e,specs:s,result:i}}getSchema(){return this.schema}prepareData(n){this.schema=tn(n)}updateAsp(n){this.constraints=Object.assign({},this.constraints,n)}getConstraintSet(){return{soft:this.soft,hard:this.hard}}setConstraintSet(n){this.hard=n.hard,this.soft=n.soft}getDataDeclaration(){return this.schema?rn(this.schema).join("\n"):""}},n.getModels=Dn,n.models2vl=Tn,n.vl2asp=function(n){const t=[`mark(${n.mark}).`];"data"in n&&"url"in n.data&&t.push(`data("${n.data.url}").`);const e=n.encoding||{};let r=0;for(const n of Object.keys(e)){const o="e"+r++;t.push(`encoding(${o}).`),t.push(`channel(${o},${n}).`);let i=null,a=null,s=null;for(const r of Object.keys(e[n])){const u=e[n][r];"type"===r&&(i=u),"bin"===r&&(s=u),"scale"===r?("zero"in u&&(a=u.zero,u.zero?t.push(`zero(${o}).`):t.push(`:- zero(${o}).`)),"log"in u&&(u.log?t.push(`log(${o}).`):t.push(`:-log(${o}).`))):"bin"===r?u.maxbins?t.push(`${r}(${o},${u.maxbins}).`):t.push(`${r}(${o},10).`):"field"===r?t.push(`${r}(${o},"${u}").`):"bin"!==r&&t.push(`${r}(${o},${u}).`)}"quantitative"===i&&null===a&&null===s&&t.push(`zero(${o}).`)}return t},n.asp2vl=e,n.cql2asp=function(n){const t=[];p(n.mark)&&t.push(`mark(${n.mark}).`),"data"in n&&"url"in n.data&&t.push(`data("${n.data.url}").`);for(let r=0;r<n.encodings.length;r++){const o=n.encodings[r],i="e"+r;t.push(`encoding(${i}).`);let a=null,s=null,u=null;for(const n of Object.keys(o)){const r=p(o[n]);r&&"*"!==(e=r)&&e&&("type"===n&&(a=r),"bin"===n&&(u=r),"scale"===n?("zero"in r&&(s=r.zero,r.zero?t.push(`zero(${i}).`):t.push(`:- zero(${i}).`)),"log"in r&&(r.log?t.push(`log(${i}).`):t.push(`:-log(${i}).`))):"bin"===n?r.maxbins?t.push(`${n}(${i},${r.maxbins}).`):r?t.push(`:- not bin(${i},_).`):t.push(`:- bin(${i},_).`):"field"===n?t.push(`${n}(${i},"${r}").`):"bin"!==n&&t.push(`${n}(${i},${r}).`))}"quantitative"===a&&null===s&&null===u&&t.push(`zero(${i}).`)}var e;return t},n.data2schema=tn,n.schema2asp=rn,n.constraints=a,n.constraints2json=s,n.json2constraints=en,Object.defineProperty(n,"__esModule",{value:!0})}(t)})),An=(Dn=Tn)&&Dn.__esModule&&Object.prototype.hasOwnProperty.call(Dn,"default")?Dn.default:Dn,Cn=Sn((function(n){var t=n.exports;t.namedfunc=function(n,t){return t.__name__=n,t},t.name=function(n){return null==n?null:n.__name__},t.identity=function(n){return n},t.true=t.namedfunc("true",(function(){return!0})),t.false=t.namedfunc("false",(function(){return!1})),t.duplicate=function(n){return JSON.parse(JSON.stringify(n))},t.equal=function(n,t){return JSON.stringify(n)===JSON.stringify(t)},t.extend=function(n){for(var t,e,r=1,o=arguments.length;r<o;++r)for(e in t=arguments[r])n[e]=t[e];return n},t.length=function(n){return null!=n&&null!=n.length?n.length:null},t.keys=function(n){var t,e=[];for(t in n)e.push(t);return e},t.vals=function(n){var t,e=[];for(t in n)e.push(n[t]);return e},t.toMap=function(n,e){return(e=t.$(e))?n.reduce((function(n,t){return n[e(t)]=1,n}),{}):n.reduce((function(n,t){return n[t]=1,n}),{})},t.keystr=function(n){var t=n.length;if(!t)return"";for(var e=String(n[0]),r=1;r<t;++r)e+="|"+String(n[r]);return e};var e=Object.prototype.toString;t.isObject=function(n){return n===Object(n)},t.isFunction=function(n){return"[object Function]"===e.call(n)},t.isString=function(n){return"string"==typeof value||"[object String]"===e.call(n)},t.isArray=Array.isArray||function(n){return"[object Array]"===e.call(n)},t.isNumber=function(n){return"number"==typeof n||"[object Number]"===e.call(n)},t.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"==e.call(n)},t.isDate=function(n){return"[object Date]"===e.call(n)},t.isValid=function(n){return null!=n&&n==n},t.isBuffer="function"==typeof Buffer&&Buffer.isBuffer||t.false,t.number=function(n){return null==n||""===n?null:+n},t.boolean=function(n){return null==n||""===n?null:"false"!==n&&!!n},t.date=function(n,t){var e=t||Date;return null==n||""===n?null:e.parse(n)},t.array=function(n){return null!=n?t.isArray(n)?n:[n]:[]},t.str=function(n){return t.isArray(n)?"["+n.map(t.str)+"]":t.isObject(n)||t.isString(n)?JSON.stringify(n).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):n};var r=/\[(.*?)\]|[^.\[]+/g;function o(n,t){var e,r="";for(e=0;e<n;++e)r+=t;return r}function i(n,t,e){var r=0,o=n.split(a);return(n=e?(o=o.reverse()).filter((function(n){return(r+=n.length)<=t})).reverse():o.filter((function(n){return(r+=n.length)<=t}))).length?n.join("").trim():o[0].slice(0,t)}t.field=function(n){return String(n).match(r).map((function(n){return"["!==n[0]?n:"'"!==n[1]&&'"'!==n[1]?n.slice(1,-1):n.slice(2,-2).replace(/\\(["'])/g,"$1")}))},t.accessor=function(n){return null==n||t.isFunction(n)?n:t.namedfunc(n,Function("x","return x["+t.field(n).map(t.str).join("][")+"];"))},t.$=t.accessor,t.mutator=function(n){var e;return t.isString(n)&&(e=t.field(n)).length>1?function(n,t){for(var r=0;r<e.length-1;++r)n=n[e[r]];n[e[r]]=t}:function(t,e){t[n]=e}},t.$func=function(n,e){return function(r){r=t.$(r)||t.identity;var o=n+(t.name(r)?"_"+t.name(r):"");return t.namedfunc(o,(function(n){return e(r(n))}))}},t.$valid=t.$func("valid",t.isValid),t.$length=t.$func("length",t.length),t.$in=function(n,e){n=t.$(n);var r=t.isArray(e)?t.toMap(e):e;return function(t){return!!r[n(t)]}},t.comparator=function(n){var e=[];return void 0===n&&(n=[]),n=t.array(n).map((function(n){var r=1;return"-"===n[0]?(r=-1,n=n.slice(1)):"+"===n[0]&&(r=1,n=n.slice(1)),e.push(r),t.accessor(n)})),function(r,o){var i,a,s,u;for(i=0,a=n.length;i<a;++i)if(s=n[i],u=t.cmp(s(r),s(o)))return u*e[i];return 0}},t.cmp=function(n,t){return(n<t||null==n)&&null!=t?-1:(n>t||null==t)&&null!=n?1:(t=t instanceof Date?+t:t,(n=n instanceof Date?+n:n)!==n&&t==t?-1:t!=t&&n==n?1:0)},t.numcmp=function(n,t){return n-t},t.stablesort=function(n,t,e){var r=n.reduce((function(n,t,r){return n[e(t)]=r,n}),{});return n.sort((function(n,o){var i=t(n),a=t(o);return i<a?-1:i>a?1:r[e(n)]-r[e(o)]})),n},t.permute=function(n){for(var t,e,r=n.length;r;)e=Math.floor(Math.random()*r--),t=n[r],n[r]=n[e],n[e]=t},t.pad=function(n,t,e,r){r=r||" ";var i=t-n.length;if(i<=0)return n;switch(e){case"left":return o(i,r)+n;case"middle":case"center":return o(Math.floor(i/2),r)+n+o(Math.ceil(i/2),r);default:return n+o(i,r)}},t.truncate=function(n,t,e,r,o){var a=n.length;if(a<=t)return n;o=void 0!==o?String(o):"…";var s=Math.max(0,t-o.length);switch(e){case"left":return o+(r?i(n,s,1):n.slice(a-s));case"middle":case"center":var u=Math.ceil(s/2),c=Math.floor(s/2);return(r?i(n,u):n.slice(0,u))+o+(r?i(n,c,1):n.slice(a-c));default:return(r?i(n,s):n.slice(0,s))+o}};var a=/([\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u2028\u2029\u3000\uFEFF])/})),Nn="__types__",On={boolean:Cn.boolean,integer:Cn.number,number:Cn.number,date:Cn.date,string:function(n){return null==n||""===n?null:n+""}},jn={boolean:function(n){return"true"===n||"false"===n||Cn.isBoolean(n)},integer:function(n){return jn.number(n)&&(n=+n)==~~n},number:function(n){return!isNaN(+n)&&!Cn.isDate(n)},date:function(n){return!isNaN(Date.parse(n))}};function Fn(n){return Cn.keys(n)}function zn(n){return"["+n+"]"}function Pn(n,t){var e,r,o;if(n=Cn.array(n),t=Cn.$(t),n[Nn]&&(e=t(n[Nn]),Cn.isString(e)))return e;for(r=0,o=n.length;!Cn.isValid(e)&&r<o;++r)e=t?t(n[r]):n[r];return Cn.isDate(e)?"date":Cn.isNumber(e)?"number":Cn.isBoolean(e)?"boolean":Cn.isString(e)?"string":null}function In(n,t,e){var r,o,i;n=Cn.array(n),t=Cn.$(t);var a=["boolean","integer","number","date"];for(r=0;r<n.length;++r){for(i=t?t(n[r]):n[r],o=0;o<a.length;++o)e&&e.test(i)||!Cn.isValid(i)||jn[a[o]](i)||(a.splice(o,1),o-=1);if(0===a.length)return"string"}return a[0]}Pn.annotation=function(n,t){if(!t)return n&&n[Nn]||null;n[Nn]=t},Pn.all=function(n,t){if(n.length){var e=t?Cn.identity:(t=Fn(n[0]),zn);return t.reduce((function(t,r){return t[r]=Pn(n,e(r)),t}),{})}},Pn.infer=In,Pn.inferAll=function(n,t,e){var r=t?Cn.identity:(t=Fn(n[0]),zn);return t.reduce((function(t,o){return t[o]=In(n,r(o),e),t}),{})},Pn.parsers=On;var Ln=Pn,$n=Sn((function(n,t){!function(n){function t(n){return new r(n)}function e(n){return new Function("d","return {"+n.map((function(n,t){return JSON.stringify(n)+": d["+t+"]"})).join(",")+"}")}function r(n){var t=new RegExp('["'+n+"\n]"),r=n.charCodeAt(0);function o(t){return t.map(i).join(n)}function i(n){return t.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}this.parse=function(n,t){var r,o,i=this.parseRows(n,(function(n,i){if(r)return r(n,i-1);o=n,r=t?function(n,t){var r=e(n);return function(e,o){return t(r(e),o,n)}}(n,t):e(n)}));return i.columns=o,i},this.parseRows=function(n,t){var e,o,i={},a={},s=[],u=n.length,c=0,l=0;function f(){if(c>=u)return a;if(o)return o=!1,i;var t,e=c;if(34===n.charCodeAt(e)){for(var s=e;s++<u;)if(34===n.charCodeAt(s)){if(34!==n.charCodeAt(s+1))break;++s}return c=s+2,13===(t=n.charCodeAt(s+1))?(o=!0,10===n.charCodeAt(s+2)&&++c):10===t&&(o=!0),n.slice(e+1,s).replace(/""/g,'"')}for(;c<u;){var l=1;if(10===(t=n.charCodeAt(c++)))o=!0;else if(13===t)o=!0,10===n.charCodeAt(c)&&(++c,++l);else if(t!==r)continue;return n.slice(e,c-l)}return n.slice(e)}for(;(e=f())!==a;){for(var d=[];e!==i&&e!==a;)d.push(e),e=f();t&&null==(d=t(d,l++))||s.push(d)}return s},this.format=function(t,e){return null==e&&(e=function(n){var t=Object.create(null),e=[];return n.forEach((function(n){for(var r in n)r in t||e.push(t[r]=r)})),e}(t)),[e.map(i).join(n)].concat(t.map((function(t){return e.map((function(n){return i(t[n])})).join(n)}))).join("\n")},this.formatRows=function(n){return n.map(o).join("\n")}}t.prototype=r.prototype;var o=t(","),i=t("\t");n.version="0.1.14",n.dsv=t,n.csv=o,n.tsv=i}(t)}));function Bn(n,t){if(n){var e=t.header;n=(e?e.join(t.delimiter)+"\n":"")+n}return $n.dsv(t.delimiter).parse(n)}Bn.delimiter=function(n){var t={delimiter:n};return function(n,e){return Bn(n,e?Cn.extend(e,t):t)}};var Rn=Bn,Yn=function(n,t){var e=Cn.isObject(n)&&!Cn.isBuffer(n)?n:JSON.parse(n);return t&&t.property&&(e=Cn.accessor(t.property)(e)),e};function Un(n){return n}function Hn(n){if(null==n)return Un;var t,e,r=n.scale[0],o=n.scale[1],i=n.translate[0],a=n.translate[1];return function(n,s){s||(t=e=0);var u=2,c=n.length,l=new Array(c);for(l[0]=(t+=n[0])*r+i,l[1]=(e+=n[1])*o+a;u<c;)l[u]=n[u],++u;return l}}function qn(n){var t,e=Hn(n.transform),r=1/0,o=r,i=-r,a=-r;function s(n){(n=e(n))[0]<r&&(r=n[0]),n[0]>i&&(i=n[0]),n[1]<o&&(o=n[1]),n[1]>a&&(a=n[1])}function u(n){switch(n.type){case"GeometryCollection":n.geometries.forEach(u);break;case"Point":s(n.coordinates);break;case"MultiPoint":n.coordinates.forEach(s)}}for(t in n.arcs.forEach((function(n){for(var t,s=-1,u=n.length;++s<u;)(t=e(n[s],s))[0]<r&&(r=t[0]),t[0]>i&&(i=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])})),n.objects)u(n.objects[t]);return[r,o,i,a]}function Vn(n,t){var e=t.id,r=t.bbox,o=null==t.properties?{}:t.properties,i=Jn(n,t);return null==e&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:e,properties:o,geometry:i}:{type:"Feature",id:e,bbox:r,properties:o,geometry:i}}function Jn(n,t){var e=Hn(n.transform),r=n.arcs;function o(n,t){t.length&&t.pop();for(var o=r[n<0?~n:n],i=0,a=o.length;i<a;++i)t.push(e(o[i],i));n<0&&function(n,t){for(var e,r=n.length,o=r-t;o<--r;)e=n[o],n[o++]=n[r],n[r]=e}(t,a)}function i(n){return e(n)}function a(n){for(var t=[],e=0,r=n.length;e<r;++e)o(n[e],t);return t.length<2&&t.push(t[0]),t}function s(n){for(var t=a(n);t.length<4;)t.push(t[0]);return t}function u(n){return n.map(s)}return function n(t){var e,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(n)};case"Point":e=i(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(i);break;case"LineString":e=a(t.arcs);break;case"MultiLineString":e=t.arcs.map(a);break;case"Polygon":e=u(t.arcs);break;case"MultiPolygon":e=t.arcs.map(u);break;default:return null}return{type:r,coordinates:e}}(t)}function Xn(n,t){var e={},r={},o={},i=[],a=-1;function s(n,t){for(var r in n){var o=n[r];delete t[o.start],delete o.start,delete o.end,o.forEach((function(n){e[n<0?~n:n]=1})),i.push(o)}}return t.forEach((function(e,r){var o,i=n.arcs[e<0?~e:e];i.length<3&&!i[1][0]&&!i[1][1]&&(o=t[++a],t[a]=e,t[r]=o)})),t.forEach((function(t){var e,i,a=function(t){var e,r=n.arcs[t<0?~t:t],o=r[0];n.transform?(e=[0,0],r.forEach((function(n){e[0]+=n[0],e[1]+=n[1]}))):e=r[r.length-1];return t<0?[e,o]:[o,e]}(t),s=a[0],u=a[1];if(e=o[s])if(delete o[e.end],e.push(t),e.end=u,i=r[u]){delete r[i.start];var c=i===e?e:e.concat(i);r[c.start=e.start]=o[c.end=i.end]=c}else r[e.start]=o[e.end]=e;else if(e=r[u])if(delete r[e.start],e.unshift(t),e.start=s,i=o[s]){delete o[i.end];var l=i===e?e:i.concat(e);r[l.start=i.start]=o[l.end=e.end]=l}else r[e.start]=o[e.end]=e;else r[(e=[t]).start=s]=o[e.end=u]=e})),s(o,r),s(r,o),t.forEach((function(n){e[n<0?~n:n]||i.push([n])})),i}function Wn(n,t,e){var r,o,i;if(arguments.length>1)r=Gn(n,t,e);else for(o=0,r=new Array(i=n.arcs.length);o<i;++o)r[o]=o;return{type:"MultiLineString",arcs:Xn(n,r)}}function Gn(n,t,e){var r,o=[],i=[];function a(n){var t=n<0?~n:n;(i[t]||(i[t]=[])).push({i:n,g:r})}function s(n){n.forEach(a)}function u(n){n.forEach(s)}return function n(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(n){n.forEach(u)}(t.arcs)}}(t),i.forEach(null==e?function(n){o.push(n[0].i)}:function(n){e(n[0].g,n[n.length-1].g)&&o.push(n[0].i)}),o}function Kn(n,t){var e={},r=[],o=[];function i(n){n.forEach((function(t){t.forEach((function(t){(e[t=t<0?~t:t]||(e[t]=[])).push(n)}))})),r.push(n)}function a(t){return function(n){for(var t,e=-1,r=n.length,o=n[r-1],i=0;++e<r;)t=o,o=n[e],i+=t[0]*o[1]-t[1]*o[0];return Math.abs(i)}(Jn(n,{type:"Polygon",arcs:[t]}).coordinates[0])}return t.forEach((function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Polygon":i(t.arcs);break;case"MultiPolygon":t.arcs.forEach(i)}})),r.forEach((function(n){if(!n._){var t=[],r=[n];for(n._=1,o.push(t);n=r.pop();)t.push(n),n.forEach((function(n){n.forEach((function(n){e[n<0?~n:n].forEach((function(n){n._||(n._=1,r.push(n))}))}))}))}})),r.forEach((function(n){delete n._})),{type:"MultiPolygon",arcs:o.map((function(t){var r,o=[];if(t.forEach((function(n){n.forEach((function(n){n.forEach((function(n){e[n<0?~n:n].length<2&&o.push(n)}))}))})),(r=(o=Xn(n,o)).length)>1)for(var i,s,u=1,c=a(o[0]);u<r;++u)(i=a(o[u]))>c&&(s=o[0],o[0]=o[u],o[u]=s,c=i);return o})).filter((function(n){return n.length>0}))}}function Zn(n,t){for(var e=0,r=n.length;e<r;){var o=e+r>>>1;n[o]<t?e=o+1:r=o}return e}function Qn(n){if(null==n)return Un;var t,e,r=n.scale[0],o=n.scale[1],i=n.translate[0],a=n.translate[1];return function(n,s){s||(t=e=0);var u=2,c=n.length,l=new Array(c),f=Math.round((n[0]-i)/r),d=Math.round((n[1]-a)/o);for(l[0]=f-t,t=f,l[1]=d-e,e=d;u<c;)l[u]=n[u],++u;return l}}var nt=Object.freeze({__proto__:null,bbox:qn,feature:function(n,t){return"string"==typeof t&&(t=n.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return Vn(n,t)}))}:Vn(n,t)},mesh:function(n){return Jn(n,Wn.apply(this,arguments))},meshArcs:Wn,merge:function(n){return Jn(n,Kn.apply(this,arguments))},mergeArcs:Kn,neighbors:function(n){var t={},e=n.map((function(){return[]}));function r(n,e){n.forEach((function(n){n<0&&(n=~n);var r=t[n];r?r.push(e):t[n]=[e]}))}function o(n,t){n.forEach((function(n){r(n,t)}))}var i={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(n,t){n.forEach((function(n){o(n,t)}))}};for(var a in n.forEach((function n(t,e){"GeometryCollection"===t.type?t.geometries.forEach((function(t){n(t,e)})):t.type in i&&i[t.type](t.arcs,e)})),t)for(var s=t[a],u=s.length,c=0;c<u;++c)for(var l=c+1;l<u;++l){var f,d=s[c],h=s[l];(f=e[d])[a=Zn(f,h)]!==h&&f.splice(a,0,h),(f=e[h])[a=Zn(f,d)]!==d&&f.splice(a,0,d)}return e},quantize:function(n,t){if(n.transform)throw new Error("already quantized");if(t&&t.scale)s=n.bbox;else{if(!((e=Math.floor(t))>=2))throw new Error("n must be ≥2");var e,r=(s=n.bbox||qn(n))[0],o=s[1],i=s[2],a=s[3];t={scale:[i-r?(i-r)/(e-1):1,a-o?(a-o)/(e-1):1],translate:[r,o]}}var s,u,c=Qn(t),l=n.objects,f={};function d(n){return c(n)}function h(n){var t;switch(n.type){case"GeometryCollection":t={type:"GeometryCollection",geometries:n.geometries.map(h)};break;case"Point":t={type:"Point",coordinates:d(n.coordinates)};break;case"MultiPoint":t={type:"MultiPoint",coordinates:n.coordinates.map(d)};break;default:return n}return null!=n.id&&(t.id=n.id),null!=n.bbox&&(t.bbox=n.bbox),null!=n.properties&&(t.properties=n.properties),t}for(u in l)f[u]=h(l[u]);return{type:"Topology",bbox:s,transform:t,objects:f,arcs:n.arcs.map((function(n){var t,e=0,r=1,o=n.length,i=new Array(o);for(i[0]=c(n[0],0);++e<o;)((t=c(n[e],e))[0]||t[1])&&(i[r++]=t);return 1===r&&(i[r++]=[0,0]),i.length=r,i}))}},transform:Hn,untransform:Qn}),tt=function(n,t){var e=tt.topojson;if(null==e)throw Error("TopoJSON library not loaded.");var r,o=Yn(n,t);if(t&&t.feature){if(r=o.objects[t.feature])return e.feature(o,r).features;throw Error("Invalid TopoJSON object: "+t.feature)}if(t&&t.mesh){if(r=o.objects[t.mesh])return[e.mesh(o,o.objects[t.mesh])];throw Error("Invalid TopoJSON object: "+t.mesh)}throw Error("Missing TopoJSON feature or mesh parameter.")};tt.topojson=nt;Rn.delimiter(","),Rn.delimiter("\t");var et=Sn((function(n,t){!function(n){var t=new Date,e=new Date;function r(n,o,i,a){function s(t){return n(t=new Date(+t)),t}return s.floor=s,s.round=function(t){var e=new Date(+t),r=new Date(t-1);return n(e),n(r),o(r,1),t-e<r-t?e:r},s.ceil=function(t){return n(t=new Date(t-1)),o(t,1),t},s.offset=function(n,t){return o(n=new Date(+n),null==t?1:Math.floor(t)),n},s.range=function(t,e,r){var i=[];if(t=new Date(t-1),e=new Date(+e),r=null==r?1:Math.floor(r),!(t<e&&r>0))return i;for(o(t,1),n(t),t<e&&i.push(new Date(+t));o(t,r),n(t),t<e;)i.push(new Date(+t));return i},s.filter=function(t){return r((function(e){for(;n(e),!t(e);)e.setTime(e-1)}),(function(n,e){for(;--e>=0;)for(;o(n,1),!t(n););}))},i&&(s.count=function(r,o){return t.setTime(+r),e.setTime(+o),n(t),n(e),Math.floor(i(t,e))},s.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?s.filter(a?function(t){return a(t)%n==0}:function(t){return s.count(0,t)%n==0}):s:null}),s}var o=r((function(){}),(function(n,t){n.setTime(+n+t)}),(function(n,t){return t-n}));o.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?r((function(t){t.setTime(Math.floor(t/n)*n)}),(function(t,e){t.setTime(+t+e*n)}),(function(t,e){return(e-t)/n})):o:null};var i=r((function(n){n.setMilliseconds(0)}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getSeconds()})),a=r((function(n){n.setSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getMinutes()})),s=r((function(n){n.setMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getHours()})),u=r((function(n){n.setHours(0,0,0,0)}),(function(n,t){n.setDate(n.getDate()+t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5}),(function(n){return n.getDate()-1}));function c(n){return r((function(t){t.setHours(0,0,0,0),t.setDate(t.getDate()-(t.getDay()+7-n)%7)}),(function(n,t){n.setDate(n.getDate()+7*t)}),(function(n,t){return(t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/6048e5}))}var l=c(0),f=c(1),d=c(2),h=c(3),m=c(4),_=c(5),g=c(6),p=r((function(n){n.setHours(0,0,0,0),n.setDate(1)}),(function(n,t){n.setMonth(n.getMonth()+t)}),(function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())}),(function(n){return n.getMonth()})),y=r((function(n){n.setHours(0,0,0,0),n.setMonth(0,1)}),(function(n,t){n.setFullYear(n.getFullYear()+t)}),(function(n,t){return t.getFullYear()-n.getFullYear()}),(function(n){return n.getFullYear()})),v=r((function(n){n.setUTCMilliseconds(0)}),(function(n,t){n.setTime(+n+1e3*t)}),(function(n,t){return(t-n)/1e3}),(function(n){return n.getUTCSeconds()})),w=r((function(n){n.setUTCSeconds(0,0)}),(function(n,t){n.setTime(+n+6e4*t)}),(function(n,t){return(t-n)/6e4}),(function(n){return n.getUTCMinutes()})),E=r((function(n){n.setUTCMinutes(0,0,0)}),(function(n,t){n.setTime(+n+36e5*t)}),(function(n,t){return(t-n)/36e5}),(function(n){return n.getUTCHours()})),b=r((function(n){n.setUTCHours(0,0,0,0)}),(function(n,t){n.setUTCDate(n.getUTCDate()+t)}),(function(n,t){return(t-n)/864e5}),(function(n){return n.getUTCDate()-1}));function k(n){return r((function(t){t.setUTCHours(0,0,0,0),t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7)}),(function(n,t){n.setUTCDate(n.getUTCDate()+7*t)}),(function(n,t){return(t-n)/6048e5}))}var M=k(0),x=k(1),S=k(2),D=k(3),T=k(4),A=k(5),C=k(6),N=r((function(n){n.setUTCHours(0,0,0,0),n.setUTCDate(1)}),(function(n,t){n.setUTCMonth(n.getUTCMonth()+t)}),(function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())}),(function(n){return n.getUTCMonth()})),O=r((function(n){n.setUTCHours(0,0,0,0),n.setUTCMonth(0,1)}),(function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)}),(function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()}),(function(n){return n.getUTCFullYear()})),j=o.range,F=i.range,z=a.range,P=s.range,I=u.range,L=l.range,$=f.range,B=d.range,R=h.range,Y=m.range,U=_.range,H=g.range,q=l.range,V=p.range,J=y.range,X=o,W=j,G=v.range,K=w.range,Z=E.range,Q=b.range,nn=M.range,tn=x.range,en=S.range,rn=D.range,on=T.range,an=A.range,sn=C.range,un=M.range,cn=N.range,ln=O.range;n.version="0.1.1",n.milliseconds=j,n.seconds=F,n.minutes=z,n.hours=P,n.days=I,n.sundays=L,n.mondays=$,n.tuesdays=B,n.wednesdays=R,n.thursdays=Y,n.fridays=U,n.saturdays=H,n.weeks=q,n.months=V,n.years=J,n.utcMillisecond=X,n.utcMilliseconds=W,n.utcSeconds=G,n.utcMinutes=K,n.utcHours=Z,n.utcDays=Q,n.utcSundays=nn,n.utcMondays=tn,n.utcTuesdays=en,n.utcWednesdays=rn,n.utcThursdays=on,n.utcFridays=an,n.utcSaturdays=sn,n.utcWeeks=un,n.utcMonths=cn,n.utcYears=ln,n.millisecond=o,n.second=i,n.minute=a,n.hour=s,n.day=u,n.sunday=l,n.monday=f,n.tuesday=d,n.wednesday=h,n.thursday=m,n.friday=_,n.saturday=g,n.week=l,n.month=p,n.year=y,n.utcSecond=v,n.utcMinute=w,n.utcHour=E,n.utcDay=b,n.utcSunday=M,n.utcMonday=x,n.utcTuesday=S,n.utcWednesday=D,n.utcThursday=T,n.utcFriday=A,n.utcSaturday=C,n.utcWeek=M,n.utcMonth=N,n.utcYear=O,n.interval=r}(t)})),rt=(Sn((function(n,t){!function(n,t){function e(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function r(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function o(n){return{y:n,m:0,d:1,H:0,M:0,S:0,L:0}}function i(n){var t=n.dateTime,i=n.date,s=n.time,u=n.periods,c=n.days,l=n.shortDays,f=n.months,rn=n.shortMonths,on=d(u),an=h(u),sn=d(c),un=h(c),cn=d(l),ln=h(l),fn=d(f),dn=h(f),hn=d(rn),mn=h(rn),_n={a:function(n){return l[n.getDay()]},A:function(n){return c[n.getDay()]},b:function(n){return rn[n.getMonth()]},B:function(n){return f[n.getMonth()]},c:null,d:T,e:T,H:A,I:C,j:N,L:O,m:j,M:F,p:function(n){return u[+(n.getHours()>=12)]},S:z,U:P,w:I,W:L,x:null,X:null,y:$,Y:B,Z:R,"%":en},gn={a:function(n){return l[n.getUTCDay()]},A:function(n){return c[n.getUTCDay()]},b:function(n){return rn[n.getUTCMonth()]},B:function(n){return f[n.getUTCMonth()]},c:null,d:Y,e:Y,H:U,I:H,j:q,L:V,m:J,M:X,p:function(n){return u[+(n.getUTCHours()>=12)]},S:W,U:G,w:K,W:Z,x:null,X:null,y:Q,Y:nn,Z:tn,"%":en},pn={a:function(n,t,e){var r=cn.exec(t.slice(e));return r?(n.w=ln[r[0].toLowerCase()],e+r[0].length):-1},A:function(n,t,e){var r=sn.exec(t.slice(e));return r?(n.w=un[r[0].toLowerCase()],e+r[0].length):-1},b:function(n,t,e){var r=hn.exec(t.slice(e));return r?(n.m=mn[r[0].toLowerCase()],e+r[0].length):-1},B:function(n,t,e){var r=fn.exec(t.slice(e));return r?(n.m=dn[r[0].toLowerCase()],e+r[0].length):-1},c:function(n,e,r){return wn(n,t,e,r)},d:E,e:E,H:k,I:k,j:b,L:S,m:w,M:M,p:function(n,t,e){var r=on.exec(t.slice(e));return r?(n.p=an[r[0].toLowerCase()],e+r[0].length):-1},S:x,U:_,w:m,W:g,x:function(n,t,e){return wn(n,i,t,e)},X:function(n,t,e){return wn(n,s,t,e)},y:y,Y:p,Z:v,"%":D};function yn(n,t){return function(e){var r,o,i,s=[],u=-1,c=0,l=n.length;for(e instanceof Date||(e=new Date(+e));++u<l;)37===n.charCodeAt(u)&&(s.push(n.slice(c,u)),null!=(o=a[r=n.charAt(++u)])?r=n.charAt(++u):o="e"===r?" ":"0",(i=t[r])&&(r=i(e,o)),s.push(r),c=u+1);return s.push(n.slice(c,u)),s.join("")}}function vn(n,t){return function(e){var i=o(1900);if(wn(i,n,e+="",0)!=e.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?r(o(i.y)).getUTCDay():t(o(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,r(i)):t(i)}}function wn(n,t,e,r){for(var o,i,s=0,u=t.length,c=e.length;s<u;){if(r>=c)return-1;if(37===(o=t.charCodeAt(s++))){if(o=t.charAt(s++),!(i=pn[o in a?t.charAt(s++):o])||(r=i(n,e,r))<0)return-1}else if(o!=e.charCodeAt(r++))return-1}return r}return _n.x=yn(i,_n),_n.X=yn(s,_n),_n.c=yn(t,_n),gn.x=yn(i,gn),gn.X=yn(s,gn),gn.c=yn(t,gn),{format:function(n){var t=yn(n+="",_n);return t.parse=vn(n,e),t.toString=function(){return n},t},utcFormat:function(n){var t=yn(n+="",gn);return t.parse=vn(n,r),t.toString=function(){return n},t}}}var a={"-":"",_:" ",0:"0"},s=/^\s*\d+/,u=/^%/,c=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function l(n,t,e){var r=n<0?"-":"",o=(r?-n:n)+"",i=o.length;return r+(i<e?new Array(e-i+1).join(t)+o:o)}function f(n){return n.replace(c,"\\$&")}function d(n){return new RegExp("^(?:"+n.map(f).join("|")+")","i")}function h(n){for(var t={},e=-1,r=n.length;++e<r;)t[n[e].toLowerCase()]=e;return t}function m(n,t,e){var r=s.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function _(n,t,e){var r=s.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function g(n,t,e){var r=s.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function p(n,t,e){var r=s.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function y(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function v(n,t,e){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function w(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function E(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function b(n,t,e){var r=s.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function k(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function M(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function x(n,t,e){var r=s.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function S(n,t,e){var r=s.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function D(n,t,e){var r=u.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function T(n,t){return l(n.getDate(),t,2)}function A(n,t){return l(n.getHours(),t,2)}function C(n,t){return l(n.getHours()%12||12,t,2)}function N(n,e){return l(1+t.day.count(t.year(n),n),e,3)}function O(n,t){return l(n.getMilliseconds(),t,3)}function j(n,t){return l(n.getMonth()+1,t,2)}function F(n,t){return l(n.getMinutes(),t,2)}function z(n,t){return l(n.getSeconds(),t,2)}function P(n,e){return l(t.sunday.count(t.year(n),n),e,2)}function I(n){return n.getDay()}function L(n,e){return l(t.monday.count(t.year(n),n),e,2)}function $(n,t){return l(n.getFullYear()%100,t,2)}function B(n,t){return l(n.getFullYear()%1e4,t,4)}function R(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+l(t/60|0,"0",2)+l(t%60,"0",2)}function Y(n,t){return l(n.getUTCDate(),t,2)}function U(n,t){return l(n.getUTCHours(),t,2)}function H(n,t){return l(n.getUTCHours()%12||12,t,2)}function q(n,e){return l(1+t.utcDay.count(t.utcYear(n),n),e,3)}function V(n,t){return l(n.getUTCMilliseconds(),t,3)}function J(n,t){return l(n.getUTCMonth()+1,t,2)}function X(n,t){return l(n.getUTCMinutes(),t,2)}function W(n,t){return l(n.getUTCSeconds(),t,2)}function G(n,e){return l(t.utcSunday.count(t.utcYear(n),n),e,2)}function K(n){return n.getUTCDay()}function Z(n,e){return l(t.utcMonday.count(t.utcYear(n),n),e,2)}function Q(n,t){return l(n.getUTCFullYear()%100,t,2)}function nn(n,t){return l(n.getUTCFullYear()%1e4,t,4)}function tn(){return"+0000"}function en(){return"%"}var rn=i({dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),on=i({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["diumenge","dilluns","dimarts","dimecres","dijous","divendres","dissabte"],shortDays:["dg.","dl.","dt.","dc.","dj.","dv.","ds."],months:["gener","febrer","març","abril","maig","juny","juliol","agost","setembre","octubre","novembre","desembre"],shortMonths:["gen.","febr.","març","abr.","maig","juny","jul.","ag.","set.","oct.","nov.","des."]}),an=i({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),sn=i({dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]}),un=i({dateTime:"%a %b %e %X %Y",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),cn=i({dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),ln=i({dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]}),fn=i({dateTime:"%A, %-d. %Bta %Y klo %X",date:"%-d.%-m.%Y",time:"%H:%M:%S",periods:["a.m.","p.m."],days:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"],shortDays:["Su","Ma","Ti","Ke","To","Pe","La"],months:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"],shortMonths:["Tammi","Helmi","Maalis","Huhti","Touko","Kesä","Heinä","Elo","Syys","Loka","Marras","Joulu"]}),dn=i({dateTime:"%a %e %b %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["",""],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim","lun","mar","mer","jeu","ven","sam"],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["jan","fév","mar","avr","mai","jui","jul","aoû","sep","oct","nov","déc"]}),hn=i({dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]}),mn=i({dateTime:"%A, %e ב%B %Y %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["ראשון","שני","שלישי","רביעי","חמישי","שישי","שבת"],shortDays:["א׳","ב׳","ג׳","ד׳","ה׳","ו׳","ש׳"],months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],shortMonths:["ינו׳","פבר׳","מרץ","אפר׳","מאי","יוני","יולי","אוג׳","ספט׳","אוק׳","נוב׳","דצמ׳"]}),_n=i({dateTime:"%Y. %B %-e., %A %X",date:"%Y. %m. %d.",time:"%H:%M:%S",periods:["de.","du."],days:["vasárnap","hétfő","kedd","szerda","csütörtök","péntek","szombat"],shortDays:["V","H","K","Sze","Cs","P","Szo"],months:["január","február","március","április","május","június","július","augusztus","szeptember","október","november","december"],shortMonths:["jan.","feb.","már.","ápr.","máj.","jún.","júl.","aug.","szept.","okt.","nov.","dec."]}),gn=i({dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]}),pn=i({dateTime:"%Y %b %e %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["AM","PM"],days:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"],shortDays:["日","月","火","水","木","金","土"],months:["睦月","如月","弥生","卯月","皐月","水無月","文月","葉月","長月","神無月","霜月","師走"],shortMonths:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]}),yn=i({dateTime:"%Y/%m/%d %a %X",date:"%Y/%m/%d",time:"%H:%M:%S",periods:["오전","오후"],days:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],shortDays:["일","월","화","수","목","금","토"],months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],shortMonths:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]}),vn=i({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]}),wn=i({dateTime:"%a %e %B %Y %T",date:"%d-%m-%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],shortDays:["zo","ma","di","wo","do","vr","za"],months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],shortMonths:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"]}),En=i({dateTime:"%A, %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Niedziela","Poniedziałek","Wtorek","Środa","Czwartek","Piątek","Sobota"],shortDays:["Niedz.","Pon.","Wt.","Śr.","Czw.","Pt.","Sob."],months:["Styczeń","Luty","Marzec","Kwiecień","Maj","Czerwiec","Lipiec","Sierpień","Wrzesień","Październik","Listopad","Grudzień"],shortMonths:["Stycz.","Luty","Marz.","Kwie.","Maj","Czerw.","Lipc.","Sierp.","Wrz.","Paźdz.","Listop.","Grudz."]}),bn=i({dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}),kn=i({dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],shortDays:["вс","пн","вт","ср","чт","пт","сб"],months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],shortMonths:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"]}),Mn=i({dateTime:"%A den %d %B %Y %X",date:"%Y-%m-%d",time:"%H:%M:%S",periods:["fm","em"],days:["Söndag","Måndag","Tisdag","Onsdag","Torsdag","Fredag","Lördag"],shortDays:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"],months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],shortMonths:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"]}),xn=i({dateTime:"%a %b %e %X %Y",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]});function Sn(n){return n.toISOString()}Sn.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Sn.toString=function(){return"%Y-%m-%dT%H:%M:%S.%LZ"};var Dn=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sn:rn.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Tn=rn.format,An=rn.utcFormat;n.version="0.2.1",n.format=Tn,n.utcFormat=An,n.locale=i,n.localeCaEs=on,n.localeDeCh=an,n.localeDeDe=sn,n.localeEnCa=un,n.localeEnGb=cn,n.localeEnUs=rn,n.localeEsEs=ln,n.localeFiFi=fn,n.localeFrCa=dn,n.localeFrFr=hn,n.localeHeIl=mn,n.localeHuHu=_n,n.localeItIt=gn,n.localeJaJp=pn,n.localeKoKr=yn,n.localeMkMk=vn,n.localeNlNl=wn,n.localePlPl=En,n.localePtBr=bn,n.localeRuRu=kn,n.localeSvSe=Mn,n.localeZhCn=xn,n.isoFormat=Dn}(t,et)})),Sn((function(n,t){!function(n){function t(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function e(n){return(n=t(Math.abs(n)))?n[1]:NaN}var r;function o(n,e){var r=t(n,e);if(!r)return n+"";var o=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}var i={"":function(n,t){n:for(var e,r=(n=n.toPrecision(t)).length,o=1,i=-1;o<r;++o)switch(n[o]){case".":i=e=o;break;case"0":0===i&&(i=o),e=o;break;case"e":break n;default:i>0&&(i=0)}return i>0?n.slice(0,i)+n.slice(e+1):n},"%":function(n,t){return(100*n).toFixed(t)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},g:function(n,t){return n.toPrecision(t)},o:function(n){return Math.round(n).toString(8)},p:function(n,t){return o(100*n,t)},r:o,s:function(n,e){var o=t(n,e);if(!o)return n+"";var i=o[0],a=o[1],s=a-(r=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=i.length;return s===u?i:s>u?i+new Array(s-u+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+t(n,Math.max(0,e+s-1))[0]},X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}},a=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function s(n){return new u(n)}function u(n){if(!(t=a.exec(n)))throw new Error("invalid format: "+n);var t,e=t[1]||" ",r=t[2]||">",o=t[3]||"-",s=t[4]||"",u=!!t[5],c=t[6]&&+t[6],l=!!t[7],f=t[8]&&+t[8].slice(1),d=t[9]||"";"n"===d?(l=!0,d="g"):i[d]||(d=""),(u||"0"===e&&"="===r)&&(u=!0,e="0",r="="),this.fill=e,this.align=r,this.sign=o,this.symbol=s,this.zero=u,this.width=c,this.comma=l,this.precision=f,this.type=d}u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var c=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function l(n){return n}function f(n){var t,o,a=n.grouping&&n.thousands?(t=n.grouping,o=n.thousands,function(n,e){for(var r=n.length,i=[],a=0,s=t[0],u=0;r>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),i.push(n.substring(r-=s,r+s)),!((u+=s+1)>e));)s=t[a=(a+1)%t.length];return i.reverse().join(o)}):l,u=n.currency,f=n.decimal;function d(n){var t=(n=s(n)).fill,e=n.align,o=n.sign,l=n.symbol,d=n.zero,h=n.width,m=n.comma,_=n.precision,g=n.type,p="$"===l?u[0]:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",y="$"===l?u[1]:/[%p]/.test(g)?"%":"",v=i[g],w=!g||/[defgprs%]/.test(g);return _=null==_?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_)),function(n){var i=p,s=y;if("c"===g)s=v(n)+s,n="";else{var u,l=((n=+n)<0||1/n<0)&&(n*=-1,!0);if(n=v(n,_),l){var E=-1,b=n.length;for(l=!1;++E<b;)if(48<(u=n.charCodeAt(E))&&u<58||"x"===g&&96<u&&u<103||"X"===g&&64<u&&u<71){l=!0;break}}if(i=(l?"("===o?o:"-":"-"===o||"("===o?"":o)+i,s=s+("s"===g?c[8+r/3]:"")+(l&&"("===o?")":""),w)for(E=-1,b=n.length;++E<b;)if(48>(u=n.charCodeAt(E))||u>57){s=(46===u?f+n.slice(E+1):n.slice(E))+s,n=n.slice(0,E);break}}m&&!d&&(n=a(n,1/0));var k=i.length+n.length+s.length,M=k<h?new Array(h-k+1).join(t):"";switch(m&&d&&(n=a(M+n,M.length?h-s.length:1/0),M=""),e){case"<":return i+n+s+M;case"=":return i+M+n+s;case"^":return M.slice(0,k=M.length>>1)+i+n+s+M.slice(k)}return M+i+n+s}}return{format:d,formatPrefix:function(n,t){var r=d(((n=s(n)).type="f",n)),o=3*Math.max(-8,Math.min(8,Math.floor(e(t)/3))),i=Math.pow(10,-o),a=c[8+o/3];return function(n){return r(i*n)+a}}}}var d=f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),h=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),m=f({decimal:",",thousands:" ",grouping:[3],currency:[""," Kč"]}),_=f({decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]}),g=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),p=f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),y=f({decimal:".",thousands:",",grouping:[3],currency:["£",""]}),v=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),w=f({decimal:",",thousands:" ",grouping:[3],currency:[""," €"]}),E=f({decimal:",",thousands:" ",grouping:[3],currency:["","$"]}),b=f({decimal:",",thousands:".",grouping:[3],currency:[""," €"]}),k=f({decimal:".",thousands:",",grouping:[3],currency:["₪",""]}),M=f({decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]}),x=f({decimal:",",thousands:".",grouping:[3],currency:["€",""]}),S=f({decimal:".",thousands:",",grouping:[3],currency:["","円"]}),D=f({decimal:".",thousands:",",grouping:[3],currency:["₩",""]}),T=f({decimal:",",thousands:".",grouping:[3],currency:[""," ден."]}),A=f({decimal:",",thousands:".",grouping:[3],currency:["€ ",""]}),C=f({decimal:",",thousands:".",grouping:[3],currency:["","zł"]}),N=f({decimal:",",thousands:".",grouping:[3],currency:["R$",""]}),O=f({decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]}),j=f({decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]}),F=f({decimal:".",thousands:",",grouping:[3],currency:["¥",""]}),z=d.format,P=d.formatPrefix;n.version="0.4.2",n.format=z,n.formatPrefix=P,n.locale=f,n.localeCaEs=h,n.localeCsCz=m,n.localeDeCh=_,n.localeDeDe=g,n.localeEnCa=p,n.localeEnGb=y,n.localeEnUs=d,n.localeEsEs=v,n.localeFiFi=w,n.localeFrCa=E,n.localeFrFr=b,n.localeHeIl=k,n.localeHuHu=M,n.localeItIt=x,n.localeJaJp=S,n.localeKoKr=D,n.localeMkMk=T,n.localeNlNl=A,n.localePlPl=C,n.localePtBr=N,n.localeRuRu=O,n.localeSvSe=j,n.localeZhCn=F,n.formatSpecifier=s,n.precisionFixed=function(n){return Math.max(0,-e(Math.abs(n)))},n.precisionPrefix=function(n,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(e(t)/3)))-e(Math.abs(n)))},n.precisionRound=function(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,e(t)-e(n))+1}}(t)})),Sn((function(n){var t=n.exports;t.repeat=function(n,t){var e,r=Array(t);for(e=0;e<t;++e)r[e]=n;return r},t.zeros=function(n){return t.repeat(0,n)},t.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e==1/0)throw new Error("Infinite range");var r,o=[],i=-1;if(e<0)for(;(r=n+e*++i)>t;)o.push(r);else for(;(r=n+e*++i)<t;)o.push(r);return o},t.random={},t.random.uniform=function(n,e){void 0===e&&(e=void 0===n?1:n,n=0);var r=e-n,o=function(){return n+r*Math.random()};return o.samples=function(n){return t.zeros(n).map(o)},o.pdf=function(t){return t>=n&&t<=e?1/r:0},o.cdf=function(t){return t<n?0:t>e?1:(t-n)/r},o.icdf=function(t){return t>=0&&t<=1?n+t*r:NaN},o},t.random.integer=function(n,e){void 0===e&&(e=n,n=0);var r=e-n,o=function(){return n+Math.floor(r*Math.random())};return o.samples=function(n){return t.zeros(n).map(o)},o.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<e?1/r:0},o.cdf=function(t){var o=Math.floor(t);return o<n?0:o>=e?1:(o-n+1)/r},o.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*r):NaN},o},t.random.normal=function(n,e){var r;n=n||0,e=e||1;var o=function(){var t,o,i=0,a=0;if(void 0!==r)return i=r,r=void 0,i;do{t=(i=2*Math.random()-1)*i+(a=2*Math.random()-1)*a}while(0===t||t>1);return o=Math.sqrt(-2*Math.log(t)/t),r=n+a*o*e,n+i*o*e};return o.samples=function(n){return t.zeros(n).map(o)},o.pdf=function(t){var r=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(e,2)));return 1/(e*Math.sqrt(2*Math.PI))*r},o.cdf=function(t){var r,o=(t-n)/e,i=Math.abs(o);if(i>37)r=0;else{var a=Math.exp(-i*i/2);i<7.07106781186547?(r=a*((((((.0352624965998911*i+.700383064443688)*i+6.37396220353165)*i+33.912866078383)*i+112.079291497871)*i+221.213596169931)*i+220.206867912376),r/=((((((.0883883476483184*i+1.75566716318264)*i+16.064177579207)*i+86.7807322029461)*i+296.564248779674)*i+637.333633378831)*i+793.826512519948)*i+440.413735824752):r=a/(i+1/(i+2/(i+3/(i+4/(i+.65)))))/2.506628274631}return o>0?1-r:r},o.icdf=function(t){if(t<=0||t>=1)return NaN;var r=2*t-1,o=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),i=2/(Math.PI*o)+Math.log(1-Math.pow(r,2))/2,a=Math.log(1-r*r)/o,s=(r>0?1:-1)*Math.sqrt(Math.sqrt(i*i-a)-i);return n+e*Math.SQRT2*s},o},t.random.bootstrap=function(n,e){var r=n.filter(Cn.isValid),o=r.length,i=e?t.random.normal(0,e):null,a=function(){return r[~~(Math.random()*o)]+(i?i():0)};return a.samples=function(n){return t.zeros(n).map(a)},a}})));Sn((function(n){var t=n.exports;function e(n,e,r){var o=n&&n.nullh||0,i=rt.random.normal(0,1),a=t.mean(e,r),s=t.stdev(e,r)/Math.sqrt(t.count.valid(e,r));if(0===s)return a-o==0?1:0;var u=(a-o)/s;return 2*i.cdf(-Math.abs(u))}function r(n,e,r,o){var i,a=o?e.map(Cn.$(r)):e,s=o?e.map(Cn.$(o)):r,u=t.count(a),c=t.count(s),l=Array();if(u!==c)throw Error("Array lengths must match.");for(i=0;i<u;++i)Cn.isValid(a[i])&&Cn.isValid(s[i])&&l.push(a[i]-s[i]);return t.z.test(l,n&&n.nullh||0)}function o(n,e,r,o){var i=o?e.map(Cn.$(r)):e,a=o?e.map(Cn.$(o)):r,s=t.count.valid(i),u=t.count.valid(a),c=rt.random.normal(0,1),l=t.mean(i)-t.mean(a)-(n&&n.nullh||0),f=Math.sqrt(t.variance(i)/s+t.variance(a)/u);if(0===f)return 0===l?1:0;var d=l/f;return 2*c.cdf(-Math.abs(d))}t.unique=function(n,t,e){t=Cn.$(t),e=e||[];var r,o,i,a={};for(o=0,i=n.length;o<i;++o)(r=t?t(n[o]):n[o])in a||(a[r]=1,e.push(r));return e},t.count=function(n){return n&&n.length||0},t.count.valid=function(n,t){t=Cn.$(t);var e,r,o,i=0;for(r=0,o=n.length;r<o;++r)e=t?t(n[r]):n[r],Cn.isValid(e)&&(i+=1);return i},t.count.missing=function(n,t){t=Cn.$(t);var e,r,o=0;for(e=0,r=n.length;e<r;++e)null==(t?t(n[e]):n[e])&&(o+=1);return o},t.count.distinct=function(n,t){t=Cn.$(t);var e,r,o,i={},a=0;for(r=0,o=n.length;r<o;++r)(e=t?t(n[r]):n[r])in i||(i[e]=1,a+=1);return a},t.count.map=function(n,t){t=Cn.$(t);var e,r,o,i={};for(r=0,o=n.length;r<o;++r)i[e=t?t(n[r]):n[r]]=e in i?i[e]+1:1;return i},t.median=function(n,e){return e&&(n=n.map(Cn.$(e))),n=n.filter(Cn.isValid).sort(Cn.cmp),t.quantile(n,.5)},t.quartile=function(n,e){e&&(n=n.map(Cn.$(e))),n=n.filter(Cn.isValid).sort(Cn.cmp);var r=t.quantile;return[r(n,.25),r(n,.5),r(n,.75)]},t.quantile=function(n,t,e){void 0===e&&(e=t,t=Cn.identity),t=Cn.$(t);var r=(n.length-1)*e+1,o=Math.floor(r),i=+t(n[o-1]),a=r-o;return a?i+a*(t(n[o])-i):i},t.sum=function(n,t){t=Cn.$(t);for(var e,r=0,o=0,i=n.length;o<i;++o)e=t?t(n[o]):n[o],Cn.isValid(e)&&(r+=e);return r},t.mean=function(n,t){t=Cn.$(t);var e,r,o,i,a=0;for(e=0,o=0,r=n.length;e<r;++e)i=t?t(n[e]):n[e],Cn.isValid(i)&&(a+=(i-a)/++o);return a},t.mean.geometric=function(n,t){t=Cn.$(t);var e,r,o,i,a=1;for(i=0,e=0,r=n.length;i<r;++i)if(o=t?t(n[i]):n[i],Cn.isValid(o)){if(o<=0)throw Error("Geometric mean only defined for positive values.");a*=o,++e}return a=e>0?Math.pow(a,1/e):0},t.mean.harmonic=function(n,t){t=Cn.$(t);var e,r,o,i,a=0;for(i=0,e=0,r=n.length;i<r;++i)o=t?t(n[i]):n[i],Cn.isValid(o)&&(a+=1/o,++e);return e/a},t.variance=function(n,t){if(t=Cn.$(t),!Cn.isArray(n)||n.length<2)return 0;var e,r,o,i,a=0,s=0;for(r=0,o=0;r<n.length;++r)i=t?t(n[r]):n[r],Cn.isValid(i)&&(s+=(e=i-a)*(i-(a+=e/++o)));return s/=o-1},t.stdev=function(n,e){return Math.sqrt(t.variance(n,e))},t.modeskew=function(n,e){var r=t.mean(n,e),o=t.median(n,e),i=t.stdev(n,e);return 0===i?0:(r-o)/i},t.min=function(n,e){return t.extent(n,e)[0]},t.max=function(n,e){return t.extent(n,e)[1]},t.extent=function(n,t){t=Cn.$(t);var e,r,o,i,a=n.length;for(i=0;i<a;++i)if(o=t?t(n[i]):n[i],Cn.isValid(o)){e=r=o;break}for(;i<a;++i)o=t?t(n[i]):n[i],Cn.isValid(o)&&(o<e&&(e=o),o>r&&(r=o));return[e,r]},t.extent.index=function(n,t){t=Cn.$(t);var e,r,o,i,a=-1,s=-1,u=n.length;for(i=0;i<u;++i)if(o=t?t(n[i]):n[i],Cn.isValid(o)){e=r=o,a=s=i;break}for(;i<u;++i)o=t?t(n[i]):n[i],Cn.isValid(o)&&(o<e&&(e=o,a=i),o>r&&(r=o,s=i));return[a,s]},t.dot=function(n,t,e){var r,o,i=0;if(e)for(t=Cn.$(t),e=Cn.$(e),r=0;r<n.length;++r)(o=t(n[r])*e(n[r]))==o&&(i+=o);else{if(n.length!==t.length)throw Error("Array lengths must match.");for(r=0;r<n.length;++r)(o=n[r]*t[r])==o&&(i+=o)}return i},t.dist=function(n,t,e,r){var o,i,a=Cn.isFunction(e)||Cn.isString(e),s=n,u=a?n:t,c=a?r:e,l=2===c||null==c,f=n.length,d=0;for(a&&(t=Cn.$(t),e=Cn.$(e)),i=0;i<f;++i)o=a?t(s[i])-e(u[i]):s[i]-u[i],d+=l?o*o:Math.pow(Math.abs(o),c);return l?Math.sqrt(d):Math.pow(d,1/c)},t.cohensd=function(n,e,r){var o=r?n.map(Cn.$(e)):n,i=r?n.map(Cn.$(r)):e,a=t.mean(o),s=t.mean(i),u=t.count.valid(o),c=t.count.valid(i);if(u+c-2<=0)return 0;var l=t.variance(o),f=t.variance(i),d=Math.sqrt(((u-1)*l+(c-1)*f)/(u+c-2));return 0===d?0:(a-s)/d},t.covariance=function(n,e,r){var o,i,a,s,u,c=r?n.map(Cn.$(e)):n,l=r?n.map(Cn.$(r)):e,f=c.length,d=t.mean(c),h=t.mean(l),m=0,_=0;if(f!==l.length)throw Error("Input lengths must match.");for(o=0;o<f;++o)if(i=c[o],s=Cn.isValid(i),a=l[o],u=Cn.isValid(a),s&&u)m+=(i-d)*(a-h),++_;else if(s||u)throw Error("Valid values must align.");return m/(_-1)},t.rank=function(n,t){t=Cn.$(t)||Cn.identity;var e,r,o,i=n.map((function(n,e){return{idx:e,val:t(n)}})).sort(Cn.comparator("val")),a=n.length,s=Array(a),u=-1,c={};for(e=0;e<a;++e){if(r=i[e].val,u<0&&c===r)u=e-1;else if(u>-1&&c!==r){for(o=1+(e-1+u)/2;u<e;++u)s[i[u].idx]=o;u=-1}s[i[e].idx]=e+1,c=r}if(u>-1)for(o=1+(a-1+u)/2;u<a;++u)s[i[u].idx]=o;return s},t.cor=function(n,e,r){var o=r;r=o?n.map(Cn.$(r)):e,e=o?n.map(Cn.$(e)):n;var i=t.dot(e,r),a=t.mean(e),s=t.mean(r),u=t.stdev(e),c=t.stdev(r),l=n.length;return(i-l*a*s)/((l-1)*u*c)},t.cor.rank=function(n,e,r){var o,i,a,s=r?t.rank(n,e):t.rank(n),u=r?t.rank(n,r):t.rank(e),c=n.length;for(o=0,i=0;o<c;++o)i+=(a=s[o]-u[o])*a;return 1-6*i/(c*(c*c-1))},t.cor.dist=function(n,e,r){var o,i,a,s,u=r?n.map(Cn.$(e)):n,c=r?n.map(Cn.$(r)):e,l=t.dist.mat(u),f=t.dist.mat(c),d=l.length;for(o=0,i=0,a=0,s=0;o<d;++o)i+=l[o]*l[o],a+=f[o]*f[o],s+=l[o]*f[o];return Math.sqrt(s/Math.sqrt(i*a))},t.linearRegression=function(n,e,r){var o,i,a=r?n.map(Cn.$(e)):n,s=r?n.map(Cn.$(r)):e,u=a.length,c=t.covariance(a,s),l=t.stdev(a),f=t.stdev(s),d=c/(l*l),h=t.mean(s)-d*t.mean(a),m={slope:d,intercept:h,R:c/(l*f),rss:0};for(i=0;i<u;++i)Cn.isValid(a[i])&&Cn.isValid(s[i])&&(o=d*a[i]+h-s[i],m.rss+=o*o);return m},t.bootstrap={},t.bootstrap.ci=function(n,e,r,o,i){var a,s,u,c,l,f,d;for(Cn.isFunction(e)||Cn.isString(e)?(a=n.map(Cn.$(e)),s=r,u=o,c=i):(a=n,s=e,u=r,c=o),s=s?+s:1e3,u=u||.05,l=rt.random.bootstrap(a,c),d=0,f=Array(s);d<s;++d)f[d]=t.mean(l.samples(a.length));return f.sort(Cn.numcmp),[t.quantile(f,u/2),t.quantile(f,1-u/2)]},t.z={},t.z.ci=function(n,e,r){var o=n,i=e;(Cn.isFunction(e)||Cn.isString(e))&&(o=n.map(Cn.$(e)),i=r);var a=.05===(i=i||.05)?1.96:rt.random.normal(0,1).icdf(1-i/2),s=t.mean(o),u=t.stdev(o)/Math.sqrt(t.count.valid(o));return[s-a*u,s+a*u]},t.z.test=function(n,t,i,a){return Cn.isFunction(i)||Cn.isString(i)?(a&&a.paired?r:o)(a,n,t,i):Cn.isArray(t)?(i&&i.paired?r:o)(i,n,t):Cn.isFunction(t)||Cn.isString(t)?e(i,n,t):e(t,n)},t.dist.mat=function(n){var t,e,r,o=n.length,i=o*o,a=Array(i),s=rt.zeros(o),u=0;for(e=0;e<o;++e)for(a[e*o+e]=0,r=e+1;r<o;++r)a[e*o+r]=t=Math.abs(n[e]-n[r]),a[r*o+e]=t,s[e]+=t,s[r]+=t;for(e=0;e<o;++e)u+=s[e],s[e]/=o;for(u/=i,e=0;e<o;++e)for(r=e;r<o;++r)a[e*o+r]+=u-s[e]-s[r],a[r*o+e]=a[e*o+r];return a},t.entropy=function(n,t){t=Cn.$(t);var e,r,o=0,i=0,a=n.length;for(e=0;e<a;++e)o+=t?t(n[e]):n[e];if(0===o)return 0;for(e=0;e<a;++e)(r=(t?t(n[e]):n[e])/o)&&(i+=r*Math.log(r));return-i/Math.LN2},t.mutual=function(n,t,e,r){var o,i,a,s=r?n.map(Cn.$(t)):n,u=r?n.map(Cn.$(e)):t,c=r?n.map(Cn.$(r)):e,l={},f={},d=c.length,h=0,m=0,_=0;for(a=0;a<d;++a)l[s[a]]=0,f[u[a]]=0;for(a=0;a<d;++a)l[s[a]]+=c[a],f[u[a]]+=c[a],h+=c[a];for(i=1/(h*Math.LN2),a=0;a<d;++a)0!==c[a]&&(o=h*c[a]/(l[s[a]]*f[u[a]]),m+=c[a]*i*Math.log(o),_+=c[a]*i*Math.log(c[a]/h));return[m,1+m/_]},t.mutual.info=function(n,e,r,o){return t.mutual(n,e,r,o)[0]},t.mutual.dist=function(n,e,r,o){return t.mutual(n,e,r,o)[1]},t.profile=function(n,e){var r,o,i,a,s,u=0,c=0,l=0,f=0,d=null,h=null,m=0,_=[],g={};for(i=0;i<n.length;++i)g[a=e?e(n[i]):n[i]]=a in g?g[a]+1:(f+=1,1),null==a?++l:Cn.isValid(a)&&(s="string"==typeof a?a.length:a,(null===d||s<d)&&(d=s),(null===h||s>h)&&(h=s),m+=(r=s-u)*(s-(u+=r/++c)),_.push(s));return m/=c-1,o=Math.sqrt(m),_.sort(Cn.cmp),{type:Ln(n,e),unique:g,count:n.length,valid:c,missing:l,distinct:f,min:d,max:h,mean:u,stdev:o,median:a=t.quantile(_,.5),q1:t.quantile(_,.25),q3:t.quantile(_,.75),modeskew:0===o?0:(u-a)/o}},t.summary=function(n,e){var r=(e=e||Cn.keys(n[0])).map((function(e){var r=t.profile(n,Cn.$(e));return r.field=e,r}));return r.__summary__=!0,r}}));function ot(n,t){return`fieldtype(${n},${function(n){let t="number";for(let e of n)isNaN(parseFloat(e))&&"NaN"!=e&&(t="string");return t}(Object.keys(t.unique))}). cardinality(${n},${t.distinct}).`}function it(n){let t=[],e=Object.keys(n.stats);for(let r of e){let e=ot(r,n.stats[r]);t.push(e)}return t.join("\n\n")}function at(n,t){let e=[];let r=function(n){if(!n)return"";let t=[];for(let e of n){let n=e.attr;if(n.startsWith("mark")){let r=n.slice(5);e.value>0&&t.push(`mark(${r}).`)}}return t.length>0?t.join("\n\n"):""}(n),o=function(n){if(!n)return"";let t=["x","y","row","column","color","size","shape","text"],e=0,r=[];for(let o of t){let t=n.filter((function(n){return n.attr.startsWith(o)}));if(0!=t.length){let n=`encoding(e${e}).:- not channel(e${e}, ${o}).`;for(let r of t){let t=r.attr;if(t.includes(".type")){let o=t.slice(t.indexOf("type")+5);r.value>0&&(n+=`:- not type(e${e}, ${o}).`)}if(t.includes(".field")){let o=t.slice(t.indexOf("field")+6);""===o||(r.value>0?n+=`:- not field(e${e}, ${o}).`:n+=`:- field(e${e}, ${o}).`)}if(t.includes(".aggregate")){let o=t.slice(t.indexOf("aggregate")+10);console.log(o),r.value>0&&(n+=`:- not aggregate(e${e}, ${o}).`)}t.includes(".bin")&&r.value>0&&(n+=`:- not bin(e${e}, 10).`)}r.push(n),e++}}return r.length>0?r.join("\n\n"):""}(n);const i=new An("https://unpkg.com/wasm-clingo@0.2.2");return i.init().then(()=>{i.prepareData(t);const n=`\n\t\t\tdata("movies.csv").\n\t\t\tnum_rows(33778).\n\n\t\t\t${it(i.getSchema())}\n\n\t\t\t${r}\n\n\t\t\t% ====== Query constraints ======\n\t\t\t${o}\n\t\t`,a=i.solve(n,{models:5});if(!a)return[];for(let n of a.specs)n.width=300,n.height=300,e.push({vega:n,uid:"id"+(new Date).getTime()});return e})}function st(n,t,e){let r=t[n].spec,o=[];for(let n of Object.keys(r))n.includes("filename")||n.includes("none")||0!==r[n]&&o.push({attr:n,value:r[n]});return at(o,e)}function ut(n,t){let e=new Set,r=[];for(;r.length<4;){let a=(o=0,i=n.length,Math.floor(Math.random()*(i-o)+o));if(!e.has(a)){e.add(a);let o=st(a,n,t);r.push(o)}}var o,i;return r}function ct(n,t,e){const r=n.slice();return r[4]=t[e],r}function lt(n){let t,e,r,o,i,a,l,m,p=n[4][0]+"",y=n[4][1]+"";return{c(){t=f("div"),e=f("div"),r=d(p),o=h(),i=f("div"),a=d(y),l=h(),_(e,"class","attributeLeft svelte-10tgs7z"),_(i,"class","attributeRight svelte-10tgs7z"),_(t,"key",m=n[4].join()),_(t,"class","attribute svelte-10tgs7z")},m(n,c){u(n,t,c),s(t,e),s(e,r),s(t,o),s(t,i),s(i,a),s(t,l)},p(n,e){1&e&&p!==(p=n[4][0]+"")&&g(r,p),1&e&&y!==(y=n[4][1]+"")&&g(a,y),1&e&&m!==(m=n[4].join())&&_(t,"key",m)},d(n){n&&c(t)}}}function ft(t){let e,r,o,i=t[0],a=[];for(let n=0;n<i.length;n+=1)a[n]=lt(ct(t,i,n));return{c(){e=f("div"),r=f("p"),r.innerHTML="<b>LEARNED ENCODINGS</b>",o=h();for(let n=0;n<a.length;n+=1)a[n].c();_(e,"id","attributesBar"),_(e,"class","svelte-10tgs7z")},m(n,t){u(n,e,t),s(e,r),s(e,o);for(let n=0;n<a.length;n+=1)a[n].m(e,null)},p(n,[t]){if(1&t){let r;for(i=n[0],r=0;r<i.length;r+=1){const o=ct(n,i,r);a[r]?a[r].p(o,t):(a[r]=lt(o),a[r].c(),a[r].m(e,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=i.length}},i:n,o:n,d(n){n&&c(e),l(a,n)}}}function dt(n,t,e){let{attributes:r=[]}=t,{allPoints:o=[]}=t,{shownPoints:i=[]}=t,a=[];return n.$set=n=>{"attributes"in n&&e(1,r=n.attributes),"allPoints"in n&&e(2,o=n.allPoints),"shownPoints"in n&&e(3,i=n.shownPoints)},n.$$.update=()=>{if(2&n.$$.dirty){console.log(r);let n=[];for(let t of r){let e=t[0];if(e.indexOf("mark")>-1){let t="mark",r=e.slice(e.indexOf("_")+1);n.push([t,r])}else{let t=e.slice(0,e.indexOf(".")),r=e.slice(e.indexOf(".")+1);n.push([t,r])}}n=n.sort((n,t)=>t[1]>n[1]),e(0,a=n.slice(0,10))}},[a,r,o,i]}class ht extends W{constructor(n){super(),X(this,n,dt,ft,i,{attributes:1,allPoints:2,shownPoints:3})}}function mt(n,t,e){const r=n.slice();return r[33]=t[e],r[35]=e,r}function _t(n,t,e){const r=n.slice();return r[36]=t[e],r[35]=e,r}function gt(n){let t,e,o,i,l,g,p,y,v,E,b,k,M,x,S;function D(...t){return n[30](n[35],...t)}function T(...t){return n[31](n[35],...t)}function A(...t){return n[32](n[35],...t)}return{c(){t=f("div"),e=f("div"),o=f("button"),i=d("More Like This"),g=h(),p=f("button"),y=d("Less Like This"),E=h(),b=f("div"),b.innerHTML='<i class="material-icons-outlined md-24">push_pin</i>',k=h(),M=f("div"),M.innerHTML=`<div id="vis${n[35]}" class="svelte-1v894yw"></div>`,x=h(),_(o,"class",l=a("more"===n[2][n[35]]?"more":"default")+" svelte-1v894yw"),_(p,"class",v=a("less"===n[2][n[35]]?"less":"default")+" svelte-1v894yw"),_(b,"class","pinButton svelte-1v894yw"),w(b,"isPinned",n[1][n[35]]&&n[4].indexOf(n[1][n[35]].uid)>-1),_(e,"class","buttons svelte-1v894yw"),_(M,"class","vegaContainer svelte-1v894yw"),_(t,"class","vis svelte-1v894yw")},m(n,a,c){u(n,t,a),s(t,e),s(e,o),s(o,i),s(e,g),s(e,p),s(p,y),s(e,E),s(e,b),s(t,k),s(t,M),s(t,x),c&&r(S),S=[m(o,"click",D),m(p,"click",T),m(b,"click",A)]},p(t,e){n=t,4&e[0]&&l!==(l=a("more"===n[2][n[35]]?"more":"default")+" svelte-1v894yw")&&_(o,"class",l),4&e[0]&&v!==(v=a("less"===n[2][n[35]]?"less":"default")+" svelte-1v894yw")&&_(p,"class",v),18&e[0]&&w(b,"isPinned",n[1][n[35]]&&n[4].indexOf(n[1][n[35]].uid)>-1)},d(n){n&&c(t),r(S)}}}function pt(n){let t,e;return{c(){t=f("div"),_(t,"id",e="pin"+n[35]),_(t,"class","svelte-1v894yw")},m(n,e){u(n,t,e)},d(n){n&&c(t)}}}function yt(n){let t,e,o,i,a,d,g,p,y,v,E,b,k,M,x,S,D,T,A,C,N,O,j,F;const z=new ht({props:{attributes:n[5],allPoints:n[6],shownPoints:n[7]}});let P=n[1],I=[];for(let t=0;t<P.length;t+=1)I[t]=gt(_t(n,P,t));let L=n[3],$=[];for(let t=0;t<L.length;t+=1)$[t]=pt(mt(n,L,t));return{c(){t=f("div"),e=f("div"),e.innerHTML='<div class="spinner svelte-1v894yw"></div>',o=h(),H(z.$$.fragment),i=h(),a=f("div"),d=f("div"),g=f("p"),g.innerHTML="<b>RECOMMENDATIONS</b>",p=h(),y=f("button"),y.textContent="UPDATE RECOMMENDATIONS",v=h(),E=f("button"),E.textContent="PINNED",b=h(),k=f("button"),k.textContent="DOWNLOAD",M=h(),x=f("div");for(let n=0;n<I.length;n+=1)I[n].c();S=h(),D=f("div"),T=f("p"),T.innerHTML="<b>PINNED</b>",A=h(),C=f("a"),C.textContent="×",N=h(),O=f("div");for(let n=0;n<$.length;n+=1)$[n].c();_(e,"class","loader svelte-1v894yw"),w(e,"showLoader",n[0]),w(e,"hideLoader",!n[0]),_(k,"id","exportJSON"),_(k,"class","btn"),_(d,"id","menu"),_(x,"id","recommendationDisplay"),_(x,"class","svelte-1v894yw"),_(a,"id","recommendations"),_(a,"class","svelte-1v894yw"),_(T,"id","pinnedText"),_(T,"class","svelte-1v894yw"),_(C,"id","closeButton"),_(C,"class","svelte-1v894yw"),_(O,"id","pinnedDisplay"),_(O,"class","svelte-1v894yw"),_(D,"id","pinnedDrawer"),_(D,"class","svelte-1v894yw"),_(t,"id","overall"),_(t,"class","svelte-1v894yw")},m(c,l,f){u(c,t,l),s(t,e),s(t,o),q(z,t,null),s(t,i),s(t,a),s(a,d),s(d,g),s(d,p),s(d,y),s(d,v),s(d,E),s(d,b),s(d,k),s(a,M),s(a,x);for(let n=0;n<I.length;n+=1)I[n].m(x,null);s(t,S),s(t,D),s(D,T),s(D,A),s(D,C),s(D,N),s(D,O);for(let n=0;n<$.length;n+=1)$[n].m(O,null);j=!0,f&&r(F),F=[m(y,"click",n[10]),m(E,"click",n[12]),m(k,"click",n[14]),m(C,"click",n[13])]},p(n,t){1&t[0]&&w(e,"showLoader",n[0]),1&t[0]&&w(e,"hideLoader",!n[0]);const r={};if(32&t[0]&&(r.attributes=n[5]),64&t[0]&&(r.allPoints=n[6]),128&t[0]&&(r.shownPoints=n[7]),z.$set(r),2838&t[0]){let e;for(P=n[1],e=0;e<P.length;e+=1){const r=_t(n,P,e);I[e]?I[e].p(r,t):(I[e]=gt(r),I[e].c(),I[e].m(x,null))}for(;e<I.length;e+=1)I[e].d(1);I.length=P.length}if(8&t[0]){const t=L.length;let e;for(L=n[3],e=t;e<L.length;e+=1){const t=mt(n,L,e);$[e]||($[e]=pt(t),$[e].c(),$[e].m(O,null))}for(e=L.length;e<t;e+=1)$[e].d(1);$.length=L.length}},i(n){j||(B(z.$$.fragment,n),j=!0)},o(n){R(z.$$.fragment,n),j=!1},d(n){n&&c(t),V(z),l(I,n),l($,n),r(F)}}}function vt(n,t){if(t.length<n)return t;let e=t.length,r=new Set;for(;r.size<n;){let n=Math.floor(Math.random()*Math.floor(e));r.add(n)}let o=[];for(let n of Array.from(r))o.push(t[n]);return o}function wt(n,t,e){let{vegaSpecs:r=[]}=t,{dataset:o=[]}=t,{selectedAttributes:i=[]}=t,{recommendationCount:a=4}=t,s=!1,u=0,c=[],l=[],f=[],d=[],h=[],m=Array(a).fill("default"),_=[],g=[],p=[],y=[],v=[],w=[],E=[];function b(n){h=n;let t=[];for(let n of h){let e=n[Math.floor(Math.random()*n.length)];t.push(e)}e(2,m=m.map(n=>"default")),e(1,d=t),e(0,s=!1)}function k(){e(0,s=!0);let n=y.map(n=>n.spec),t=[],i=[],u=[],c=new Date;for(let n=0;n<m.length;n++){let t=m[n];"more"===t?(i=i.concat(h[n]),E=E.concat({seen:d[n],label:"more",date:c})):"less"===t?(u.push(d[n]),E=E.concat({seen:d[n],label:"less",date:c})):E=E.concat({seen:d[n],label:"none",date:c})}if(0===i.length&&0===u.length)return void Promise.all(ut(r,o)).then(n=>{b(n)});for(let n of i){let e=n.vega.encoding;e.label=1,e["mark_"+n.vega.mark]=1,t.push(e)}for(let n of u){let e=n.vega.encoding;e.label=-1,e["mark_"+n.vega.mark]=1,t.push(e)}let l={training:t,testing:n};fetch("./kneighbors",{method:"POST",body:JSON.stringify(l)}).then(n=>n.text()).then(n=>{let t=JSON.parse(n),r=t.predictions,i=t.newData.map((n,t)=>(n.label=r[t],n)),s=[];for(let n of i){let t=n;delete t.index,s.push({spec:t})}if(s.length>200){let n=s.length-200;s=s.slice(n,s.length)}y=s;let u,c=[],l=[],f=[];for(let n=0;n<i.length;n++){let t=i[n];t.label>0?c.push(s[n]):0===t.label?l.push(s[n]):f.push(s[n])}if(0==c.length)u=l.length<a?vt(4,f):vt(4,l);else{let n=vt(2,l);u=vt(2,c).concat(n)}e(6,v=i),e(7,w=u);let d=Object.keys(i[0]),h=[];for(let n of d){if(n.indexOf("label")>-1||n.indexOf("umapX")>-1||n.indexOf("umapY")>-1)continue;let t=i.map(t=>1==t[n]?t.label:0);h.push([n,nn(t)])}e(5,p=h.filter(n=>n[1]>0)),Promise.all(ut(u,o)).then(n=>{b(n)})})}function M(n){if(s)return;let t=m[n];e(2,m[n]="more"===t?"default":"more",m)}function x(n){if(s)return;let t=m[n];e(2,m[n]="less"===t?"default":"less",m)}function S(n){if(s)return;let t=d[n].uid,r=g.indexOf(t);if(-1===r){e(4,g=[...g,t]),e(3,_=_.concat([d[n]]));let r=new Date;E=E.concat({pinned:d[n],label:"pinned",date:r})}else{g.splice(r,1),e(4,g);let o=[];for(let n of _)n.uid!==t&&o.push(n);e(3,_=o);let i=new Date;E=E.concat({pinned:d[n],label:"unpinned",date:i})}}return n.$set=n=>{"vegaSpecs"in n&&e(15,r=n.vegaSpecs),"dataset"in n&&e(16,o=n.dataset),"selectedAttributes"in n&&e(17,i=n.selectedAttributes),"recommendationCount"in n&&e(18,a=n.recommendationCount)},n.$$.update=()=>{if(32768&n.$$.dirty[0]&&(y=r),622592&n.$$.dirty[0]&&(console.log("update count",u),0===u?Promise.all(ut(r,o)).then(n=>{b(n)}):(console.log("running classifier: ",u),k())),2&n.$$.dirty[0])for(let n=0;n<d.length;n++)d[n]&&vegaEmbed("#vis"+n,d[n].vega,{actions:!1});if(8&n.$$.dirty[0])for(let n=0;n<_.length;n++)_[n]&&vegaEmbed("#pin"+n,_[n].vega,{actions:!1})},[s,d,m,_,g,p,v,w,M,x,function(){e(19,u++,u)},S,function(){s||(document.getElementById("pinnedDrawer").style.width="450px")},function(){s||(document.getElementById("pinnedDrawer").style.width="0px")},function(){if(!s){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(E))),n.setAttribute("download","sessionData.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},r,o,i,a,u,c,l,f,h,y,E,void 0,b,k,function(){e(2,m=m.map(n=>"default")),c=[],l=[],f=[]},n=>M(n),n=>x(n),n=>S(n)]}class Et extends W{constructor(n){super(),X(this,n,wt,yt,i,{vegaSpecs:15,dataset:16,selectedAttributes:17,recommendationCount:18},[-1,-1])}}function bt(t){let e,r,o=t[5].message+"";return{c(){e=f("p"),r=d(o),p(e,"color","red")},m(n,t){u(n,e,t),s(e,r)},p:n,i:n,o:n,d(n){n&&c(e)}}}function kt(n){let t;const e=new Et({props:{dataset:n[0],vegaSpecs:n[4],selectedAttributes:n[1],updateCount:St}});return{c(){H(e.$$.fragment)},m(n,r){q(e,n,r),t=!0},p(n,t){const r={};1&t&&(r.dataset=n[0]),2&t&&(r.selectedAttributes=n[1]),e.$set(r)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Mt(t){let e;return{c(){e=f("p"),e.textContent="...loading"},m(n,t){u(n,e,t)},p:n,i:n,o:n,d(n){n&&c(e)}}}function xt(n){let t,e,r,o={ctx:n,current:null,token:null,pending:Mt,then:kt,catch:bt,value:4,error:5,blocks:[,,,]};return Y(e=n[2],o),{c(){t=f("div"),o.block.c(),_(t,"id","recommendationsMain"),_(t,"class","svelte-1f32qq")},m(n,e){u(n,t,e),o.block.m(t,o.anchor=null),o.mount=()=>t,o.anchor=null,r=!0},p(t,[e]){{const r=(n=t).slice();r[4]=o.resolved,o.block.p(r,e)}},i(n){r||(B(o.block),r=!0)},o(n){for(let n=0;n<3;n+=1){R(o.blocks[n])}r=!1},d(n){n&&c(t),o.block.d(),o.token=null,o=null}}}let St=0;function Dt(n){let t={};for(let e=0;e<dn(n).length;e++){let r=dn(n)[e];"filename"===r||(t[r]=+hn(n)[e])}return t}function Tt(n,t,e){let{dataset:r=[]}=t,{types:o={}}=t,{selectedAttributes:i=[]}=t,a=async function(){const n=await Mn("/manual_specs_one_hot_encoding_4.csv",Dt),t=[];for(let e in n){if("columns"===e)continue;let r=n[e];delete r.index,t.push({spec:r})}return t}();return n.$set=n=>{"dataset"in n&&e(0,r=n.dataset),"types"in n&&e(3,o=n.types),"selectedAttributes"in n&&e(1,i=n.selectedAttributes)},[r,i,a,o]}class At extends W{constructor(n){super(),X(this,n,Tt,xt,i,{dataset:0,types:3,selectedAttributes:1})}}function Ct(n,t,e){const r=n.slice();return r[12]=t[e],r}function Nt(n,t,e){const r=n.slice();return r[9]=t[e],r}function Ot(n,t,e){const r=n.slice();return r[15]=t[e],r}function jt(t){let e,r,o,i=t[15]+"";return{c(){e=f("option"),r=d(i),e.__value=o=t[15],e.value=e.__value},m(n,t){u(n,e,t),s(e,r)},p:n,d(n){n&&c(e)}}}function Ft(t){let e,r,o,i=t[12]+"";return{c(){e=f("option"),r=d(i),e.__value=o=t[12],e.value=e.__value},m(n,t){u(n,e,t),s(e,r)},p:n,d(n){n&&c(e)}}}function zt(n){let t,e,r,o,i,a,g,p=n[9]+"",v=n[4],w=[];for(let t=0;t<v.length;t+=1)w[t]=Ft(Ct(n,v,t));function E(){n[8].call(i,n[9])}return{c(){t=f("div"),e=f("div"),r=d(p),o=h(),i=f("select");for(let n=0;n<w.length;n+=1)w[n].c();a=h(),_(e,"class","attributeLeft svelte-1mu888i"),_(i,"id","mark-dropdown"),_(i,"class","attributeRight svelte-1mu888i"),void 0===n[1][n[9]]&&C(E),_(t,"class","attribute svelte-1mu888i")},m(c,l,f){u(c,t,l),s(t,e),s(e,r),s(t,o),s(t,i);for(let n=0;n<w.length;n+=1)w[n].m(i,null);y(i,n[1][n[9]]),s(t,a),f&&g(),g=m(i,"change",E)},p(t,e){if(n=t,16&e){let t;for(v=n[4],t=0;t<v.length;t+=1){const r=Ct(n,v,t);w[t]?w[t].p(r,e):(w[t]=Ft(r),w[t].c(),w[t].m(i,null))}for(;t<w.length;t+=1)w[t].d(1);w.length=v.length}10&e&&y(i,n[1][n[9]])},d(n){n&&c(t),l(w,n),g()}}}function Pt(t){let e,r,o,i,a,d,g,p,v,w,E,b,k,M=t[2],x=[];for(let n=0;n<M.length;n+=1)x[n]=jt(Ot(t,M,n));let S=t[3],D=[];for(let n=0;n<S.length;n+=1)D[n]=zt(Nt(t,S,n));return{c(){e=f("div"),r=f("p"),r.innerHTML="<b>ENCODINGS</b>",o=h(),i=f("p"),i.textContent="mark",a=h(),d=f("div"),g=f("div"),g.textContent="mark",p=h(),v=f("select");for(let n=0;n<x.length;n+=1)x[n].c();w=h(),E=f("p"),E.textContent="channel",b=h();for(let n=0;n<D.length;n+=1)D[n].c();_(g,"class","attributeLeft svelte-1mu888i"),_(v,"id","mark-dropdown"),_(v,"class","attributeRight svelte-1mu888i"),void 0===t[0]&&C(()=>t[7].call(v)),_(d,"class","attribute svelte-1mu888i"),_(e,"id","attributesBar"),_(e,"class","svelte-1mu888i")},m(n,c,l){u(n,e,c),s(e,r),s(e,o),s(e,i),s(e,a),s(e,d),s(d,g),s(d,p),s(d,v);for(let n=0;n<x.length;n+=1)x[n].m(v,null);y(v,t[0]),s(e,w),s(e,E),s(e,b);for(let n=0;n<D.length;n+=1)D[n].m(e,null);l&&k(),k=m(v,"change",t[7])},p(n,[t]){if(4&t){let e;for(M=n[2],e=0;e<M.length;e+=1){const r=Ot(n,M,e);x[e]?x[e].p(r,t):(x[e]=jt(r),x[e].c(),x[e].m(v,null))}for(;e<x.length;e+=1)x[e].d(1);x.length=M.length}if(1&t&&y(v,n[0]),26&t){let r;for(S=n[3],r=0;r<S.length;r+=1){const o=Nt(n,S,r);D[r]?D[r].p(o,t):(D[r]=zt(o),D[r].c(),D[r].m(e,null))}for(;r<D.length;r+=1)D[r].d(1);D.length=S.length}},i:n,o:n,d(n){n&&c(e),l(x,n),l(D,n),k()}}}function It(n,t,e){let{selectedMark:r}=t,{channelSelections:o}=t,i=["","area","bar","point","line","rect","tick"],a=["x","y","color","size","shape"],s=["type_quantitative","type_nominal"],u={title:"string",startYear:"number",runtimeMinutes:"number",averageRating:"number",numVotes:"number"},c=[""].concat(s).concat(Object.keys(u).map(n=>"field_"+n));return n.$set=n=>{"selectedMark"in n&&e(0,r=n.selectedMark),"channelSelections"in n&&e(1,o=n.channelSelections)},[r,o,i,a,c,s,u,function(){r=v(this),e(0,r),e(2,i)},function(n){o[n]=v(this),e(1,o),e(3,a),e(4,c)}]}class Lt extends W{constructor(n){super(),X(this,n,It,Pt,i,{selectedMark:0,channelSelections:1})}}function $t(n,t,e){const r=n.slice();return r[19]=t[e],r[21]=e,r}function Bt(n,t,e){const r=n.slice();return r[22]=t[e],r[21]=e,r}function Rt(n){let t,e,r,o,i,a;function l(...t){return n[18](n[21],...t)}return{c(){t=f("div"),e=f("div"),e.innerHTML='<i class="material-icons-outlined md-24">push_pin</i>',r=h(),o=f("div"),o.innerHTML=`<div id="vis${n[21]}" class="svelte-8fn13r"></div>`,i=h(),_(e,"class","pinButton svelte-8fn13r"),_(o,"class","vegaContainer svelte-8fn13r"),_(t,"class","vis svelte-8fn13r")},m(n,c,f){u(n,t,c),s(t,e),s(t,r),s(t,o),s(t,i),f&&a(),a=m(e,"click",l)},p(t,e){n=t},d(n){n&&c(t),a()}}}function Yt(n){let t,e;return{c(){t=f("div"),_(t,"id",e="pin"+n[21]),_(t,"class","svelte-8fn13r")},m(n,e){u(n,t,e)},d(n){n&&c(t)}}}function Ut(n){let t,e,o,i,a,d,g,p,y,v,w,E,b,k,M,S,D,T,A,C,O,j,F,z,P,I;function L(t){n[16].call(null,t)}function $(t){n[17].call(null,t)}let Y={};void 0!==n[2]&&(Y.selectedMark=n[2]),void 0!==n[3]&&(Y.channelSelections=n[3]);const J=new Lt({props:Y});x.push(()=>U(J,"selectedMark",L)),x.push(()=>U(J,"channelSelections",$));let X=n[1],W=[];for(let t=0;t<X.length;t+=1)W[t]=Rt(Bt(n,X,t));let G=n[0],K=[];for(let t=0;t<G.length;t+=1)K[t]=Yt($t(n,G,t));return{c(){t=f("div"),H(J.$$.fragment),i=h(),a=f("div"),d=f("div"),g=f("p"),g.innerHTML="<b>RECOMMENDATIONS</b>",p=h(),y=f("button"),y.textContent="UPDATE RECOMMENDATIONS",v=h(),w=f("button"),w.textContent="RESET",E=h(),b=f("button"),b.textContent="PINNED",k=h(),M=f("button"),M.textContent="DOWNLOAD",S=h(),D=f("div");for(let n=0;n<W.length;n+=1)W[n].c();T=h(),A=f("div"),C=f("p"),C.innerHTML="<b>PINNED</b>",O=h(),j=f("a"),j.textContent="×",F=h(),z=f("div");for(let n=0;n<K.length;n+=1)K[n].c();_(M,"id","exportJSON"),_(M,"class","btn"),_(d,"id","menu"),_(D,"id","recommendationDisplay"),_(D,"class","svelte-8fn13r"),_(a,"id","recommendations"),_(C,"id","pinnedText"),_(C,"class","svelte-8fn13r"),_(j,"id","closeButton"),_(j,"class","svelte-8fn13r"),_(z,"id","pinnedDisplay"),_(z,"class","svelte-8fn13r"),_(A,"id","pinnedDrawer"),_(A,"class","svelte-8fn13r"),_(t,"id","overall"),_(t,"class","svelte-8fn13r")},m(e,o,c){u(e,t,o),q(J,t,null),s(t,i),s(t,a),s(a,d),s(d,g),s(d,p),s(d,y),s(d,v),s(d,w),s(d,E),s(d,b),s(d,k),s(d,M),s(a,S),s(a,D);for(let n=0;n<W.length;n+=1)W[n].m(D,null);s(t,T),s(t,A),s(A,C),s(A,O),s(A,j),s(A,F),s(A,z);for(let n=0;n<K.length;n+=1)K[n].m(z,null);P=!0,c&&r(I),I=[m(y,"click",n[4]),m(w,"click",n[5]),m(b,"click",Ht),m(M,"click",n[7]),m(j,"click",qt)]},p(n,[t]){const r={};if(!e&&4&t&&(e=!0,r.selectedMark=n[2],N(()=>e=!1)),!o&&8&t&&(o=!0,r.channelSelections=n[3],N(()=>o=!1)),J.$set(r),66&t){let e;for(X=n[1],e=0;e<X.length;e+=1){const r=Bt(n,X,e);W[e]?W[e].p(r,t):(W[e]=Rt(r),W[e].c(),W[e].m(D,null))}for(;e<W.length;e+=1)W[e].d(1);W.length=X.length}if(1&t){const t=G.length;let e;for(G=n[0],e=t;e<G.length;e+=1){const t=$t(n,G,e);K[e]||(K[e]=Yt(t),K[e].c(),K[e].m(z,null))}for(e=G.length;e<t;e+=1)K[e].d(1);K.length=G.length}},i(n){P||(B(J.$$.fragment,n),P=!0)},o(n){R(J.$$.fragment,n),P=!1},d(n){n&&c(t),V(J),l(W,n),l(K,n),r(I)}}}function Ht(){document.getElementById("pinnedDrawer").style.width="450px"}function qt(){document.getElementById("pinnedDrawer").style.width="0px"}function Vt(n,t,e){let r,{dataset:o=[]}=t,{types:i={}}=t,{selectedAttributes:a=[]}=t,s=0,u=[],c=[],l=[],f={};function d(n,t,o){let i=[];const a=new An("https://unpkg.com/wasm-clingo@0.2.2");return a.init().then(()=>{a.prepareData(o);const s=`\n\t\t\t\tdata("movies.csv").\n\t\t\t\tnum_rows(77).\n\n\t\t\t\t${it(a.getSchema())}\n\n\t\t\t\t${n}\n\n\t\t\t\t% ====== Query constraints ======\n\t\t\t\t${t}\n\t\t\t`;console.log(s);const u=a.solve(s,{models:9});if(console.log("solution",u),!u)return console.log("no solution"),[];console.log("solution",u);for(let n of u.specs)i.push({vega:n});e(1,c=i),l.push({markConstraints:r,visConstraints:f,recommendations:i,date:new Date}),console.log(c)})}function h(){let n=""===r?"":`mark(${r}).`,t=[],e=0;for(let n of Object.keys(f)){let r=f[n];if(r&&""!=r){let o=`encoding(e${e}).:- not channel(e${e}, ${n}).`;if(r.startsWith("type")){o+=`:- not type(e${e}, ${r.slice(r.indexOf("type")+5)}).`}else if(r.startsWith("field")){o+=`:- field(e${e}, ${r.slice(r.indexOf("field")+6)}).`}t.push(o),e++}}t=t.join("\n\n"),d(n,t,o)}function m(n){e(0,u=u.concat([c[n]]));let t=new Date;l=l.concat({pinned:c[n],label:"pinned",date:t})}return n.$set=n=>{"dataset"in n&&e(8,o=n.dataset),"types"in n&&e(9,i=n.types),"selectedAttributes"in n&&e(10,a=n.selectedAttributes)},n.$$.update=()=>{if(2048&n.$$.dirty&&(console.log("update count",s),0===s||h()),2&n.$$.dirty)for(let n=0;n<c.length;n++)c[n]&&vegaEmbed("#vis"+n,c[n].vega,{actions:!1});if(1&n.$$.dirty)for(let n=0;n<u.length;n++)u[n]&&vegaEmbed("#pin"+n,u[n].vega,{actions:!1})},[u,c,r,f,function(){e(11,s++,s)},function(){e(2,r=""),e(3,f={}),e(11,s++,s)},m,function(){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(l))),n.setAttribute("download","sessionData.json"),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)},o,i,a,s,l,[],d,h,function(n){r=n,e(2,r)},function(n){f=n,e(3,f)},n=>m(n)]}class Jt extends W{constructor(n){super(),X(this,n,Vt,Ut,i,{dataset:8,types:9,selectedAttributes:10})}}function Xt(t){let e,r,o=t[9].message+"";return{c(){e=f("p"),r=d(o),p(e,"color","red")},m(n,t){u(n,e,t),s(e,r)},p:n,i:n,o:n,d(n){n&&c(e)}}}function Wt(n){let t,e,r,o;const i=[Zt,Kt,Gt],a=[];function s(n,t){return"constraintSolver"===n[0]?0:"constraintLearner"===n[0]?1:2}return t=s(n),e=a[t]=i[t](n),{c(){e.c(),r=d("")},m(n,e){a[t].m(n,e),u(n,r,e),o=!0},p(n,o){let u=t;t=s(n),t===u?a[t].p(n,o):(L(),R(a[u],1,1,()=>{a[u]=null}),$(),e=a[t],e||(e=a[t]=i[t](n),e.c()),B(e,1),e.m(r.parentNode,r))},i(n){o||(B(e),o=!0)},o(n){R(e),o=!1},d(n){a[t].d(n),n&&c(r)}}}function Gt(t){let e,o,i,a,l,g,p,y,v,w,E;return{c(){e=f("div"),o=f("label"),i=f("input"),l=d("\n\t\t\t\t\t\tConstraint Solver"),g=h(),p=f("label"),y=f("input"),w=d("\n\t\t\t\t\t\tConstraint Learner"),_(i,"type","radio"),i.__value=a="constraintSolver",i.value=i.__value,t[6][0].push(i),_(o,"class","versionOption svelte-wtyngz"),_(y,"type","radio"),y.__value=v="constraintLearner",y.value=y.__value,t[6][0].push(y),_(p,"class","versionOption svelte-wtyngz"),_(e,"id","chooseVersion"),_(e,"class","svelte-wtyngz")},m(n,a,c){u(n,e,a),s(e,o),s(o,i),i.checked=i.__value===t[0],s(o,l),s(e,g),s(e,p),s(p,y),y.checked=y.__value===t[0],s(p,w),c&&r(E),E=[m(i,"change",t[5]),m(y,"change",t[7])]},p(n,t){1&t&&(i.checked=i.__value===n[0]),1&t&&(y.checked=y.__value===n[0])},i:n,o:n,d(n){n&&c(e),t[6][0].splice(t[6][0].indexOf(i),1),t[6][0].splice(t[6][0].indexOf(y),1),r(E)}}}function Kt(n){let t;const e=new At({props:{dataset:n[8].dataset,types:n[8].types,selectedAttributes:n[1]}});return{c(){H(e.$$.fragment)},m(n,r){q(e,n,r),t=!0},p(n,t){const r={};2&t&&(r.selectedAttributes=n[1]),e.$set(r)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Zt(n){let t;const e=new Jt({props:{dataset:n[8].dataset,types:n[8].types,selectedAttributes:n[1]}});return{c(){H(e.$$.fragment)},m(n,r){q(e,n,r),t=!0},p(n,t){const r={};2&t&&(r.selectedAttributes=n[1]),e.$set(r)},i(n){t||(B(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Qt(t){let e;return{c(){e=f("p"),e.textContent="...loading"},m(n,t){u(n,e,t)},p:n,i:n,o:n,d(n){n&&c(e)}}}function ne(n){let t,e,r,o,i={ctx:n,current:null,token:null,pending:Qt,then:Wt,catch:Xt,value:8,error:9,blocks:[,,,]};return Y(r=n[2],i),{c(){t=f("div"),e=f("div"),i.block.c(),_(e,"id","main"),_(e,"class","svelte-wtyngz"),p(t,"padding","'20px'")},m(n,r){u(n,t,r),s(t,e),i.block.m(e,i.anchor=null),i.mount=()=>e,i.anchor=null,o=!0},p(t,[e]){{const r=(n=t).slice();r[8]=i.resolved,i.block.p(r,e)}},i(n){o||(B(i.block),o=!0)},o(n){for(let n=0;n<3;n+=1){R(i.blocks[n])}o=!1},d(n){n&&c(t),i.block.d(),i.token=null,i=null}}}function te(n){let t={};for(let e=0;e<dn(n).length;e++){let r=dn(n)[e];"tconst"===r||"title"===r||"year"===r||(t[r]="type"===r||"genre"===r?hn(n)[e]:+hn(n)[e])}return t}async function ee(){const n=await Mn("movies.csv",te);return console.log(n),{dataset:n,types:function(n){const t={};for(let e of Object.keys(n)){const r=n[e];isNaN(parseFloat(r))?t[e]="string":t[e]="number"}return t}(n[0])}}function re(n,t,e){let r=null,o=[],i=ee();return[r,o,i,-1,function(n){let t=n.detail.attribute;o.includes(t)||(o.push(t),e(1,o))},function(){r=this.__value,e(0,r)},[[]],function(){r=this.__value,e(0,r)}]}window.console||(window.console={});for(var oe=["debug","warn","info"],ie=0;ie<oe.length;ie++)console[oe[ie]]=function(){};return new class extends W{constructor(n){super(),X(this,n,re,ne,i,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
